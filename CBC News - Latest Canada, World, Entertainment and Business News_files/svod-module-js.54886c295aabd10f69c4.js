(window._vfP=window._vfP||[]).push([[190],{667:function(e,t,r){"use strict";r.r(t),r.d(t,"storeModule",(function(){return _}));r(3),r(7),r(35),r(47),r(48),r(17),r(18),r(13),r(27),r(14),r(15),r(52);var n=r(0),i=r(4),o=r(2),a=r(20),s=r(49),c=r(39),u="/identity/v2/auth/account",l=r(129),d=r(77),f=r(1);function p(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v="ssoLogin",w="logout",P={},b={[i.Uc](e){var t=e.dispatch,r=e.getters;return t(i.Vc).then((function(e){(P=e).$hooks.register("socialLoginFormRender",(function(){P.$hooks.call("setButtonsName",{socialregistration:r[n.Bb]("feed.additionalInfo.nav.finish")}),a.a.getInstance().$publish("svod-authentication","additional-information")})),t(i.Rc),a.a.getInstance().$subscribe(f.p.CHANNEL,f.p.EVENTS.FAILURE,(function(){return t(i.ed)}))}))},[i.Vc](e){var t=e.getters,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new window.LoginRadiusV2(g(g({},t[n.Qc]()),r))},[i.Yc](e){var t=e.commit;return P.init("socialLogin",{container:"vf-svod-thirdparty",onSuccess:y("login","failure",t),onError:S("login","failure")}),Promise.resolve()},[i.Zc]:(e,t)=>(p(e),P.util.openWindow(t)),[i.Wc]:()=>(P.customInterface(".vf-svod-thirdparty",{templateName:"loginradiuscustom_tmpl"}),Promise.resolve()),[i.fd](e,t){p(e);var r=t.email,n=t.password;return new Promise((function(e,t){return P.api.login({email:r,password:n},e,t)}))},[i.Xc](e,t){var r=e.dispatch,n=e.commit;return r(i.fd,t).then(y("login","failure",n)).catch(S("login","failure",t.email))},[i.dd](e){var t=e.dispatch;return new Promise((function(e,t){P.init(v,{onSuccess:e,onError:t})})).then((function(e){return t(i.Qc,e)})).then((function(e){var t=e.access_token;return E("login","failure",t)})).catch(S("login","failure"))},[i.ed]:()=>new Promise((function(e,t){P.init(w,{onSuccess:e,onError:t})})),[i.Sc](e){var t=e.getters[n.Kc].site_uuid;return Object(s.p)(t).then((function(e){P.options.sott=e.data.token}))},[i.ad](e,t){var r=e.dispatch,n=e.commit;return r(i.Sc).then((function(){r(i.Rc).then((function(e){return new Promise((function(r,n){return P.api.registration(e,t,r,n)}))})).then(y("authentication","signup/failure",n)).catch(S("authentication","signup/failure"))}))},[i.Tc](e,t){p(e);var r=a.a.getInstance();return new Promise((function(e,r){return P.api.forgotPassword({email:t},e,r)})).then((function(){return r.$publish("account","reset/success",t)})).catch((function(e){return r.$publish("account","reset/failure",e)}))},[i.bd](e){var t=e.dispatch,r=e.getters[n.ib],o=r.email_pending;return"pending_update"===r.email_verification_status?t(i.Oc,{email:o}):new Promise((function(e,t){return P.api.resendEmailVerification({email:o},e,t)}))},[i.Oc](e,t){p(e);var r=t.email;return new Promise((function(e,t){P.api.addEmail({email:r,type:"Primary"},e,t)}))},[i.Pc](e,t){p(e);var r=t.oldPassword,n=t.newPassword,i=t.currentPassword;return new Promise((function(e,t){P.api.changePassword({oldPassword:r,newPassword:n,currentPassword:i},e,t)}))},[i.hd](e,t){var r=e.commit,n=t.vtoken;return new Promise((function(e,t){P.api.emailVerification({vtoken:n},e,t)})).then(y("authentication","signup/failure",r))},[i.gd](e,t){p(e);var r=t.access_token,n=t.updates;return new Promise((function(e,t){P.api.updateData("",n,r,e,t)}))},[i.Qc](e,t){var r=e.getters,i=e.commit;return function(e,t){return Object(c.e)().get(u,{apiKey:e,access_token:t})}(r[n.Kc].authprovider_loginradius_api_key,t).then((function(e){var r=e.data;return i(o.hd,r),{access_token:t,data:r}}))},[i.cd](e,t){p(e);var r=t.resettoken,n=t.password,i=t.confirmpassword;return new Promise((function(e,t){P.api.resetPassword({resettoken:r,password:n,confirmpassword:i},e,t)}))},[i.Rc](e){var t=e.getters,r=e.commit;return t[n.Sc]()||(P.$hooks.register("registrationSchemaFilter",(function(e){delete P.$hooks.hooks.registrationSchemaFilter,r(o.id,e.slice(0,e.length))})),P.init("registration",{})),t[n.Sc]()}},y=function(e,t,r){return function(n){var i=n.Profile,a=n.Data,s=n.access_token,c=i||a||{};return r(o.gd,s),r(o.hd,c),E(e,t,s)}},S=function(e,t,r){var n=a.a.getInstance();return function(i){n.$publish(e,t,{reason:i[0]&&i[0].Message},{login_type:d.c,email:r})}},E=function(e,t,r){var n=a.a.getInstance();return Object(s.m)(r).then(s.d).then((function(e){n.$publish(f.F.CHANNEL,f.F.EVENTS.LOADED,e),n.$publish(f.D.CHANNEL,f.D.EVENTS.CLOSE),n.$publish(f.p.CHANNEL,f.p.EVENTS.SUCCESS,e,d.c)})).catch((function(r){r.response&&r.response.data&&r.response.data.error&&(r=Object(l.a)(r.response.data)),n.$publish(e,t,r)}))},O=(r(8),r(12),r(202),r(175),{[n.Qc]:(e,t)=>function(){var e=new URL(t[n.Gc].url);e.searchParams.delete("vtype"),e.searchParams.delete("vtoken"),e.hash="";var r=t[n.Kc];return{apiKey:r.authprovider_loginradius_api_key,appName:r.authprovider_loginradius_app_name,forgotPasswordUrl:e,resetPasswordUrl:e,verificationUrl:e,hashTemplate:!0,formValidationMessage:!0,optionalEmailVerification:!0,askEmailForUnverifiedProfileAlways:!0,loginOnEmailVerification:!0,customizeSocialPopup:"width=650,height=450,resizable=1,scrollbars=1,status=1"}},[n.Sc]:e=>function(){return e.registrationSchema},[n.Pc]:e=>function(){return e.accessToken||window.localStorage.getItem("LRTokenKey")},[n.Rc]:e=>function(){return e.profile||JSON.parse(window.localStorage.getItem("LoginRadiusUser"))||{}},[n.Uc]:(e,t)=>function(){var e=t[n.Rc]();return Boolean(e.ID&&"Email"!==e.RegistrationProvider)}}),k=(r(92),{[o.id](e,t){e.registrationSchema=t},[o.gd](e,t){e.accessToken=t},[o.hd](e,t){e.profile=t,window.localStorage.setItem("LoginRadiusUser",JSON.stringify(t))}}),_=function(){return{getters:O,mutations:k,actions:b}}}}]);
//# sourceMappingURL=svod-module-js.54886c295aabd10f69c4.js.map