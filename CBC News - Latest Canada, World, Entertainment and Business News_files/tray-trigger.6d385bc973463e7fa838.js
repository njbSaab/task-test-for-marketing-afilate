(window._vfP=window._vfP||[]).push([[172],{730:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=function(){},a=function(t){return"$".concat(t,"_inListener")},s=function(t){return"$".concat(t,"_outListener")},r=function(t){return"$".concat(t,"_tid")},o=function(t){var e=t.inEvent,n=t.outEvent,o=t.activeClass,u=t.defaultCallback,c=void 0===u?i:u,l=t.outTimeout,d=void 0===l?50:l;return{inserted(t,i){var u=i.name,l=i.value,h=void 0===l?c:l,v=i.arg,f=void 0===v?o:v;t[a(u)]=function(){clearTimeout(t[r(u)]),t.classList.add(f),h(!0)},t.addEventListener(e,t[a(u)],{passive:!0}),t[s(u)]=function(){clearTimeout(t[r(u)]),t[r(u)]=setTimeout((function(){t.classList.remove(f),h(!1)}),d)},t.addEventListener(n,t[s(u)],{passive:!0})},unbind(t,i){var o=i.name;clearTimeout(t[r(o)]),delete t[r(o)],t.removeEventListener(e,t[a(o)]),delete t[a(o)],t.removeEventListener(n,t[s(o)]),delete t[s(o)]}}}},773:function(t,e){t.exports='<path fill="currentColor" fill-rule="evenodd" d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"></path>\n'},879:function(t,e,n){"use strict";n.r(e);n(3),n(37);var i=n(0),a=n(2),s=n(422),r=n(1),o=n(191),u=n(685),c=n(686),l=n(881),d=n(773),h=n.n(d),v=n(675),f=Object(v.c)("bell_icon",h.a),E=n(674),g=n(5),N=n(250),L=g.d.LIVEBLOG,p=g.d.TRAY_TRIGGER,C=g.d.COMMENTS,T={components:{roundCountBadge:l.a,vfBellIcon:f,vfButton:E.a},directives:{hovered:c.a,innerFocus:u.a},props:{floating:{type:String,default:"false"},parentComponent:{type:String,default:"",validator:t=>-1!==[L,p,C].indexOf(t)}},data:()=>({locatorsTrayTrigger:N.e,dataVfId:-1,hidden:!1}),computed:{countBadgeSize(){return this.isFloating?s.a.SMALL:s.a.TINY},isFloating(){return"true"===this.floating},isLoggedIn(){return this.$store.getters[i.Tb]},currentUserUuid(){return this.$store.getters[i.kb]},count(){var t=this.$store.state.notifications.broadcasts.guest_user;return this.isLoggedIn||""===t?this.$store.getters[i.qc]:0},ariaCount(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel(){return this.$i18n("aria.open_tray")},classes(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},created(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted(){var t=this;window.vf.context.init(o.a.NOTIFICATIONS),this.$publish(r.b.CHANNEL,r.b.EVENTS.BELL_LOAD,{widget_type:this.parentComponent}),this.$publish(r.J.CHANNEL,r.J.EVENTS.LOADED,this),this.$subscribe(r.J.CHANNEL,r.J.EVENTS.HIDE,(function(){t.hidden=t.isFloating})),this.$subscribe(r.J.CHANNEL,r.J.EVENTS.UNHIDE,(function(){setTimeout((function(){t.hidden=!1}),250)}));var e=window.localStorage.getItem("_vf_notification_queue_last_seen_".concat(this.currentUserUuid));this.isLoggedIn||null===e||this.$store.commit(a.hc,e)},methods:{toggle(){this.$publish(r.D.CHANNEL,r.D.EVENTS.TOGGLE,this.$el),this.$publish(r.J.CHANNEL,r.J.EVENTS.CLICKED),this.parentComponent===p?this.$publish(r.b.CHANNEL,r.b.EVENTS.TRAY_TRIGGER_CLICK,{floating:this.isFloating}):this.parentComponent===C?this.$publish(r.b.CHANNEL,r.b.EVENTS.CONVERSATION_BELL_CLICK):this.parentComponent===L&&this.$publish(r.b.CHANNEL,r.b.EVENTS.LIVEBLOG_BELL_CLICK)},trayIntent(){this.$publish(r.D.CHANNEL,r.D.EVENTS.OPEN_INTENT)}}},b=n(60),m=Object(b.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId,"data-test":t.locatorsTrayTrigger.bell()},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[n("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),n("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"76f9528e",null);e.default=m.exports}}]);
//# sourceMappingURL=tray-trigger.6d385bc973463e7fa838.js.map