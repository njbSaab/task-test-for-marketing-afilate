!function(e,t,u){function r(e){}function o(e,t,o){for(this.callback=o||r,this.errors=[],this.fields={},this.form=this._formByNameOrNode(e)||{},this.messages={},this.handlers={},e=0,o=t.length;e<o;e++){var n=t[e];if((n.name||n.names)&&n.rules)if(n.names)for(var i=0;i<n.names.length;i++)this._addField(n,n.names[i]);else this._addField(n,n.name)}var a,s=this.form.onsubmit;this.form.onsubmit=(a=this,function(e){try{return a._validateForm(e)&&(s===u||s())}catch(e){}})}function n(e,t){var o;if(!(0<e.length)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[t];for(o=0;o<e.length;o++)if(e[o].checked)return e[o][t]}var p={required:"The %s field is required.",valid_phoneno:"The %s field is not valid.",matches:"The %s field does not match the %s field.",default:"The %s field is still set to default, please change.",valid_email:"The %s field must contain a valid email address.",valid_emails:"The %s field must contain all valid email addresses.",min_length:"The %s field must be at least %s characters in length.",max_length:"The %s field must not exceed %s characters in length.",exact_length:"The %s field must be exactly %s characters in length.",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",alpha_numeric_dash_combo:"The %s field must contain only combination of alpha-numeric characters and dashes.",alphanumeric_combo:"The %s field must contain only combination of alpha-numeric characters.",numeric:"The %s field must contain only numbers.",integer:"The %s field must contain an integer.",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string.",valid_credit_card:"The %s field must contain a valid credit card number.",is_file_type:"The %s field must contain only %s files.",valid_url:"The %s field must contain a valid URL.",valid_ca_zip:"The %s field must contain a valid Postal Code."},i=/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/,a=/^(\\+)|(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{1,14}$/,d=/^(.+?)\[(.+)\]$/,s=/^[0-9]+$/,l=/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[-])[A-Za-z\d][A-Za-z\d-]+$/i,c=/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/,m=/^\-?[0-9]+$/,g=/^\-?[0-9]*\.?[0-9]+$/,f=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,h=/^[a-z]+$/i,y=/^[a-z0-9]+$/i,C=/^[a-z0-9_\-]+$/i,v=/^[0-9]+$/i,T=/^[1-9][0-9]*$/i,w=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,S=/[^a-zA-Z0-9\/\+=]/i,L=/^[\d\-\s]+$/,k=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;o.prototype.setMessage=function(e,t){return this.messages[e]=t,this},o.prototype.registerCallback=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.handlers[e]=t),this},o.prototype._formByNameOrNode=function(e){return"object"==typeof e?e:t.forms[e]},o.prototype._addField=function(e,t){this.fields[t]={name:t,display:e.display||t,rules:e.rules,id:null,type:null,value:null,checked:null}},o.prototype._validateForm=function(e){for(var t in this.errors=[],this.fields){var o;this.fields.hasOwnProperty(t)&&(t=this.fields[t]||{},o=this.form[t.name])&&o!==u&&(t.id=n(o,"id"),t.type=(0<o.length?o[0]:o).type,t.value=n(o,"value"),t.checked=n(o,"checked"),this._validateField(t))}return"function"==typeof this.callback&&this.callback(this.errors,e),0<this.errors.length&&(e&&e.preventDefault?e.preventDefault():event&&(event.returnValue=!1)),!0},o.prototype._validateField=function(e){for(var t=e.rules.split("|"),o=e.rules.indexOf("required"),n=!e.value||""===e.value||e.value===u,i=0,a=t.length;i<a;i++){var s=t[i],r=null,l=!1,c=d.exec(s);if((-1!==o||-1!==s.indexOf("!callback_")||!n)&&(c&&(s=c[1],r=c[2]),"!"===s.charAt(0)&&(s=s.substring(1,s.length)),"function"==typeof this._hooks[s]?this._hooks[s].apply(this,[e,r])||(l=!0):"callback_"===s.substring(0,9)&&(s=s.substring(9,s.length),"function"==typeof this.handlers[s])&&!1===this.handlers[s].apply(this,[e.value,r])&&(l=!0),l)){t=this.messages[s+"#"+e.name]||this.messages[s]||p[s],o="An error has occurred with the "+e.display+" field.",t&&(o=t.replace("%s",e.display),r)&&((cu=0<=r.indexOf("###")&&r.split("###"))?cu[1]&&(o=cu[1]):o=o.replace("%s",this.fields[r]?this.fields[r].display:r)),this.errors.push({Id:e.id,Name:e.name,Message:o,Rule:s});break}}},o.prototype._hooks={required:function(e){var t=e.value.trim();return"checkbox"===e.type||"radio"===e.type?!0===e.checked:null!==t&&""!==t},default:function(e,t){return e.value!==t},matches:function(e,t){t=this.form[t];return!!t&&e.value===t.value},valid_ca_zip:function(e){return i.test(e.value)},valid_email:function(e){return f.test(e.value)},valid_emails:function(e){e=e.value.split(",");for(var t=0;t<e.length;t++)if(!f.test(e[t]))return!1;return!0},min_length:function(e,t){return!!s.test(t)&&e.value.length>=parseInt(t,10)},max_length:function(e,t){return!!s.test(t)&&e.value.length<=parseInt(t,10)},exact_length:function(e,t){return!!s.test(t)&&e.value.length===parseInt(t,10)},greater_than:function(e,t){return!!g.test(e.value)&&parseFloat(e.value)>parseFloat(t)},less_than:function(e,t){return!!g.test(e.value)&&parseFloat(e.value)<parseFloat(t)},alpha:function(e){return h.test(e.value)},alpha_numeric:function(e){return y.test(e.value)},alpha_dash:function(e){return C.test(e.value)},alpha_numeric_dash_combo:function(e){return l.test(e.value)},alphanumeric_combo:function(e){return c.test(e.value)},numeric:function(e){return s.test(e.value)},integer:function(e){return m.test(e.value)},decimal:function(e){return g.test(e.value)},is_natural:function(e){return v.test(e.value)},is_natural_no_zero:function(e){return T.test(e.value)},valid_ip:function(e){return w.test(e.value)},valid_phoneno:function(e){return a.test(e.value)},valid_base64:function(e){return S.test(e.value)},valid_url:function(e){return k.test(e.value)},valid_credit_card:function(e){if(!L.test(e.value))return!1;for(var t=0,o=0,n=!1,i=(e=e.value.replace(/\D/g,"")).length-1;0<=i;i--)o=e.charAt(i),o=parseInt(o,10),n&&9<(o*=2)&&(o-=9),t+=o,n=!n;return 0==t%10},is_file_type:function(e,t){if("file"!==e.type)return!0;for(var o=e.value.substr(e.value.lastIndexOf(".")+1),n=t.split(","),i=!1,a=0,s=n.length;a<s;a++)o==n[a]&&(i=!0);return i}},e.FormValidator=o}(window,document);var LRNameSpace={},LoginRadiusDefaults=(!function(i){i.Storage=function(n,o){return{isLocalStorageNameSupported:function(e){try{if(!window[e])return!1;var t=window[e];try{return t.setItem("test","1"),t.removeItem("test"),!0}catch(e){return!1}}catch(e){return!1}},setBrowserStorage:function(e,t){var o=!0;this.isLocalStorageNameSupported("localStorage")&&(localStorage.setItem(e,t),o=!1),this.isLocalStorageNameSupported("sessionStorage")&&(sessionStorage.setItem(e,t),o=!1),o&&n&&n.options&&i.cookies.setItem(e,t,"",n.options.appPath)},getBrowserStorage:function(e){if(o&&e===o.storedTokenName){var t=this.getBrowserStorage("lr-session-token");if(t)return t=t.replace(/"/g,""),this.setBrowserStorage(o.storedTokenName,t),t}return(this.isLocalStorageNameSupported("localStorage")&&null!==localStorage.getItem(e)&&void 0!==localStorage.getItem(e)&&""!==localStorage.getItem(e)?localStorage:this.isLocalStorageNameSupported("sessionStorage")&&null!==sessionStorage.getItem(e)&&void 0!==sessionStorage.getItem(e)&&""!==sessionStorage.getItem(e)?sessionStorage:i.cookies).getItem(e)},removeBrowserStorage:function(e){var t=!0;this.isLocalStorageNameSupported("localStorage")&&(localStorage.removeItem(e),t=!1),this.isLocalStorageNameSupported("sessionStorage")&&(sessionStorage.removeItem(e),t=!1),t&&n&&n.options&&i.cookies.removeItem(e,n.options.appPath)}}}}(LRNameSpace),LRNameSpace.cookies={intToString:function(e){return e.toString()},stringToInt:function(e){return parseInt(e,10)||0},isSameSiteNoneCompatible:function(e){return!this.isSameSiteNoneIncompatible(e.toString())},isSameSiteNoneIncompatible:function(e){return this.hasWebKitSameSiteBug(e)||this.dropsUnrecognizedSameSiteCookies(e)},hasWebKitSameSiteBug:function(e){return this.isIosVersion(12,e)||this.isMacosxVersion(10,14,e)&&(this.isSafari(e)||this.isMacEmbeddedBrowser(e))},dropsUnrecognizedSameSiteCookies:function(e){return this.isChromiumBased(e)&&this.isChromiumVersionAtLeast(51,e)&&!this.isChromiumVersionAtLeast(67,e)||this.isUcBrowser(e)&&!this.isUcBrowserVersionAtLeast(12,13,2,e)},regexContains:function(e,t){return null!==e.match(t)},extractRegexMatch:function(e,t,o){e=e.match(t);return null!==e&&void 0!==e[o]?e[o]:null},isIosVersion:function(e,t){return this.extractRegexMatch(t,/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//,1)===this.intToString(e)},isMacosxVersion:function(e,t,o){var n=/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//;return this.extractRegexMatch(o,n,1)===this.intToString(e)&&this.extractRegexMatch(o,n,2)===this.intToString(t)},isSafari:function(e){return null!==e.match(/Version\/.* Safari\//)&&!this.isChromiumBased(e)},isMacEmbeddedBrowser:function(e){return this.regexContains(e,/^Mozilla\/[.\d]+ \(Macintosh;.*Mac OS X [_\d]+\) AppleWebKit\/[.\d]+ \(KHTML, like Gecko\)$/)},isChromiumBased:function(e){return this.regexContains(e,/Chrom(e|ium)/)},isChromiumVersionAtLeast:function(e,t){return e<=this.stringToInt(this.extractRegexMatch(t,/Chrom[^ /]+\/(\d+)[.\d]* /,1))},isUcBrowser:function(e){return this.regexContains(e,/UCBrowser\//)},isUcBrowserVersionAtLeast:function(e,t,o,n){var i=/UCBrowser\/(\d+)\.(\d+)\.(\d+)[.\d]* /,a=this.stringToInt(this.extractRegexMatch(n,i,1)),s=this.stringToInt(this.extractRegexMatch(n,i,2)),n=this.stringToInt(this.extractRegexMatch(n,i,3));return a!==e?e<a:s!==t?t<s:o<=n},getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,o,n,i,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="",r=function(e){var t;return e===1/0?"Fri, 31 Dec 9999 23:59:59 GMT":((t=new Date).setTime(t.getTime()+1e3*e),t.toGMTString())};if(o)switch(o.constructor){case Number:s="; expires="+r(o)+o===1/0?"":"; max-age="+o;break;case String:s="; expires="+o;break;case Date:s="; expires="+o.toUTCString()}"lr-user--token"===e&&(a=!0);var l=navigator.userAgent;return"lr-session-token"===e&&this.isSameSiteNoneCompatible(l)?document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(i?"; domain="+i:"")+(n?"; path="+n:"")+";secure;SameSite=None":document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(i?"; domain="+i:"")+(n?"; path="+n:"")+(a?"; secure":""),!0},removeItem:function(e,t,o){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,o=0;o<t;o++)e[o]=decodeURIComponent(e[o]);return e}},LRNameSpace.Utilities=function(){var e=navigator.userAgent.toLowerCase(),s={version:(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(e),opera:/opera/.test(e),msie:(/msie/.test(e)||/trident/.test(e))&&!/opera/.test(e),mozilla:/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)},r=!1,l=!1,o=[];function c(){if(!l&&(l=!0,o)){for(var e=0;e<o.length;e++)o[e].call(window,[]);o=[]}}function n(){if(!r){var e,t,o;if(r=!0,document.addEventListener&&!s.opera&&document.addEventListener("DOMContentLoaded",c,!1),s.msie&&window===top&&!function(){if(!l){try{document.documentElement.doScroll("left")}catch(e){return}c()}}(),s.opera&&document.addEventListener("DOMContentLoaded",function(){if(!l){for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].disabled)return;c()}},!1),s.safari)if(!l&&("loaded"===document.readyState||"complete"===document.readyState)){if(void 0===e){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++)"stylesheet"===n[i].getAttribute("rel")&&e++;var a=document.getElementsByTagName("style");e=void 0===e?a.length:e+a.length}document.styleSheets.length===e&&c()}t=c,o=window.onload,"function"!=typeof window.onload?window.onload=t:window.onload=function(){o&&o(),t()}}}return{browser:s,getHashParam:function(e){var t=window.location.hash.match(new RegExp(e+"=([^&]*)")),t=window.location.hash&&null!=t?t[1]:this.getQueryParameterByName(e);return t},keysToLowerCase:function(e){for(var t,o=Object.keys(e),n=o.length,i={};n--;)i[(t=o[n]).toLowerCase()]=e[t],"object"==typeof i[t.toLowerCase()]&&null!=i[t.toLowerCase()]&&(i[t.toLowerCase()]=this.keysToLowerCase(i[t.toLowerCase()]));return i},elementsByClass:function(e,t){if(""!==e){t=t||document.body;for(var o=[],n=new RegExp("(^| )"+e+"( |$)"),i=t.getElementsByTagName("*"),a=0,s=i.length;a<s;a++)n.test(i[a].className)&&o.push(i[a]);return o}},isValidUrl:function(e){return!!/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(e)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addclass:function(e,t){return!this.hasClass(e,t)&&(e.className+=" "+t,!0)},isSubstring:function(e,t){for(var o in t)if(-1!==t[o].indexOf(e))return o;return!1},isJWT:function(e){try{var[t]=e.split(".");return"object"==typeof JSON.parse(atob(t))}catch(e){return!1}},isJsonString:function(e){try{return JSON.parse(e)}catch(e){return!1}},addEvent:function(e,t,o){var n=[];t instanceof Array?n=t:n.push(t);for(var i=0;i<n.length;i++)n[i]["on"+e]=o},getQueryParameterByName:function(e,t){t="&"+(t||location.search),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==e?null:decodeURIComponent(e[1].replace(/\+/g," "))},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},getQueryStringValue:function(e,t){e=e||window.location.href,t=new RegExp("[?&]"+t+"=([^&#]*)","i").exec(e);return t?t[1]:null},extend:function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},ready:function(e,t){n(),l?e.call(window,[]):o.push(function(){return e.call(window,[])})},parseQueryString:function(e){var t={};if((e||""!==e)&&"string"==typeof e)for(var o=e.split("&"),n=0;n<o.length;n++){var i=o[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t},encodedString:function(e){return e=-1===e.indexOf("%2B")?e.replace(/\+/g,"%2B"):e},mergeOptions:function(e,t){var o,n,i={};for(o in e)i[o]=e[o];for(n in t)i[n]=t[n];return i},mergeObjects:function(e,t,o){var n,i,a=[];for(i in e){for(var s in t)n=o?t[s]===e[i]:t[s].name===e[i].name;if(n)break;a.push(e[i])}return a=a.concat(t)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},randomString:function(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),o=(e=e||Math.floor(Math.random()*t.length),""),n=0;n<e;n++)o+=t[Math.floor(Math.random()*t.length)];return o},findInSchema:function(e,t,o,n){for(var i=0;i<e.length;i++)if((n?e[i]&&e[i][t].toLowerCase():e[i]&&e[i][t])===o)return e[i];return null},jsonToQueryString:function(t){return Object.keys(t).map(function(e){return t[e]?encodeURIComponent(e)+"="+encodeURIComponent(t[e]):""}).join("&")},insertBefore:function(e,t){t.parentNode.insertBefore(e,t)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},keyslowerToUpperCamelCase:function(e){for(var t,o=Object.keys(e),n=o.length,i={};n--;)i[(t=o[n]).charAt(0).toUpperCase()+t.substr(1)]=e[t];return i},findElementByRegex:function(e,t,o){for(var n=o?document.querySelectorAll(o):document.querySelectorAll("*"),i=[],a=0;a<n.length;a++)t.test(n[a][e])&&i.push(n[a]);return i},isObject:function(e){return e instanceof Object&&e.constructor===Object},parseString:function(e){return void 0!==e&&JSON.parse(e)},containsObject:function(e,t,o){if(o){for(var n=0;n<e.length;n++)if(e[n][o]===t[o])return!0;return!1}}}},LRNameSpace.ProgressiveProfiling=function(m,g,f,h){return{fetchSchema:function(e){m.util.ajaxCall("get",h.configApiDomain+"progressiveProfilingSchema?apikey="+m.options.apiKey+"&appName="+m.options.appName,"",e)},execStep:function(s,e){var r,l,c,u,p,d;m.progressiveProfilingSchema&&(r=e.onSuccess||function(){},l=e.onError||function(){},c=e.container||"",u=e.classPrefix||"",p=e.templateName||"",d=m.storage.getBrowserStorage(h.storedTokenName))&&m.util.ajaxCall("get",h.apiDomain+"/auth/socialidentity?apiKey="+m.options.apiKey+"&access_token="+d,"",function(e){var t,o,n,i,a=m.util.findInSchema(m.progressiveProfilingSchema.ProfilingSteps,"Step",s);a?((t={}).Profile=e,t.access_token=d,"email"===(o=e.Provider.toLowerCase())||"raas"===o||m.options.progressiveProfilingTraditional?(m.options.progressiveProfilingTraditional&&"email"!==o&&"raas"!==o&&(e=m.LoggedinSocialProvderProfile),i=a.Schema,n=g.mapSchema(i,e,null,!0),t.Profile=e,0<n.length?g.createForm(n,"progressiveProfiling",c,function(e){f.updateData(t,c,e,r,l,u,n,"progressiveProfiling")},function(e){l(e)},u):g.loginHandleToken(t,"",r,l)):(i=a.Scopes,(e=m.util.findInSchema(i,"Provider",o,!0))?(a="https://"+(m.options.customDomain||m.options.appName+"."+h.hubDomain)+"/RequestHandlor.aspx?apikey="+m.options.apiKey+"&provider="+o+"&scope="+e.Scopes,(i=[]).push({Name:o,Endpoint:a}),g.renderCustomInterface(c,"",p,"","",i),g.socialLogin(c,r,l)):g.loginHandleToken(t,"",r,l))):m.log("Step Schema not found.")})}}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,o=Number(arguments[1])||0;for((o=o<0?Math.ceil(o):Math.floor(o))<0&&(o+=t);o<t;o++)if(o in this&&this[o]===e)return o;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n,i=[],a=arguments[1],s=0;s<o;s++)s in t&&(n=t[s],e.call(a,n,s,t))&&i.push(n);return i}),!function(i){"use strict";function n(){for(var e=i.location.hash?i.location.hash.substr(1).split("&"):[],t={},o=0;o<e.length;o++){var n=e[o].split("=");t[n[0]]=decodeURIComponent(n[1])}return t}function a(e){var t,o=[];for(t in e)o.push(t+"="+encodeURIComponent(e[t]));i.location.hash=o.join("&")}i.hash={get:function(e){var t=n();return e?t[e]:t},add:function(e){var t,o=n();for(t in e)o[t]=e[t];a(o)},remove:function(e){e="string"==typeof e?[e]:e;for(var t=n(),o=0;o<e.length;o++)delete t[e[o]];a(t)},clear:function(){a({})}}}(window),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a])}return o},writable:!0,configurable:!0}),{idPrefix:"loginradius-",classPrefix:"loginradius-",apiDomain:"https://api.loginradius.com/identity/v2",hubDomain:"hub.loginradius.com",cloudApiDomain:"https://cloud-api.loginradius.com/",configApiDomain:"https://config.lrcontent.com/ciam/",socialApiDomain:"https://api.loginradius.com/api/v2/",externalLibrary:"https://auth.lrcontent.com/v2/external-libs/",isRegFormSchemaLock:!1,isSecurityFormSchemaLock:!1,innerHTML:!1,autoFilledFieldforPasswordLesLogin:!1,socialRegFormId:"",lrResponseCounter:0,LRPhoneNo:"",lrCounterJwtResponse:"",lrCounterTokenResponse:"",storedTokenName:"LRTokenKey",storedTwoFAToken:"lr2fatok",storedSessionTokenData:"lrSessionTokenObj",storedOTPAuth:"lrotpauthver",storedGAAuth:"lrgaauthver",storedEmailOTPAuth:"lremailotpauthver",storedSQAuth:"lrsqauthver",storedUidName:"lr-user-uid",tokenCookie:"lr-user--token",fedSessCookie:"lr_fed_sess",storedOrganization:"lrorganization",isSSOInitFired:!1,pingCount:1,messages:{tokenValid:{Message:"Access token is not valid",Description:"LoginRadius Access Token is invalid, please verify the authentication response",ErrorCode:905},twofaTokenValid:{Message:"Token is not valid",Description:"Your session is not valid."},twofaGAAuthDisable:{Message:"Already Disabled",Description:"Authenticator App is already disabled."},twofaOTPAuthDisable:{Message:"Already Disabled",Description:"SMS authenticator is already disabled."},twofaAuthRequired:{Message:"Cannot Disable",Description:"Two factor authentication is required, So atleast one authenticator should be required."},invalidEmail:{Message:"Invalid Email",Description:"The email entered is not a valid email."},invalidPhone:{Message:"Invalid Phone",Description:"The mobile number entered is not valid."},disabledAccountLinking:"Account Linking disabled in your account",noSecurityQuestions:"There are no security questions for this application",invalidSott:"Something went wrong, please try again.",notValidMessage:"Error Message element not valid",passwordStrengthMessage:"Password strength meter configuration is not valid.",otpSent:"Verification Code Sent Successfully",vTokenError:{Message:"Verification token not found in query string."},notFound:"Data not found.",emailNotVerified:{Message:"The email is not verified, please verify the link in your email",Description:"The email is not verified, please verify the link in your email",ErrorCode:970},phoneNotVerified:{Message:"Phone number is not verified",Description:"The provided phone number is not verified, please use a verified phone number for login.",ErrorCode:1066},blockedUser:{Message:"User is blocked",Description:"This user is blocked by site admin",ErrorCode:991},unverifiedUser:{Message:"This Uid have only traditional unverified account",Description:"This Uid have only traditional unverified account",ErrorCode:1028},captchaError:{Message:"The Captcha is required.",Description:"The Captcha is required."}},buttonNames:{login:"Login",socialregistration:"Login",loginrequiredfieldsupdate:"Login",registration:"Register",verifyemail:"Verify",resetpassword:"Reset Password",resetpin:"Reset PIN",sociallogin:"Login",otp:"Verify",twofaotp:"Verify",twofaemailotp:"Verify",showqrcode:"Verify",updatephone:"Update",changephone:"Update",forgotpassword:"Send",forgotpin:"Send",securityquestions:"Get",changepassword:"Submit",changepin:"Change PIN",resendemailverification:"Send",addemail:"Send",removeemail:"Send",changeusername:"Submit",profileeditor:"Update Profile",otplogin:"Verification Code",passwordlessloginbuttonlabel:"Email me a link to Sign In",passwordlessloginotpbuttonlabel:"Send Verification Code to Sign In",createtwofactorauthentication:"2-Step Verification",sendotp:"Send Verification Code",resendotp:"Resend via SMS",resendvoiceotp:"Resend via Voice call",changenumber:"Change Number",backupcode:"Login",backupcodebutton:"Try another way to Sign In",backupcodebackbutton:"Back",generatebackupcodebutton:"Generate Backup Codes",disablegoogleauthenticator:"Disable Authenticator App",disablesqauthenticator:"Disable Security Questions",disableemailotpauthenticator:"Disable Email Verification",disableotpauthenticator:"Disable SMS Verification",updatesecurityquestion:"Update Security Question",resetpwdbysecq:"Reset Password By SecurityQ",resetpinbysecq:"Reset PIN By SecurityQ",smartlogin:"Smart Login",validatecode:"Validate",onetouchlogin:"Login",progressiveprofiling:"Progressive Profiling",privacypolicyupdate:"Accept",updatephone2fa:"Update",pinsetup:"Set Pin",pinlogin:"Login",pinreauthentication:"Verify",pinloginbackbtn:"Back",consentlogin:"Submit Consent",customeventconsent:"Submit Consent",consenteditor:"Submit Consent",resetBackupCode:"Reset Backup Code",emailotp:"Verify Identity via Email ",googleauthenticator:"Verify Identity via Authenticator App",securityquestionsauthenticator:"Verify Identity via Security Questions",mfasecurityquestion:"Submit",otpauthenticator:"Verify Identity via SMS",mfaselectemails:"Submit",organization:"Continue",lookupdomain:"Login"},templates:{consentMainTemplate:"loginradius_consent_custom_tmpl",consentGroupTemplate:"loginradius_consent_group_tmpl",consentOptionTemplate:"loginradius_consent_option_tmpl"},options:{passwordlessLoginEmailTemplate:"",callbackUrl:window.location,callbackInsideSameWindow:"",callbackType:"",scope:"",loginUrl:"",deleteUrl:"",emailTemplate:"",verificationUrl:"",verificationEmailTemplate:"",resetPasswordEmailTemplate:"",resetPINEmailTemplate:"",resetPasswordConfirmationEmailTemplate:"",resetPINConfirmationEmailTemplate:"",smartLoginRedirectUrl:"",autoLoginRedirectUrl:"",smartLoginEmailTemplate:"",autoLoginEmailTemplate:"",smsTemplate2FA:"",smsTemplateForgot:"",smsTemplateWelcome:"",smsTemplateOneTouchLoginWelcome:"",smsTemplateOneTouchLogin:"",passwordlessLoginSMSTemplate:"",smsTemplate2FAWelcome:"",smsTemplatePhoneVerification:"",smsTemplateUpdatePhone:"",welcomeEmailTemplate:"",onetouchLoginEmailTemplate:"",deleteUserEmailTemplate:"",onetouchLoginRedirectUrl:"",resetPasswordUrl:"",resetPINUrl:"",templateName:"",debugMode:!1,tokenType:"lrtoken",integrationName:"",smartLoginPingCount:100,smartLoginPingInterval:5,crossDeviceSSOPingCount:100,crossDeviceSSOPingInterval:5,maskSensitiveInput:!1,enableHeaderSott:!0,accessTokenResponse:!0,rbaOneclickEmailTemplate:"",rbaOTPSmsTemplate:"",rbaCityEmailTemplate:"",rbaCountryEmailTemplate:"",rbaBrowserEmailTemplate:"",rbaIpEmailTemplate:"",rbaDeviceEmailTemplate:"",rbaCitySmsTemplate:"",rbaCountrySmsTemplate:"",rbaBrowserSmsTemplate:"",rbaIpSmsTemplate:"",rbaDeviceSmsTemplate:"",setLRSession:!1,askOptionalFieldsOnProgressiveSteps:!0,disableResendOTPButton:!1,disableResendOTPButtonDelay:5,EmailTemplate2FA:"",authenticatorOptionsOrder:["emailotp","securityquestion","googleauth","sms"]},regexExpression:{emailRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,phoneRegex:/^(\\+)|(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{8,14}$/},_uuidFormat:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,loginURLs:["/auth/login","/auth/email","/auth/onetouchlogin","/auth/password"],captchaActions:["login","passwordlesslogin","onetouchlogin","verifyotp","verifyemail","resetpassword","forgotpassword","changepassword","login##otp","otp","twofaotp","twofaemailotp"]});function LoginRadiusUtility(T,e){var l=LoginRadiusDefaults.buttonNames,w=new LRNameSpace.Utilities,c=this,n=(c.elementById=function(e,t){var o=document.getElementById(e);if(o)return o;t||T.log("Unable to find id: "+e)},c.getThisObjectName=function(){for(var e in T.global)if("frameElement"!==e&&"webkitStorageInfo"!==e&&"webkitIndexedDB"!==e&&"localStorage"!==e&&"sessionStorage"!==e&&T.global[e]===T)return e},c.serialize=function(e,t){if(e&&"FORM"===e.nodeName){for(var o,n=[],i=e.elements.length-1;0<=i;i-=1)if(""!==e.elements[i].name&&(t||""!==e.elements[i].value.trim()))switch("emailid"!==e.elements[i].name||T.options.usernameLogin||T.options.duplicateEmailWithUniqueUsername||(e.elements[i].value=e.elements[i].value.toLowerCase()),e.elements[i].nodeName){case"INPUT":switch(e.elements[i].type){case"text":case"hidden":case"button":case"reset":case"submit":case"email":var a=e.elements[i].name;"emailid"===a&&(a="email"),(!e.elements[i].disabled||"emailid"===e.elements[i].name&&T.util.getQueryParameterByName("email"))&&n.push(a+"="+encodeURIComponent(e.elements[i].value.trim()));break;case"password":n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].value));break;case"checkbox":n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].checked));break;case"radio":e.elements[i].checked&&n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].value))}break;case"TEXTAREA":n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].value.trim()));break;case"SELECT":switch(e.elements[i].type){case"select-one":n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].value.trim()));break;case"select-multiple":for(o=e.elements[i].options.length-1;0<=o;o-=1)e.elements[i].options[o].selected&&n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].options[o].value.trim()))}break;case"BUTTON":switch(e.elements[i].type){case"reset":case"submit":case"button":n.push(e.elements[i].name+"="+encodeURIComponent(e.elements[i].value.trim()))}}return n.join("&")}},c.addJs=function(e,t){var o=(t=t||document).getElementsByTagName("head")[0],t=t.createElement("script");return t.src=e,t.type="text/javascript",o.appendChild(t),t},c.hashTmpl=function e(t,o){t=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<#").join("\t").replace(/((^|#>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)#>/g,"',$1,'").split("\t").join("');").split("#>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t]||(c.elementById(t)?e(c.elementById(t).innerHTML):"");return"function"==typeof t?o?t(o):t:""},{});c.tmpl=function e(t,o){t=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t]||(c.elementById(t)?e(c.elementById(t).innerHTML):"");return"function"==typeof t?o?t(o):t:""},c.jsonpCall=function(e,t,o,n){T.$hooks.call("startProcess",n);o=o||"Loginradius"+Math.floor(1e18*Math.random()+1),window[o]=function(e){t(e),T.$hooks.call("endProcess",n)},e=-1!==e.indexOf("?")?e+"&callback="+o:e+"?callback="+o;c.addJs(e)},c.getButtonAttribute=function(e,t,o,n,i){var a,t=t||LoginRadiusDefaults.idPrefix,o=(T.buttonElements[e]?a=(a=T.buttonElements[e]).cloneNode(!0):((a=document.createElement("input")).type="button",a.value=T.buttonsName[e]||l[e]||n),o&&(a.onclick=o),n&&(a.datavalue=n.trim()),a.id=t+"button-"+e,"");return(o=document.createElement("div")).setAttribute("class",t+"-form-element-content content-"+t+e),o.appendChild(a),o},c.ajaxCall=function(e,o,n,i,a,s){var r=this,l=a;a&&-1!==a.indexOf("##")&&(l=a.split("##")[1]),T.$hooks.call("startProcess",a,n);try{var c=new XMLHttpRequest;if(T.options.projectionFields&&a){var u=Object.keys(T.options.projectionFields),p=["verifyOTP","updateData"],d=!1,m=a;if(T.LRCheckRegistration?(d=-1!==p.indexOf(a),m="registration"):T.LRCheckLogin&&(d=-1!==p.indexOf(a),m="login"),-1!==u.indexOf(a)||d){var g=T.options.projectionFields[m];if(g&&0<g.length){for(var f=["ErrorCode","Profile/Uid","Profile/IsDeleted","access_token","Profile/EmailVerified","Profile/PhoneIdVerified","Profile/PhoneId","PhoneId","PhoneIdVerified","EmailVerified","Uid","IsDeleted"],h=((T.options.twoFactorAuthentication||T.options.optionalTwoFactorAuthentication)&&f.push("SecondFactorAuthentication/SecondFactorAuthenticationToken","SecondFactorAuthentication/IsOTPAuthenticatorVerified","SecondFactorAuthentication/IsGoogleAuthenticatorVerified","SecondFactorAuthentication/OTPPhoneNo","SecondFactorAuthentication/ManualEntryCode"),g=w.mergeObjects(g,f,!0),"&fields="),y=0;y<g.length;y++)y===g.length-1?h+=g[y]:h=h+g[y]+",";o+=h}}}var C,v=T.util.getQueryParameterByName("access_token",o);T.options.passAccessTokenInHeader&&v&&-1<o.indexOf(LoginRadiusDefaults.apiDomain)||-1!==["setCustomToken","setToken"].indexOf(a)?(o=o.replace("&access_token="+v,"").replace("?access_token="+v+"&","?").replace("?access_token="+v,"?"),c.open(e,o,!0),c.setRequestHeader("Authorization","Bearer "+v)):c.open(e,o,!0),(-1<o.indexOf("/ssologin/")||"setToken"===a)&&(c.withCredentials=!0),-1===o.indexOf("cdn")&&-1===o.indexOf(".json")&&c.setRequestHeader("X-Requested-With","XMLHttpRequest");let t=!1;for(let e=0;e<LoginRadiusDefaults.loginURLs.length;e++)if(-1!==o.indexOf(LoginRadiusDefaults.loginURLs[e])){t=!0;break}t&&void 0!==(C=LRNameSpace.cookies.getItem(LoginRadiusDefaults.fedSessCookie))&&null!=C&&c.setRequestHeader("X-Params",C),n.sottcheck&&(c.setRequestHeader("X-LoginRadius-Sott",T.options.sott),delete n.sottcheck),T.$hooks.call("modifyXhrRequest",a,c,o),n?(n="string"==typeof n||n instanceof String?JSON.stringify(w.parseQueryString(n)):JSON.stringify(n),c.setRequestHeader("Content-Type","application/json"),c.send(n)):c.send(null),c.onreadystatechange=function(){var e,t;4===c.readyState&&((e=c.response)&&(t=JSON.parse(e),-1<Object.keys(t).map(function(e){return e.toLowerCase()}).indexOf("errorcode")?T.$hooks.call("xhrEndWithError",a):T.$hooks.call("xhrEndWithSuccess",a)),"500"==c.status&&((t=JSON.parse(e)).ErrorCode="500",e=JSON.stringify(t),T.$hooks.call("xhrEndWithError",a)),(t=r.isJsonString(e))&&(T.$hooks.call("successCallback",l,t,n),s?i(s,t):i(t)),T.$hooks.call("endProcess",a))},c.onerror=function(){T.$hooks.call("xhrEndWithError",a)}}catch(e){}},c.openWindow=function(e){var o,t,n,i;if(e=e||c.href,!T.options.isMobile)return(t=document.createElement("a")).href=e,t=w.getQueryParameterByName("provider",t.search),n="",T.options.noCallbackForSocialLogin&&(e+="&nocallback=true&callbackguid="+(n=T.util.randomString(16))),i=t&&"facebook"===t.toLowerCase()?"650":"450",i=T.options.customizeSocialPopup||"menubar=1,resizable=1,width="+i+",height=450,scrollbars=1",window.open(e,"lrpopupchildwindow",i),T.$hooks.call("socialCalls",t,n),!1;i="no",T.options.debugMode&&(i="yes"),(o=window.open(e,"_blank","location="+i)).addEventListener("loadstop",function(t){var e=function(e){e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t.url);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}("token");null!=e&&""!==e&&(o.close(),html5passToken(e))})},c.addHTMLContent=function(e,t,o,n,i){o=o||!1;var a=c.elementById(e);if(a||n)o||(a.innerHTML=""),n?(n=l[n.toLowerCase()],i=i||LoginRadiusDefaults.idPrefix,i=c.elementById(i+"submit-"+n.toLowerCase().replace(/ /g,"-")),w.insertBefore(t,i)):a.appendChild(t);else{var s=w.elementsByClass(e);if(s&&0<s.length)for(var r=0;r<s.length;r++)o||(s[r].innerHTML=""),s[r].appendChild(t)}},c.addRecaptchaJS=function(t){if(!window.hcaptcha&&T.options.hCaptchaSiteKey){let e="https://js.hcaptcha.com/1/api.js";T.options.invisibleRecaptcha||(e+="?render=explicit",T.options.v2RecaptchaLanguage&&(e+="&hl="+T.options.v2RecaptchaLanguage)),c.addJs(e)}else if(!window.grecaptcha){let e="https://www.google.com/recaptcha/api.js";T.options.v2Recaptcha||t?(e+="?render=explicit",T.options.v2RecaptchaLanguage&&(e+="&hl="+T.options.v2RecaptchaLanguage),c.addJs(e)):T.options.invisibleRecaptcha&&c.addJs(e)}(T.options.tencentCaptcha||T.options.tencentCaptchaAsFallback)&&c.addJs("https://ssl.captcha.qq.com/TCaptcha.js")},c.renderV2Recaptcha=function(t,e,o){var n,i,a=c.elementById(t);(T.options.isCaptchaEnabled||T.options.v2Recaptcha||T.options.invisibleRecaptcha||e||T.options.tencentCaptcha||T.options.tencentCaptchaAsFallback)&&(a&&a.innerHTML&&(window.hcaptcha&&T.options.hCaptchaSiteKey?window.hcaptcha.reset(window[t+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&grecaptcha.reset(window[t+"lr_recaptcha_widgets_idprefix"])),i=setInterval(function(){n||(n=setInterval(function(){var e;window.grecaptcha&&grecaptcha.render||window.hcaptcha?a&&""===a.innerHTML&&(e={sitekey:T.options.hCaptchaSiteKey||T.options.v2RecaptchaSiteKey||"6LeAiwITAAAAADlqb06JIGepBs8ZRo3OZ7C0W7U3",theme:T.options.captchaTheme||"light",callback:function(e){a.style.display="block",o&&o(e)}},T.options.invisibleRecaptcha&&(e.size="invisible",e.callback="onCaptchaSubmit"),window.hcaptcha&&T.options.hCaptchaSiteKey?window[t+"lr_recaptcha_widgets_idprefix"]=window.hcaptcha.render(t,e):window[t+"lr_recaptcha_widgets_idprefix"]=grecaptcha.render(t,e),clearInterval(n)):(t+="_tencent",(e=document.getElementById(t))&&(e.style.display="block"),"undefined"!=typeof TencentCaptcha&&new TencentCaptcha(document.getElementById(t)),clearInterval(n))},1e3),clearInterval(i))},1e3))},c.captchaSchema=function(t,o,n,i){if(T.options.hCaptchaSiteKey&&!c.elementById(t))T.options.invisibleRecaptcha?(a={type:"captcha",name:"h-captcha-response",html:'<div id="'+t+'" class="h-captcha" data-sitekey="'+T.options.hCaptchaSiteKey+'" data-size="invisible" data-callback="onCaptchaSubmit"></div>',display:"Captcha",rules:""},o.push(a)):(a={type:"captcha",name:"h-captcha-response",html:'<div id="'+t+'" class="h-captcha" data-sitekey="'+T.options.hCaptchaSiteKey+'"></div>',display:"Captcha",rules:"required"},o.push(a));else if(!T.options.v2Recaptcha&&!n||c.elementById(t)){if(T.options.invisibleRecaptcha&&!c.elementById(t)){var a=T.options.v2RecaptchaSiteKey||"6LeAiwITAAAAADlqb06JIGepBs8ZRo3OZ7C0W7U3";let e="";var a={type:"captcha",name:"g-recaptcha-response",html:'<div id="'+t+'" style="'+(e="hide"===n?"display:none":e)+'" class="g-recaptcha" data-sitekey="'+a+'" data-size="invisible" data-callback="onCaptchaSubmit"></div>',display:"Captcha",rules:""};o.push(a)}}else o.push({type:"captcha",name:"g-recaptcha-response",html:'<div id="'+t+'" class="recaptcha_widget"></div>',display:"Captcha",rules:"required"});c.elementById(t)||!T.options.tencentCaptcha&&!T.options.tencentCaptchaAsFallback||(window.onTencentCaptchaSubmit=function(e){0==e.ret&&(i?i(e):window.onTencentCaptchaSubmitCallback(e))},a={type:"captcha",name:"TencentCaptcha",html:"<div "+(n?"style=display:none; ":"")+' id= "'+t+'_tencent"  class="TencentCaptcha"  data-appid="'+T.options.tencentCaptchaAppid+'" data-cbfn="onTencentCaptchaSubmit"></div>',display:"Captcha",rules:""},o.push(a))},c.checkPhoneOrEmailLogin=function(e){var t=w.parseQueryString(e);return(t.emailid||t.email)&&(T.options.duplicateEmailWithUniqueUsername&&!t.username?e=e.replace("emailid","username").replace("email","username"):(t=t.emailid||t.email,LoginRadiusDefaults.regexExpression.emailRegex.test(t)?e=e.replace("emailid","email"):T.options.phoneLogin&&LoginRadiusDefaults.regexExpression.phoneRegex.test(t)?(e=e.replace("emailid","phone").replace("email","phone"),e+="&phoneApi=1"):T.options.usernameLogin&&(e=e.replace("emailid","username").replace("email","username")))),e},c.disableResendOTPButton=function(e){var t=T.options.disableResendOTPButtonDelay,o=e.target;o&&(o.disabled=!0,setTimeout(function(){o.disabled=!1},1e3*t))}}function LoginRadiusApiFramework(u,p){var e=this;e.init=function(){u.lrApiFramework=!0},e.login=function(e,t,o){u.getAppConfiguration(function(){p.loginController(u.util.jsonToQueryString(e),null,t,o)})},e.otpLogin=function(e,t,o){u.getAppConfiguration(function(){p.loginOTPController(u.util.jsonToQueryString(e),null,t,o)})},e.twoFALogin=function(e,t,o,n,i,a,s,r){n=n||function(){},s=s||function(){},r=r||function(){},i=i||function(){},a=a||function(){};u.getAppConfiguration(function(){p.login2FAController(u.util.jsonToQueryString(e),null,t,o,"",s,r,n,i,a)})},e.registration=function(e,t,o,n,i,a){i=i||function(){},a=a||function(){};u.getAppConfiguration(function(){p.registrationController(t,null,o,n,"",e,i,a)})},e.forgotPassword=function(e,t,o){u.getAppConfiguration(function(){p.forgotPasswordController(u.util.jsonToQueryString(e),"",t,o)})},e.forgotPIN=function(e,t,o){u.getAppConfiguration(function(){p.forgotPINController(u.util.jsonToQueryString(e),"",t,o)})},e.resetPassword=function(e,t,o){u.getAppConfiguration(function(){p.resetPasswordController(u.util.jsonToQueryString(e),t,o)})},e.resetPIN=function(e,t,o){u.getAppConfiguration(function(){p.resetPINController(u.util.jsonToQueryString(e),t,o)})},e.emailVerification=function(e,t,o){u.getAppConfiguration(function(){p.emailVerificationController(e.vtoken,t,o)})},e.socialLogin=function(e,t,o,n,i,a){u.getAppConfiguration(function(){u.LoginRadiusHostedPage&&u.SSOinitFired||(n=n||function(){},i=i||function(){},p.socialLoginReceiveToken(e.token,a,t,o,null,n,i))})},e.resendEmailVerification=function(e,t,o){u.getAppConfiguration(function(){p.resendEmailVerificationController(u.util.jsonToQueryString(e),t,o)})},e.twoFAResendOTP=function(e,t,o){u.getAppConfiguration(function(){p.resendOTP2FAController(u.util.jsonToQueryString(e),t,o)})},e.twoFAVerifyOTP=function(e,t,o){u.getAppConfiguration(function(){p.verify2FAOTPController(u.util.jsonToQueryString(e),t,o)})},e.twoFAUpdatePhone=function(e,t,o,n,i,a,s){n=n||function(){},i=i||function(){},a=a||function(){},s=s||function(){};u.getAppConfiguration(function(){p.update2FAPhoneNumberController(e,null,t,o,null,n,i,a,s)})},e.updatePhone=function(e,t,o,n,i,a,s){a=a||function(){},s=s||function(){},n=n||function(){},i=i||function(){};u.getAppConfiguration(function(){p.updatePhoneNumberController(u.util.jsonToQueryString(e),null,t,o,null,a,s,n,i)})},e.verifyOTP=function(e,t,o,n){u.getAppConfiguration(function(){p.verifyOTPController(e,t,o,n)})},e.resendOTP=function(e,t,o){u.getAppConfiguration(function(){p.resendOTPController(u.util.jsonToQueryString(e),t,o)})},e.addEmail=function(e,t,o){u.getAppConfiguration(function(){p.addEmailController(u.util.jsonToQueryString(e),t,o)})},e.removeEmail=function(e,t,o){u.getAppConfiguration(function(){p.removeEmailController(u.util.jsonToQueryString(e),t,o)})},e.changeUsername=function(e,t,o){u.getAppConfiguration(function(){p.changeUsernameController(u.util.jsonToQueryString(e),t,o)})},e.changePassword=function(e,t,o){u.getAppConfiguration(function(){p.changePasswordController(u.util.jsonToQueryString(e),t,o)})},e.changePIN=function(e,t,o){u.getAppConfiguration(function(){p.changePINController(u.util.jsonToQueryString(e),t,o)})},e.checkPhoneNumberAvailability=function(e,t,o){u.getAppConfiguration(function(){p.checkPhoneNumberAvailabilityController(u.util.jsonToQueryString(e),t,o)})},e.resetPasswordByPhone=function(e,t,o){u.getAppConfiguration(function(){p.resetPasswordByPhoneController(u.util.jsonToQueryString(e),t,o)})},e.resetPINByPhone=function(e,t,o){u.getAppConfiguration(function(){p.resetPINByPhoneController(u.util.jsonToQueryString(e),t,o)})},e.forgotPasswordbyPhone=function(e,t,o){u.getAppConfiguration(function(){p.forgotPasswordbyPhoneController(u.util.jsonToQueryString(e),null,t,o)})},e.forgotPINbyPhone=function(e,t,o){u.getAppConfiguration(function(){p.forgotPINbyPhoneController(u.util.jsonToQueryString(e),null,t,o)})},e.updateData=function(e,t,o,n,i,a){var s=n,r=i,l={},c=("object"==typeof n&&(l=n,s=i,r=a),{});c.Profile=l,c.access_token=o;u.getAppConfiguration(function(){p.updateData(c,null,t,s,r,"",e)})},e.checkEmailAvailability=function(e,t,o){u.getAppConfiguration(function(){p.checkEmailAvailabilityController(u.util.jsonToQueryString(e),t,o)})},e.checkUserNameAvailability=function(e,t,o){u.getAppConfiguration(function(){p.checkUserNameAvailabilityController(u.util.jsonToQueryString(e),t,o)})},e.resetPasswordBySecurityQuestion=function(e,t,o){u.getAppConfiguration(function(){p.resetPasswordBySecurityQuestionController(u.util.jsonToQueryString(e),t,o)})},e.resetPINBySecurityQuestion=function(e,t,o){u.getAppConfiguration(function(){p.resetPINBySecurityQuestionController(u.util.jsonToQueryString(e),t,o)})},e.updateSecurityQuestion=function(e,t,o){u.getAppConfiguration(function(){p.updateSecurityQuestionController(u.util.jsonToQueryString(e),t,o)})},e.resetTwoFactor=function(e,t,o){u.getAppConfiguration(function(){p.resetTwoFactorAuthenticationController(e,t,o)})},e.invalidateToken=function(e,t,o){u.getAppConfiguration(function(){p.invalidateToken(e,t,o)})},e.validateToken=function(e,t,o){u.getAppConfiguration(function(){p.validateToken(e,t,o)})},e.getSocialData=function(e,t,o,n,i){u.getAppConfiguration(function(){p.getSocialDataController(e,t,o,n,i)})},e.postSocialData=function(e,t,o,n,i,a){u.getAppConfiguration(function(){p.postSocialDataController(e,t,o,n,i,a)})},e.getCustomObjects=function(e,t,o){u.getAppConfiguration(function(){p.getCustomObjectsController(e,t,o)})},e.createCustomObject=function(e,t,o,n){u.getAppConfiguration(function(){p.createCustomObjectController(e,t,o,n)})},e.getCustomObjectById=function(e,t,o,n){u.getAppConfiguration(function(){p.getCustomObjectByIdController(e,t,o,n)})},e.deleteCustomObjectById=function(e,t,o,n){u.getAppConfiguration(function(){p.deleteCustomObjectController(e,t,o,n)})},e.updateCustomObjectById=function(e,t,o,n,i,a){u.getAppConfiguration(function(){p.updateCustomObjectController(e,t,o,a,n,i)})},e.getBackupCode=function(e,t,o){u.getAppConfiguration(function(){p.getBackupCodeController(e,t,o)})},e.resetBackupCode=function(e,t,o){u.getAppConfiguration(function(){p.resetBackupCodeController(e,t,o)})},e.autoLogin=e.smartLogin=function(e,t,o){u.getAppConfiguration(function(){p.smartLoginController(u.util.jsonToQueryString(e),t,o)})},e.verifyConsent=function(e,t,o){u.getAppConfiguration(function(){p.verifyConsentController(e,t,o)})},e.fetchConsentLogs=function(e,t){u.getAppConfiguration(function(){p.consentLogsController(e,t)})},e.updateConsents=function(e,t,o){u.getAppConfiguration(function(){p.updateConsentController(e,t,o)})},e.submitConsentbyConsentToken=function(e,t,o){var n=e.consentToken||"";n?u.getAppConfiguration(function(){p.submitConsentController(n,e,t,o)}):(o({response:"consentToken is required parameter"}),u.log("consentToken is required parameter"))},e.submitConsentbyAccesToken=function(e,t,o){u.getAppConfiguration(function(){p.customEventConsentController(e,t,o)})},e.oneTouchLogin=function(e,t,o,n,i){u.getAppConfiguration(function(){n=n||function(){},i=i||function(){},p.oneTouchLoginController(e,null,t,o,"",!0,n,i)})},e.oneTouchLoginVerify=function(e,t,o){u.getAppConfiguration(function(){e.verificationtoken&&e.email?p.oneTouchLoginEmailVerification(e.verificationtoken,t,o,e.email):e.verificationtoken?p.oneTouchLoginEmailVerification(e.verificationtoken,t,o):e.otp&&e.phone&&p.verifyOTPController({otp:e.otp,onetouchloginflag:!0},{phone:e.phone},t,o)})}}function setLoginRadiusDefaultSchema(e){e.organizationFormSchema=[{type:"string",name:"organizationname",display:"Organization Name",rules:"required",permission:"r"}],e.lookupFormSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required|valid_email",permission:"r"}],e.loginFormSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required|valid_email",permission:"r"},{type:"password",name:"password",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"}],e.backupCodeFormSchema=[{type:"string",name:"backupcode",display:"Backup Code",rules:"required",permission:"r"}],e.resetPasswordByPhoneSchema=[{type:"string",name:"otp",display:"Verification Code",rules:"required",permission:"r"},{type:"password",name:"password",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"}],e.resetPINByPhoneSchema=[{type:"string",name:"otp",display:"Verification Code",rules:"required",permission:"r"},{type:"password",name:"pin",display:"PIN",rules:"required|min_length[4]|max_length[32]",permission:"w"}],e.checkPhoneNumberSchema=[{type:"string",name:"phone",display:"Phone Number",rules:"required|valid_phoneno",permission:"r"}],e.QRCodeSchema=[{type:"string",name:"googleAuthenticatorCode",display:"Authenticator Code",rules:"required",permission:"r"}],e.getSecQSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required|valid_email",permission:"r"}],e.otpSchema=[{type:"string",name:"otp",display:"Verification Code",rules:"required",permission:"r"}],e.forgotPasswordFormSchema=[{type:"string",name:"emailid",display:"Email",rules:"required",permission:"r"}],e.forgotPINFormSchema=[{type:"string",name:"emailid",display:"Email",rules:"required",permission:"r"}],e.smartLoginSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required",permission:"r"}],e.passwordLessLoginSchema=[{type:"string",name:"emailid",display:"Email",rules:"required",permission:"r"},{type:"string",name:"name",display:"Name",rules:"",permission:"r"}],e.changePasswordFormSchema=[{type:"password",name:"oldpassword",display:"Old Password",rules:"required",permission:"w"},{type:"password",name:"newpassword",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"},{type:"password",name:"confirmnewpassword",display:"Confirm Password",rules:"required|min_length[6]|max_length[32]|matches[newpassword]",permission:"w"}],e.emailSchema=e.forgotPasswordFormSchema,e.addEmailSchema=[{type:"string",name:"emailid",display:"Email",rules:"required|valid_email",permission:"r"},{type:"string",name:"type",display:"Type",rules:"required",permission:"r"}],e.changeUsernameFormSchema=[{type:"string",name:"username",display:"Username",rules:"required",permission:"r"}],e.changePINFormSchema=[{type:"password",name:"oldpin",display:"Old PIN",rules:"required",permission:"w"},{type:"password",name:"newpin",display:"PIN",rules:"required",permission:"w"},{type:"password",name:"confirmnewpin",display:"Confirm PIN",rules:"required|matches[newpin]",permission:"w"}],e.resetPasswordFormSchema=[{type:"password",name:"password",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"},{type:"password",name:"confirmpassword",display:"Confirm Password",rules:"required|matches[password]|min_length[6]|max_length[32]",permission:"w"},{type:"hidden",name:"resettoken",display:"",rules:"required",permission:"w",value:""}],e.resetPINFormSchema=[{type:"password",name:"pin",display:"PIN",rules:"required|min_length[4]|max_length[32]",permission:"w"},{type:"password",name:"confirmpin",display:"Confirm PIN",rules:"required|matches[pin]|min_length[4]|max_length[32]",permission:"w"},{type:"hidden",name:"resettoken",display:"",rules:"required",permission:"w",value:""}],e.pinLoginFormSchema=[{type:"password",name:"pin",display:"PIN",rules:"required",permission:"r"}],e.privacyPolicySchema=[{type:"multi",name:"acceptprivacypolicy",display:"I agree to the terms of service",rules:"",permission:"r"}],e.btnOTPSchema={type:"button",name:"click",display:"click",rules:"",permission:"r",event:"click",eventCallback:function(){}},e.defaultBtnSchema={type:"button",name:"default",display:"default",rules:"",permission:"r",event:"click",eventCallback:function(){}}}function setLoginRadiusModuleFunctions(l,c){var u=LoginRadiusDefaults.options,p=new SetLoginRadiusCommonFunctions(l),e=new LoginRadiusControllers(l,p),d=l.util;l.version="3.23.0",l.LRCheckRegistration=!1,l.passwordlessLoginFlag=!1,l.socialLoginFlag=!1,l.LRCheckLogin=!1,l.LRCheck2FA=!1,l.loginAction=!1,l.options={},l.consentOptions="",l.lookupOptions="",l.sessionData={getUid:function(){return l.storage.getBrowserStorage(LoginRadiusDefaults.storedUidName)},getToken:function(){return l.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName)}},l.errorMessages=[],l.validationMessages=[],l.formCustomLabel={},l.formElementsTitle={},l.defaultOptionField={},l.formValidations={},l.formPlaceholder={},l.formElementAttributes={},l.buttonElements={},l.passwordMeterConfiguration=[],l.buttonsName={},l.eventsName={},l.log=function(e){l.options.debugMode&&"undefined"!=typeof console&&console.error(e)},l.customInterface=function(e,t){var o=t.templateName||"";a(function(){p.renderCustomInterface(e,"",o)})},l.clearSession=function(){l.storage.removeBrowserStorage(LoginRadiusDefaults.storedTokenName),l.storage.removeBrowserStorage(LoginRadiusDefaults.storedUidName),l.storage.removeBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),l.storage.removeBrowserStorage(LoginRadiusDefaults.storedOrganization)},l.setSessionToken=function(e){e={session_token:e.session_token,session_expires_in:e.session_expires_in};l.storage.setBrowserStorage(LoginRadiusDefaults.storedSessionTokenData,JSON.stringify(e))},l.getSessionToken=function(){var e=JSON.parse(l.storage.getBrowserStorage(LoginRadiusDefaults.storedSessionTokenData));return e&&e.session_expires_in&&new Date<new Date(e.session_expires_in)?e.session_token:(l.removeSessionToken(),!1)},l.removeSessionToken=function(){l.storage.removeBrowserStorage(LoginRadiusDefaults.storedSessionTokenData)},l.documentCookies=Object.assign({},LRNameSpace.cookies);var m=[];function a(e){l.options=d.mergeOptions(l.options,c),l.options.apiCustomDomain&&(i=LoginRadiusDefaults.apiDomain,LoginRadiusDefaults.apiDomain=i.replace(/https:.*\/identity/,"https://"+l.options.apiCustomDomain+"/identity"),i=LoginRadiusDefaults.socialApiDomain,LoginRadiusDefaults.socialApiDomain=i.replace(/https:.*\/api/,"https://"+l.options.apiCustomDomain+"/api")),l.options.cloudApiCustomDomain&&(i=LoginRadiusDefaults.cloudApiDomain,LoginRadiusDefaults.cloudApiDomain=i.replace(/https:.*\.com/,"https://"+l.options.cloudApiCustomDomain));var t,o,n,i=!l.options.isB2BEnabled||!l.options.promptOrganization||l.options.organization;l.isApiCallingStarted||i?!l.isApiCallingStarted&&i?(l.isApiCallingStarted=!0,m.push(e),i=l.storage.getBrowserStorage(LoginRadiusDefaults.storedOrganization),t=l.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),l.LoginRadiusHostedPage&&(t=l.storage.getBrowserStorage("lr-session-token")),o=LoginRadiusDefaults.configApiDomain+"appInfo?apikey="+c.apiKey,l.options.isB2BEnabled&&(l.options.organization?o+="&org_name="+l.options.organization:i&&t&&(o+="&org_name="+i)),t&&(o+="&autolookupproviders=true"),d.ajaxCall("get",o,"",function(o){function n(e){var t,o,n,i,a,s;e.ErrorCode?l.isApiCallingStarted=!1:(l.storage.removeBrowserStorage(LoginRadiusDefaults.storedOrganization),e.Organization&&e.Organization.Name&&l.storage.setBrowserStorage(LoginRadiusDefaults.storedOrganization,e.Organization.Name),t=e,a={},c.organizationObj=t.Organization,c.securityQuestionEnabled=t.IsSecurityQuestion,c.appName=c.appName||t.AppName,c.RegistrationFormSchema=t.RegistrationFormSchema,c.loginLockedType=t.LoginLockedConfiguration&&t.LoginLockedConfiguration.LoginLockedType,c.securityQuestionEnabled&&(c.SecurityQuestions=t.SecurityQuestions.Questions,c.securityQuestionsCount=void 0===c.securityQuestionsCount?t.SecurityQuestions.SecurityQuestionCount:c.securityQuestionsCount),void 0===c.passwordLength&&c.displayPasswordStrength&&c.RegistrationFormSchema&&(o=d.findInSchema(c.RegistrationFormSchema,"name","password").rules.split("|"),s=(s=d.isSubstring("min_length[",Object.keys(o).map(function(e){return o[e]})))?o[s].substring(o[s].lastIndexOf("min_length[")+11,o[s].lastIndexOf("]")):"",n=(n=d.isSubstring("max_length[",Object.keys(o).map(function(e){return o[e]})))?o[n].substring(o[n].lastIndexOf("max_length[")+11,o[n].lastIndexOf("]")):"",i={},s&&(i.min=parseInt(s)),n&&(i.max=parseInt(n)),c.passwordLength=i),c.SocialSchema=t.SocialSchema,c.maskSensitiveInput=c.encryptedAnswer||c.maskSensitiveInput,c.noCallbackForSocialLogin=void 0!==c.noCallback?c.noCallback:c.noCallbackForSocialLogin,t.TwoFactorAuthentication&&t.TwoFactorAuthentication.IsEnabled&&(a.optionalTwoFactorAuthentication=!0,a.twoFactorAuthentication=!1,a.googleAuthentication=t.TwoFactorAuthentication.IsGoogleAuthenticator,a.emailOTPAuthentication=t.TwoFactorAuthentication.IsEmailOTPAuthenticator,a.securityQuestionAuthentication=t.TwoFactorAuthentication.IsSecurityQuestionAuthenticator,a.smsOTPAuthentication=t.TwoFactorAuthentication.IsSmsOTPAuthenticator,t.TwoFactorAuthentication.IsRequired)&&(a.optionalTwoFactorAuthentication=!1,a.twoFactorAuthentication=!0),c.optionalTwoFactorAuthentication=(void 0===c.optionalTwoFactorAuthentication?a:c).optionalTwoFactorAuthentication,c.twoFactorAuthentication=(void 0===c.twoFactorAuthentication?a:c).twoFactorAuthentication,c.googleAuthentication=(void 0===c.googleAuthentication?a:c).googleAuthentication,c.phoneLogin=void 0===c.phoneLogin?t.IsPhoneLogin:c.phoneLogin,c.passwordlessLoginOTP=void 0===c.instantOTPLogin&&void 0===c.passwordlessLoginOTP?t.IsInstantSignin.SmsOtp:c.instantOTPLogin||c.passwordlessLoginOTP,"optional"===t.EmailVerificationFlow?a.optionalEmailVerification=!0:"disabled"===t.EmailVerificationFlow&&(a.disabledEmailVerification=!0),c.optionalEmailVerification=(void 0===c.optionalEmailVerification?a:c).optionalEmailVerification,c.disabledEmailVerification=(void 0===c.disabledEmailVerification?a:c).disabledEmailVerification,c.loginOnEmailVerification=void 0===c.loginOnEmailVerification?t.IsLoginOnEmailVerification:c.loginOnEmailVerification,c.passwordlessLogin=void 0===c.instantLinkLogin&&void 0===c.passwordlessLogin?t.IsInstantSignin.EmailLink:c.instantLinkLogin||c.passwordlessLogin,c.askRequiredFieldForTraditionalLogin=void 0===c.askRequiredFieldForTraditionalLogin?t.AskRequiredFieldsOnTraditionalLogin:c.askRequiredFieldForTraditionalLogin,c.stayLogin=void 0===c.stayLogin?t.IsRememberMe:c.stayLogin,c.disableSignup=void 0===c.disableSignup?t.IsDisabledRegistration:c.disableSignup,c.riskBasedAuthentication=void 0===c.riskBasedAuthentication?t.IsRiskBasedAuthentication:c.riskBasedAuthentication,c.noCallbackForSocialLogin=void 0===c.noCallbackForSocialLogin?t.IsNoCallbackForSocialLogin:c.noCallbackForSocialLogin,c.usernameLogin=void 0===c.usernameLogin?t.IsUserNameLogin:c.usernameLogin,c.promptPasswordOnSocialLogin=void 0===c.promptPasswordOnSocialLogin?t.AskPasswordOnSocialLogin:c.promptPasswordOnSocialLogin,c.askOptionalFieldsOnRegistration=void 0===c.askOptionalFieldsOnRegistration?t.AskOptionalFieldsOnSocialSignup:c.askOptionalFieldsOnRegistration,c.askEmailForUnverifiedProfileAlways=void 0===c.askEmailForUnverifiedProfileAlways?t.AskEmailIdForUnverifiedUserLogin:c.askEmailForUnverifiedProfileAlways,c.logoutOnVerifyEmail=void 0===c.logoutOnVerifyEmail?t.IsLogoutOnEmailVerification:c.logoutOnVerifyEmail,c.disableAccountLinking=t.IsDisabledAccountLinking,c.duplicateEmailWithUniqueUsername=t.DuplicateEmailWithUniqueUsername,c.customDomain=c.customDomain||t.CustomDomain,c.privacyPolicyConfiguration=t.PrivacyPolicyConfiguration,c.isConsentManagementEnabled=(void 0===c.IsConsentManagementEnabled?t:c).IsConsentManagementEnabled,c.loginOnPasswordReset=t.LoginOnPasswordReset,c.optionalRecaptchaConfiguration=t.OptionalRecaptchaConfiguration,c.isVoiceOtp=t.IsVoiceOTP,(c.v2Recaptcha||t.IsV2Recaptcha)&&(c.invisibleRecaptcha=!1,c.v2Recaptcha=!0),(c.invisibleRecaptcha||t.IsInvisibleRecaptcha)&&(c.invisibleRecaptcha=!0,c.v2Recaptcha=!1),c.isCaptchaEnabled=c.v2Recaptcha||c.invisibleRecaptcha,c.v2RecaptchaSiteKey=c.v2RecaptchaSiteKey||t.V2RecaptchaSiteKey,c.tencentCaptchaAppid=c.tencentCaptchaAppid||t.QQTencentCaptchaKey,(s=t.CaptchaConfig)&&s.IsEnabled&&(c.isCaptchaEnabled=!0,s.GoogleRecaptchaV2&&(c.v2RecaptchaSiteKey=s.GoogleRecaptchaV2.PublicKey,c.v2Recaptcha=void 0===c.v2Recaptcha?!s.GoogleRecaptchaV2.IsInvisibleCaptcha:c.v2Recaptcha,c.invisibleRecaptcha=void 0===c.invisibleRecaptcha?s.GoogleRecaptchaV2.IsInvisibleCaptcha:c.invisibleRecaptcha),s.QQTencentCaptcha&&(c.tencentCaptchaAppid=s.QQTencentCaptcha.PublicKey,c.tencentCaptcha=void 0===c.tencentCaptcha||c.tencentCaptcha),s.GoogleRecaptchaV3&&(c.v2RecaptchaSiteKey=s.GoogleRecaptchaV3.PublicKey,c.invisibleRecaptcha=!0,c.v2Recaptcha=!1),s.HCaptcha)&&(c.hCaptchaSiteKey=c.hCaptchaSiteKey||s.HCaptcha.PublicKey,c.captchaTheme=c.captchaTheme||s.HCaptcha.IsDarkTheme?"dark":"light",c.invisibleRecaptcha=s.HCaptcha.IsInvisibleCaptcha),a.isPINAuthentication=!1,t.PINAuthentication&&t.PINAuthentication.IsEnabled&&(a.isPINAuthentication=!0,a.PINConfiguration=Object.assign({},t.PINAuthentication.Configuration),c.PINConfiguration?c.PINConfiguration=Object.assign({},a.PINConfiguration,c.PINConfiguration):c.PINConfiguration=Object.assign({},a.PINConfiguration)),c.isPINAuthentication=a.isPINAuthentication,c.isPINAuthentication&&(l.pinSchema=[],n=d.findInSchema(c.RegistrationFormSchema,"name","pin"),d.isEmpty(n)?l.log("Pin schema is not defined"):(l.pinSchema.push(n),!c.PINConfiguration.IsRequired||l.pinSchema[0].rules&&-1!==l.pinSchema[0].rules.indexOf("required")||(l.pinSchema[0].rules=l.pinSchema[0].rules?[l.pinSchema[0].rules,"required"].join("|"):"required"),i=d.findInSchema(c.RegistrationFormSchema,"name","confirmpin"),d.isEmpty(i)||l.pinSchema.push(i))),c.isConsentManagementEnabled&&p.setConsentTemplate(),c.emailOTPAuthentication=a.emailOTPAuthentication,c.smsOTPAuthentication=a.smsOTPAuthentication,c.securityQuestionAuthentication=a.securityQuestionAuthentication,c.templateVerificationTypes=t.TemplateVerificationTypes,c=d.mergeOptions(u,c)),l.options=c,l.appConfigInfoCalled=!0;for(var r=0;r<m.length;r++)"function"==typeof m[r]&&m[r](e)}var e,t;o.IsAutoLookUpEnabled&&l.currentActionOptions&&l.currentActionOptions.login.container?(n(o),e=l.currentActionOptions.login.container,t=function(e){l.getAutoLookupDomainConfiguration(e.email,function(){var e,t;l.lookupOptions&&l.lookupOptions.Provider&&l.lookupOptions.Provider.Endpoint?(e=p.addSocialEndpointOptions(),t=l.util.getThisObjectName(),window[t].util.openWindow(decodeURIComponent(l.lookupOptions.Provider.Endpoint+e)),l.isLookupApiCallingStarted=!1,l.lookupOptions=""):n(o)})},p.createForm(l.lookupFormSchema,"lookupdomain",e,function(e){var i=l.util.parseQueryString(e);l.$hooks.register("afterFormRender",function(e,t,o,n){"login"===e&&(n.elements[0].value=i.email)}),t(i)})):n(o)},"registrationSchema")):l.isApiCallingStarted&&(l.appConfigInfoCalled?e():"logout"===l.useraction?(l.isApiCallingStarted=!1,a(e)):m.push(e)):(l.isApiCallingStarted=!1,m.push(e),"organization"===l.useraction&&(i=l.currentActionOptions[l.useraction].container,n=function(){a(function(e){var t;e.ErrorCode?(l.isApiCallingStarted=!1,l.currentActionOptions[l.useraction].onError(e)):((t=document.getElementsByName("loginradius-organization")[0])&&t.remove(),l.currentActionOptions[l.useraction].onSuccess(e))})},l.currentActionOptions[l.useraction].classPrefix,p.createForm(l.organizationFormSchema,"organization",i,function(e){e=l.util.parseQueryString(e);l.options.organization=e.organizationname,n()})))}var g=[],o=(l.getConsentConfiguration=function(e){l.isConsentApiCallingStarted||""!==l.consentOptions?l.isConsentApiCallingStarted&&(""!==l.consentOptions?e(l.consentOptions):g.push(e)):(l.isConsentApiCallingStarted=!0,g.push(e),d.ajaxCall("get",LoginRadiusDefaults.configApiDomain+"consent?apiKey="+l.options.apiKey,"",function(e){if(e){l.consentOptions={},l.consentsList={};for(var t="",o=0;o<e.length;o++){for(var n=0;n<e[o].Events.length;n++)t=e[o].Events[n].Name,"true"===e[o].Events[n].IsCustom&&(t="custom_"+t),l.consentOptions[t]={},l.consentOptions[t].ConsentForm=e[o].ConsentForm,l.consentOptions[t].TermOfService=e[o].TermOfService,l.consentOptions[t].PrivacyPolicy=e[o].PrivacyPolicy;for(var i=0;i<e[o].ConsentForm.length;i++)for(var a=e[o].ConsentForm[i],s=0;s<a.Consents.length;s++)l.consentsList[a.Consents[s].ConsentId]||(l.consentsList[a.Consents[s].ConsentId]=a.Consents[s])}for(var r=0;r<g.length;r++)g[r](l.consentOptions)}else l.isConsentApiCallingStarted=!1}))},[]);l.getAutoLookupDomainConfiguration=function(e,t){l.isLookupApiCallingStarted||""!==l.lookupOptions?l.isLookupApiCallingStarted&&(""!==l.lookupOptions?t(l.lookupOptions):o.push(t)):(l.isLookupApiCallingStarted=!0,o.push(t),d.ajaxCall("get",LoginRadiusDefaults.configApiDomain+"lookup?apiKey="+l.options.apiKey+"&email="+e,"",function(e){e?(l.lookupOptions=e,o[0](l.lookupOptions)):l.isLookupApiCallingStarted=!1}))},l.getAppConfiguration=a,l.progressiveProfiling=new LRNameSpace.ProgressiveProfiling(l,p,e,LoginRadiusDefaults),l.progressiveProfiling.init=function(){a(function(){l.progressiveProfiling.fetchSchema(function(e){l.progressiveProfilingSchema=e,l.$hooks.register("registrationSchemaFilter",function(e,t){l.options.progressiveProfilingTraditional&&(l.LoggedinSocialProvderProfile=t)})},"progressiveProfilingSchema")})}}function LoginRadiusHooksModel(w){var S=w.util,o=LoginRadiusDefaults.messages;w.$hooks={hooks:[],register:function(e,t,o){void 0===w.$hooks.hooks[e]&&(w.$hooks.hooks[e]=[]),parseInt(o,10)===o&&w.$hooks.hooks[e].length>o+1?w.$hooks.hooks[e].splice(o,0,t):w.$hooks.hooks[e].push(t)},call:function(e){var t=Array.prototype.splice.call(arguments,1);if(void 0!==w.$hooks.hooks[e])for(var o=0,n=w.$hooks.hooks[e].length;o<n;++o)w.$hooks.hooks[e]&&w.$hooks.hooks[e][o]&&w.$hooks.hooks[e][o].apply(null,t)}},w.$hooks.register("addEventOnElement",function(e){S.extend(w.eventsName,e)}),w.$hooks.register("mapErrorMessages",function(e){if(e.code&&e.message)w.errorMessages.push(e);else if(S.isArray(e))for(var t=0;t<e.length;t++)e[t].code&&e[t].message?w.errorMessages.push(e[t]):w.log(o.notValidMessage);else w.log(o.notValidMessage)}),w.$hooks.register("passwordMeterConfiguration",function(e){S.isArray(e)?S.extend(w.passwordMeterConfiguration,e):w.log(o.passwordStrengthMessage)}),w.$hooks.register("setButtonsName",function(e){for(var t,o=Object.keys(e),n=o.length,i={};n--;)i[(t=o[n]).toLowerCase()]=e[t];S.extend(w.buttonsName,i)}),w.$hooks.register("mapValidationMessages",function(e){if(e.rule&&e.message)w.validationMessages.push(e);else if(S.isArray(e))for(var t=0;t<e.length;t++)e[t].rule&&e[t].message?w.validationMessages.push(e[t]):w.log(o.notValidMessage);else w.log(o.notValidMessage)}),w.$hooks.register("customizeFormLabel",function(e){S.extend(w.formCustomLabel,e)}),w.$hooks.register("customizeElementTitle",function(e){S.extend(w.formElementsTitle,e)}),w.$hooks.register("defaultChoiceOption",function(e){S.extend(w.defaultOptionField,e)}),w.$hooks.register("customizeFormPlaceholder",function(e){S.extend(w.formPlaceholder,e)}),w.$hooks.register("formValidationRules",function(e){S.extend(w.formValidations,e)}),w.$hooks.register("formAttributes",function(e){S.extend(w.formElementAttributes,e)}),w.$hooks.register("buttonAttributes",function(e){S.extend(w.buttonElements,e)}),w.$hooks.register("addFormCaptcha",function(i,a,s,r){w.getAppConfiguration(function(){s&&(w.options[s]=!0);var e,t,o=r||i+"recaptcha_widget",n=(S.addRecaptchaJS(),[]);w.util.elementById(o)||(S.captchaSchema(o,n,!1,a),(e=document.createElement("div")).setAttribute("name",n[0].name),w.options.invisibleRecaptcha&&a&&(t=a.toString(),t=/function ([^\(]*)/.exec(t)[1],n[0].html=n[0].html.replace("onCaptchaSubmit",t)),e.innerHTML=n[0].html,S.addHTMLContent(i,e,!0)),S.renderV2Recaptcha(o,!1,a)})}),w.$hooks.register("addFormCaptchaExecute",function(e,t,o){var n,i=t?e:e+"recaptcha_widget",t=S.elementById(i+"_tencent");w.options.invisibleRecaptcha?n=setInterval(function(){if(void 0!==window.hcaptcha&&w.options.hCaptchaSiteKey){try{window.hcaptcha.execute(window[i])}catch(e){}clearInterval(n)}else if("undefined"!=typeof grecaptcha){try{grecaptcha.execute(window[i])}catch(e){}clearInterval(n)}},1e3):t&&"none"!==t.style.display&&(w.options.tencentCaptcha||w.options.tencentCaptchaAsFallback&&!window.grecaptcha)?t.click():w.options.isCaptchaEnabled&&(e={error:LoginRadiusDefaults.messages.captchaError},w.options.hCaptchaSiteKey&&(t=document.querySelector("textarea[name*='h-captcha-response']"))&&(t.value?o({success:t.value}):o(e)),w.options.v2RecaptchaSiteKey)&&(t=document.querySelector("textarea[name*='g-recaptcha-response']"))&&(t.value?o({success:t.value}):o(e))}),w.$hooks.register("successCallback",function(i,a,e){var t,o,n,s,r,l,c,u,p,d,m,g,f,h,y,C,v,T="";i&&(w.$hooks.register("setCurrentAction",function(){w.storage.setBrowserStorage("LRSetSafariToken",i)}),T="verifyotp"===i.toLowerCase()?"otp":i.toLowerCase()),"1132"==a.ErrorCode?(w.LRCheckLogin||!w.LRCheck2FA||w.LRCheck2FA&&"twofaotp"===i)&&(w.options.v2Recaptcha||w.options.invisibleRecaptcha||w.options.tencentCaptcha||w.options.tencentCaptchaAsFallback||(w.options.v2Recaptcha=!0),"verifyemail"===T&&(S.elementById("loginradius-submit-verify").style.display="block"),C=w.LRPrefix.replace("##","")+"recaptcha_widget_"+T,C=C,(v=w.util.elementById(C,!0))&&(v.style.display="block"),window.grecaptcha&&v&&""!==v.innerHTML?grecaptcha.reset(window[C+"lr_recaptcha_widgets_idprefix"]):w.util.renderV2Recaptcha(C,!1)):"1148"==a.ErrorCode||"1165"==a.ErrorCode?(v=S.parseString(e))&&!v.hasOwnProperty("securityanswer")&&(C=e,h=T,w.options.securityQuestionEnabled)&&(y=S.jsonToQueryString(JSON.parse(C)),new LoginRadiusControllers(w).getSecurityQuestionsController(y,function(i){if(0<i.length)for(var e=0;e<i.length;e++)-1!==y.indexOf(i[e].name)&&i.splice(e,1);var t,o,n;0<i.length&&(t=document.createElement("div"),o=[],n=w.LRPrefix.split("##"),new SetLoginRadiusCommonFunctions(w).createFormFields(i,t,h,o,n[0],n[1]),new FormValidator(n[1]+h,o,function(e){w.mergeFormErrors={},w.mergeFormErrors=e}),w.$hooks.register("startProcess",function(e,t){for(var o={},n=0;n<i.length;n++)t&&t[i[n].name]&&(o[i[n].name]=t[i[n].name],delete t[i[n].name]);t&&(t.securityanswer=o)}),w.util.addHTMLContent("",t,!0,h,n[0]))})):"1194"==a.ErrorCode?(t=a,e=i,o="",(T=w.privacyPolicySchema.slice())[0].rules="Strict"===w.options.privacyPolicyConfiguration.Mode?"required":"",n=new SetLoginRadiusCommonFunctions(w),s=new LoginRadiusControllers(w,n),w.$hooks.call("getCurrentActionOptions",e),r=function(){},l=function(){},c="",w.currentActionOptions[e]&&(r=w.currentActionOptions[e].onSuccess||r,l=w.currentActionOptions[e].onError||l,c=w.currentActionOptions[e].classPrefix||c),"socialLogin"===e?(o=w.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),w.$hooks.call("socialLoginFormRender")):o=t.Data.access_token||(t.Data&&t.Data.Data?t.Data.Data.access_token:""),n.createForm(T,"privacyPolicyUpdate",w.currentLRContainer,function(e){s.updatePrivacyPolicy(o,t,r,l,null,w.currentLRContainer,c)},function(e){l(n.setMappedMessage(e))})):"1243"==a.ErrorCode?(e=a,T=i,w.pinSchema&&w.pinSchema.length?(u=e.Data.PINAuthToken,(p=new SetLoginRadiusCommonFunctions(w)).setPINRule(S.findInSchema(w.pinSchema,"name","confirmpin")),d=new LoginRadiusControllers(w,p),w.$hooks.call("getCurrentActionOptions",T),m=function(){},g=function(){},f="",w.currentActionOptions[T]&&(m=w.currentActionOptions[T].onSuccess||m,g=w.currentActionOptions[T].onError||g,f=w.currentActionOptions[T].classPrefix||f),p.createForm(w.pinSchema,"pinSetup",w.currentLRContainer,function(e){d.configurePINController(u,e,m,g,w.currentLRContainer,f)},function(e){g(p.setMappedMessage(e))})):w.log("Pin Schema is not defined in the schema")):1226===a.ErrorCode&&a.Data&&a.Data.ConsentToken&&!w.lrApiFramework&&w.getConsentConfiguration(function(e){var o,t=a,l=i,c=t.Data.ConsentToken;t.Data.ConsentProfile&&t.Data.ConsentProfile.Consents&&t.Data.ConsentProfile.Consents.Options&&(o=t.Data.ConsentProfile.Consents.Options);for(var u=new SetLoginRadiusCommonFunctions(w),p=new LoginRadiusControllers(w,u),d="",m=[],g=[],n=0;n<t.Data.Events.length;n++)m.push(t.Data.Events[n].Name);w.$hooks.call("getCurrentActionOptions",l);var f=function(){},h=function(){},y="",C="";function v(s,r){var e=[],t=u.createConsentInterface(s[r],o);""!==t&&(e.push({html:t,type:"html",name:"consent"}),u.createForm(e,"consentlogin",C,function(e){var t=u.consentValidation(e,r);if(0<t.length)h(u.setMappedMessage(t));else if(d=d?d+"&"+e:e,g.push({Event:r,IsCustom:!1}),m.splice(0,1),0<m.length)v(s,m[0]);else{var o,n=w.util.parseQueryString(d),i=[];for(o in n){var a=o.replace("consent_","");i.push({ConsentOptionId:a,IsAccepted:n[o]})}n={},0<i.length&&(n.Events=g,n.Data=i),p.submitConsentController(c,n,f,h,C,y,l)}},function(e){h(u.setMappedMessage(e))}))}w.currentActionOptions[l]&&(f=w.currentActionOptions[l].onSuccess||f,h=w.currentActionOptions[l].onError||h,y=w.currentActionOptions[l].classPrefix||y,C=w.currentActionOptions[l].container||""),C=C||w.currentLRContainer,"socialLogin"===l&&w.$hooks.call("socialLoginFormRender"),v(e,m[0])})}),w.$hooks.register("afterFormRender",function(e,t,o,n){var i=w.options.RegistrationFormSchema,a=[];if("registration"===e){for(var s,r,l={},c=0;c<i.length;c++)i[c]&&i[c].DataSource&&null!==i[c].DataSource&&(l[i[c].DataSource]=i[c],l[i[c].DataSource].children=[]);for(r in l)l.hasOwnProperty(r)&&((s=l[r]).ParentDataSource&&null!=s.ParentDataSource?l[s.ParentDataSource].children:a).push(s);if(0<a.length)for(var u=t,p=a,d=o,m=[],g=new SetLoginRadiusCommonFunctions(w),f=0;f<p.length;f++)p[f].ParentDataSource||S.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/"+p[f].DataSource+"?apiKey="+w.options.apiKey,"",function(e,t){if(m[e.DataSource]=t,m[e.DataSource])for(var o=0;o<m[e.DataSource].length;o++){var n=document.createElement("option"),i=(n.setAttribute("value",m[e.DataSource][o].Id),n.appendChild(document.createTextNode(m[e.DataSource][o].Key)),document.getElementById(d+"registration-"+e.name));i&&i.appendChild(n)}if(e&&e.children&&0<e.children.length)for(var a=0;a<e.children.length;a++)g.addChangeEventHandler(u,e,e.children[a],d)},"registration",p[f])}if("validatecode"===e)for(var h=e,y=i,C=o,v=0;v<y.length;v++)y[v].DataSource&&w.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/"+y[v].DataSource+"?apiKey="+w.options.apiKey,"",function(e,t){for(var o=0;o<t.length;o++){var n=document.createElement("option");n.setAttribute("value",t[o].Id),n.appendChild(document.createTextNode(t[o].Key)),document.getElementById(C+h+"-"+e.name).appendChild(n)}},"registration",y[v])}),w.$hooks.register("setLocaleBasedInfo",function(e){for(var t in e)if(e.hasOwnProperty(t))switch(t){case"labels":S.extend(w.formCustomLabel,e[t]);break;case"placeholders":S.extend(w.formPlaceholder,e[t]);break;case"validationMessages":w.$hooks.call("mapValidationMessages",e[t]);break;case"errorMessages":w.$hooks.call("mapErrorMessages",e[t]);break;case"passwordMeterConfiguration":w.$hooks.call("passwordMeterConfiguration",e[t]);break;case"buttonsName":w.$hooks.call("setButtonsName",e[t])}})}function SetLoginRadiusCommonFunctions(P){var b=this,h=LoginRadiusDefaults.messages,T=LoginRadiusDefaults.buttonNames,E=new LoginRadiusControllers(P,b);function w(o,n,e,t){var i=P.util.elementById(e+"_tencent"),a=!1,s=("profileeditor"===t&&(a=!0),P.util.elementById(e));P.options.invisibleRecaptcha&&s&&""!==s.innerHTML&&"none"!==s.style.display&&!window.lrpasswordlesslogin&&!window.lrpasswordlessloginotp&&s.closest("form")?window.hcaptcha&&P.options.hCaptchaSiteKey?window.hcaptcha.execute(window[e+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&grecaptcha.execute(window[e+"lr_recaptcha_widgets_idprefix"]):i&&"none"!==i.style.display&&(P.options.tencentCaptcha||P.options.tencentCaptchaAsFallback&&!window.grecaptcha&&!window.hcaptcha)?window.onTencentCaptchaSubmitCallback=function(e){var t=P.util.serialize(o,a),t=(t+="&qq_captcha_ticket="+e.ticket)+("&qq_captcha_randstr="+e.randstr);n(t)}:(n(P.util.serialize(o,a)),b.resetGoogleCaptcha(t,e))}function S(e,t,o,n,i){var a="linksignin",s=("passwordlessLoginOTPButtonLabel"===e&&(a="otpsignin"),document.createElement("input")),r=(s.type="submit",P.buttonsName[e.toLowerCase()]||T[e.toLowerCase()]),l=T[e.toLowerCase()];s.value=r,s.id=n+a+"-"+l.toLowerCase().replace(/ /g,"-"),s.setAttribute("class",i+a+" "+a+"-"+n+l.toLowerCase().replace(/ /g,"-")),P.options.disableButtonOnsubmit&&(P.$hooks.register("startProcess",function(e){("otpsignin"===a&&window.lrpasswordlessloginotp||"linksignin"===a&&window.lrpasswordlesslogin)&&(s.disabled=!0)}),P.$hooks.register("xhrEndWithError",function(e){("otpsignin"===a&&window.lrpasswordlessloginotp||"linksignin"===a&&window.lrpasswordlesslogin)&&(s.disabled=!1)}),P.$hooks.register("xhrEndWithSuccess",function(e){("otpsignin"===a&&window.lrpasswordlessloginotp||"linksignin"===a&&window.lrpasswordlesslogin)&&P.options.enableSubmitOnSuccess&&(s.disabled=!1)})),t.appendChild(s),P.util.addEvent("click",o,function(e){window.lrpasswordlessloginotp=!1,window.lrpasswordlesslogin=!1}),"passwordlessLoginOTPButtonLabel"===e?P.util.addEvent("click",s,function(e){window.lrpasswordlessloginotp=!0,window.lrpasswordlesslogin=!1}):P.util.addEvent("click",s,function(e){window.lrpasswordlesslogin=!0,window.lrpasswordlessloginotp=!1})}b.showOTPTemplateForm=function(e){return P.options.templateVerificationTypes&&"OTP"===P.options.templateVerificationTypes[e]},b.addSocialEndpointOptions=function(e){var t=P.util.getQueryParameterByName("scope"),t=(""===P.options.scope&&t&&(P.options.scope=t),"&callback="+P.options.callbackUrl+"&same_window="+P.options.callbackInsideSameWindow+"&is_access_token="+P.options.accessTokenResponse+"&callbacktype="+P.options.callbackType+"&disablesignup="+P.options.disableSignup);return-1===t.indexOf("scope")&&(t+="&scope="+P.options.scope),P.options.isMobile&&(t+="&ismobile=true"),e&&(t+="&ac_linking=true"),P.options.isCustomScope&&(t+="&is_custom_scope=true"),t},b.renderCustomInterface=function(e,w,S,L,k,t){P.options.selector=e;function o(e){for(var t,o=e,n=(P.options.providerCountry&&!P.options.providersList&&(o=function(e,t){for(var o=[{Name:"Facebook",country:"global",except:"china"},{Name:"Google",country:"global",except:"china"},{Name:"Yahoo",country:"global",except:"china"},{Name:"Live",country:"global",except:"china"},{Name:"Twitter",country:"global",except:"china"},{Name:"Linkedin",country:"global",except:"china"},{Name:"Myspace",country:"US"},{Name:"Foursquare",country:"global",except:"china"},{Name:"Vkontakte",country:"Russia"},{Name:"Renren",country:"China"},{Name:"QQ",country:"China"},{Name:"Kaixin",country:"China"},{Name:"Github",country:"global",except:"china"},{Name:"Mailru",country:"Russia"},{Name:"Amazon",country:"US"},{Name:"Paypal",country:"global"},{Name:"Salesforce",country:"global"},{Name:"ODNOKLASSNIKI",country:"Russia"},{Name:"WORDPRESS",country:"global"},{Name:"GOOGLEPLUS",country:"global",except:"china"},{Name:"Disqus",country:"global",except:"china"},{Name:"INSTAGRAM",country:"global",except:"china"},{Name:"SINAWEIBO",country:"China"},{Name:"XING",country:"Germany"},{Name:"PINTEREST",country:"global",except:"china"},{Name:"LINE",country:"global"},{Name:"AOL",country:"US"}],n=0;n<o.length;n++)for(var i=0;i<t.length;i++)!t[i]||t[i].Name.toLowerCase()!==o[n].Name.toLowerCase()||o[n].country.toLowerCase()===e.toLowerCase()||"global"===o[n].country.toLowerCase()&&!o[n].except||o[n].except&&o[n].except.toLowerCase()!==e.toLowerCase()||t.splice(i,1);return t}(P.options.providerCountry,o)),P.$hooks.call("socialInterfaceProviders",o),P.options.providersList&&(t=P.options.providersList),P.options.hashTemplate?P.util.hashTmpl:P.util.tmpl),i=S.split(","),a=b.addSocialEndpointOptions(k),s=P.util.getThisObjectName(),r=0;r<i.length;r++){var l=P.util.elementById(i[r]),c=(l&&-1!==l.innerHTML.indexOf("ac_linking")&&(a=a.replace("&ac_linking=true","")),[]);R[r]="";for(var u=0;u<o.length;u++){o[u].ObjectName=s,-1===o[u].Endpoint.indexOf("callback=")&&(o[u].Endpoint+=a);var p={islinked:!1,providerId:!1},p=(w&&w[o[u].Name.toLowerCase()]&&(p.islinked=!0,p.providerId=w[o[u].Name.toLowerCase()]),o[u].isLinked=p.islinked,o[u].providerId=p.providerId,o[u]);c.push(p)}for(var d=[],m=0;m<c.length;m++)c[m].isLinked&&d.push(c[m]);if(0<d.length){for(var g=0;g<c.length;g++)c[g].isLinked||d.push(c[g]);c=d}for(var f=0;f<c.length;f++)""===i[r]||void 0!==t&&-1===t.indexOf(c[f].Name)&&-1===t.indexOf(c[f].Name.toLowerCase())||(c[f].Name=c[f].DisplayName||c[f].Name,R[r]+=n(i[r],c[f]))}for(var h=P.options.selector.split(","),y=0;y<h.length;y++)if(0===(C=h[y]).indexOf(".")){var C=C.replace(".",""),v=P.util.elementsByClass(C);if(v&&0<v.length)for(var T=0;T<v.length;T++)L?v[T].innerHTML+=R[y]:v[T].innerHTML=R[y]}else""!==C&&(C=P.util.elementById(C))&&(L?C.innerHTML+=R[y]:C.innerHTML=R[y])}var R=[];t?o(t):void 0!==P.options.SocialSchema&&o(P.options.SocialSchema.Providers)},b.mapRegistrationSchema=function(e,t,o){var n,i,a,s=P.util.parseQueryString(t),r={},l={},c={},t=[],u=[];for(n in s)if(-1!==n.indexOf("cf_"))r[n.replace("cf_","")]=s[n],delete s[n];else if(-1!==n.indexOf("consent_")){var p={ConsentOptionId:n.replace("consent_",""),IsAccepted:s[n]};u.push(p),delete s[n]}else if("emailsubscription"===n)s.IsEmailSubscribed=!("on"!==s[n]&&"true"!==s[n]),delete s[n];else if("emailid"===n||"email"===n)l.value=s[n],l.type="Primary";else if("SecurityQuestionAnswer"!==n&&-1!==n.indexOf("securityQuestion")){for(var d={},m=0;m<P.options.securityQuestionsCount;m++)s["securityAnswer"+m]&&s["securityQuestion"+m]&&(d[s["securityQuestion"+m]]=s["securityAnswer"+m]),delete s["securityQuestion"+m],delete s["securityAnswer"+m];0!==Object.keys(d).length&&(s.SecurityQuestionAnswer=d)}else"country"===n?c=-1!==s[n].indexOf("|")?{code:s[n].split("|")[0],name:s[n].split("|")[1]}:{code:"",name:s[n]}:(p=P.util.findInSchema(e,"name",n))&&p.Parent&&(i=-1!==n.indexOf("_")?n.split("_")[1]:n,void 0===s[p.Parent]?(s[p.Parent]=[],(a={})[i]=s[n],"Addresses"===p.Parent?a.type="personal":"PhoneNumbers"!==p.Parent||a.phonetype||(a.phonetype="default"),s[p.Parent].push(a)):("Addresses"!==p.Parent||s[p.Parent][0].type||(s[p.Parent][0].type="personal"),s[p.Parent][0][i]=s[n]),delete s[n]);return 0!==Object.keys(r).length&&(s.CustomFields=r),0!==Object.keys(l).length&&(t.push(l),s.email=t),0!==Object.keys(c).length&&(s.country=c),P.options.isPINAuthentication&&P.options.PINConfiguration.AskOnRegistration&&(s=b.sanitizePinData(s)),0<u.length&&(s.Consents={Events:[{Event:"Register",IsCustom:!1}],Data:u}),s},b.showQRCode=function(e,t,o,n,i,a,s){function r(e,t){var o;e&&u.splice(0,0,{type:"image",name:"qrcode",display:"QR Code",rules:"",permission:"r",value:e}),t&&(o=i||LoginRadiusDefaults.classPrefix,u.splice(1,0,{type:"button",name:"ManualEntryCode",display:"Get Manual Entry Code",rules:"",permission:"r",title:"Use this code when you unable to scan QR code. Tap 'Enter a provided key' then enter the email address of your Account and enter this key in your authenticator app",event:"click",eventCallback:function(e){document.getElementsByClassName("content-"+o+"ManualEntryCode")[0].innerHTML=t}}))}var l,c,u=P.QRCodeSchema.slice();P.options.maskSensitiveInput?u[0].type="password":u[0].type="string";e.SecondFactorAuthentication?(l=e.SecondFactorAuthentication.QRCode,c=e.SecondFactorAuthentication.ManualEntryCode,e.SecondFactorAuthentication.IsGoogleAuthenticatorVerified||r(l,c)):(l=e.QRCode,c=e.ManualEntryCode,e.IsGoogleAuthenticatorVerified||r(l,c)),b.createForm(u,"showQRcode",t,function(e){E.verify2FAOTPController(e,o,n,a,s)},function(e){n(e)},i)},b.showMFASecurityQuestions=function(o,n,i,a,s,r,l){var e=!0,t="",c=(P.$hooks.register("afterFormRender",function(e,t,o,n){var i;!P.LRCheckLogin&&n&&"loginradius-mfasecurityquestion"===n.name&&(i=P.util.findInSchema(n,"type","submit"),n=P.util.findInSchema(n,"name","setsecurityquestions"),i.style.display=n?"none":"block")}),o&&o.SecurityQuestions&&(t=o.SecurityQuestions,o.haveSecurityQuestionOnProfile=!0),[]);!P.LRCheckLogin&&o.haveSecurityQuestionOnProfile?c.push({type:"button",name:"enablesecurityquestions",display:"Enable Security Questions Authenticator",rules:"",permission:"r",event:"click",eventCallback:function(){E.verifyMFASecurityQuestionsByAccessTokenController("",i,a,!0)}}):c=b.getSecurityQuestionSchema([],!1,t),0<t.length&&o&&!o.IsSecurityQuestionAuthenticatorVerified&&c.push({type:"button",name:"setsecurityquestions",display:"Set Security Questions",rules:"",permission:"r",event:"click",eventCallback:function(e){var t=Object.assign({},o);delete t.SecurityQuestions,LoginRadiusDefaults.innerHTML=!1,e.target.style.display="none",t.haveSecurityQuestionOnProfile=!1,b.showMFASecurityQuestions(t,n,i,a,s,r,l)}}),(e=0<c.length?!1:e)?a([b.setMappedMessage(h.noSecurityQuestions)]):b.createForm(c,"mfasecurityquestion",n,function(e){P.LRCheckLogin?o&&o.IsSecurityQuestionAuthenticatorVerified||t&&0<t.length?E.verifyMFASecurityQuestionsController(e,i,a,r,l):E.submitMFASecurityQuestionsController(e,i,a,r,l):E.verifyMFASecurityQuestionsByAccessTokenController(e,i,a,o.haveSecurityQuestionOnProfile,t)},function(e){a(e)},s)},b.disableMFAOptions=function(e,o,t){var n,i=P.storage.getBrowserStorage(LoginRadiusDefaults.storedGAAuth),a=P.storage.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth),s={googleauthenticator:{field:i,name:"googleauthenticator",defaultKey:"storedGAAuth"},emailotpauthenticator:{field:P.storage.getBrowserStorage(LoginRadiusDefaults.storedEmailOTPAuth),name:"Email authenticator",defaultKey:"storedEmailOTPAuth"},otpauthenticator:{field:a,name:"OTP authenticator",defaultKey:"storedOTPAuth"},sqauthenticator:{field:P.storage.getBrowserStorage(LoginRadiusDefaults.storedSQAuth),name:"Security Questions authenticator",defaultKey:"storedSQAuth"}},r=e.emailotpauthenticator,l=0;for(n in s)n===e?r=s[n]:"false"!==s[n].field&&l++;P.options.twoFactorAuthentication?"false"===r.field?t([{Message:r.name+"has already disabled."}]):0<l?E.resetTwoFactorAuthenticationController(e,function(e,t){P.storage.setBrowserStorage(LoginRadiusDefaults[r.defaultKey],!1),o(e,t)},t):0===l&&t([{Message:"TwoFactorAuthentication is required, So atleast one authenticator should be required."}]):E.resetTwoFactorAuthenticationController(e,o,t)};var s=!(b.getSecurityQuestionSchema=function(e,t,o){var n=[],i=P.options.SecurityQuestions,a=P.options.securityQuestionsCount;if(o&&(a=(i=o).length),i){function s(e){for(var t=new RegExp("securityQuestion"),o=e.target.id.split("securityQuestion")[1],n=(l[o]=e.target.selectedIndex,P.util.findElementByRegex("id",t,"select")),i=0;i<n.length;i++)for(var a=1;a<n[i].options.length;a++)-1<l.indexOf(n[i].options[a].index)&&n[i].options[a].index!==n[i].options.selectedIndex?n[i].options[a].style.display="none":n[i].options[a].style.display="block"}var r=[],l=[];if(!o)for(var c=0;c<i.length;c++){var u={};u.text=i[c].Question,u.value=i[c].QuestionId,r.push(u),l.push(0)}for(var p=0;p<a;p++){var d={},d=(o?(d.type="html",d.name="securityQuestion"+p,d.html=i[p].Question):(d.type="option",d.options=r,d.name="securityQuestion"+p,d.display="Security Question",d.event="change",d.eventCallback=s),d.rules=t?"optional":"required",d.permission="r",(t?e:n).push(d),{});P.options.maskSensitiveInput?d.type="password":d.type="string",d.name=o?i[p].QuestionId:"securityAnswer"+p,d.display="Answer",d.rules=t?"optional":"required",d.permission="r",(t?e:n).push(d)}}return n});function L(e,t){e=e.toLowerCase();return"changepassword"===e&&t.PutChangePassword||("profileeditor"===e||"loginRequiredFieldsUpdate"===e||"progressiveProfiling"===e||"socialRegistration"===e)&&t.PutUpdateProfile||"forgotpassword"===e&&(P.options.phoneLogin&&t.PostForgotPasswordByPhone&&t.PostForgotPasswordByEmail||!P.options.phoneLogin&&t.PostForgotPasswordByEmail)||"login"===e&&(P.options.usernameLogin&&t.PostLoginByUserNameAndPassword&&P.options.phoneLogin&&t.PostLoginByEmailAndPassword&&t.PostLoginByPhoneAndPassword||P.options.phoneLogin&&t.PostLoginByEmailAndPassword&&t.PostLoginByPhoneAndPassword||!P.options.phoneLogin&&P.options.usernameLogin&&t.PostLoginByUserNameAndPassword||!P.options.usernameLogin&&!P.options.phoneLogin&&t.PostLoginByEmailAndPassword)}b.socialLogin=function(o,n,i,a){window.html5passToken=function(e){var t;s||(s=!0,o=LoginRadiusDefaults.socialRegFormId||o,(t=P.storage.getBrowserStorage("LRSetSafariToken"))&&(P.$hooks.call("getCurrentActionOptions",t),n=window.LRSafarionSuccess||n,i=window.LRSafarionError||i),E.socialLoginReceiveToken(e,o,n,i,a))};var e=P.util.getHashParam("lr-token");e&&window.html5passToken(e),P.loginRadiusHtml5PassToken=window.html5passToken,P.options.isMobile||P.options.noCallbackForSocialLogin?P.$hooks.register("socialCalls",function(e,t){P.options.noCallbackForSocialLogin&&b.pingForSocialLogin(t,function(e){e.access_token?E.socialLoginReceiveToken(e.access_token,o,n,i,a):n(e)},function(){})}):P.util.addEvent("message",window,function(e){-1===e.origin.indexOf(P.options.customDomain)&&-1===e.origin.indexOf(LoginRadiusDefaults.hubDomain)||(o=LoginRadiusDefaults.socialRegFormId||o,"string"==typeof e.data&&(LoginRadiusDefaults._uuidFormat.test(e.data)||P.util.isJWT(e.data))&&E.socialLoginReceiveToken(e.data,o,n,i,a))})},b.resetPassword=function(n,i,a,s,o){var r,t,l,e,c,u,p=P.resetPasswordFormSchema.slice();null==P.util.getHashParam("vtype")?(p=P.resetPasswordByPhoneSchema.slice(),b.setPasswordRule(P.util.findInSchema(p,"name","password")),o?(o.email?(e="email",c=o.email):o.username&&(e="username",c=o.username),p.push({type:"hidden",name:e,value:c})):P.options.phoneLogin&&(l="&"+LoginRadiusDefaults.LRPhoneNo,P.util.findInSchema(p,"name","resendotp")||(r=P.LRPrefix.replace("##","")+"recaptcha_widget_resetpassword",t=function(e,o){function t(e){var t={};"string"==typeof e?t.success=e:t=e,t.error?a([b.setMappedMessage(t.error)]):("string"==typeof LoginRadiusDefaults.LRPhoneNo&&(LoginRadiusDefaults.LRPhoneNo=P.util.parseQueryString(LoginRadiusDefaults.LRPhoneNo)),-1!==LoginRadiusDefaults.LRPhoneNo["g-recaptcha-response"]&&(LoginRadiusDefaults.LRPhoneNo["g-recaptcha-response"]=t.success,window.grecaptcha)&&grecaptcha.reset(window[r+"lr_recaptcha_widgets_idprefix"]),-1!==LoginRadiusDefaults.LRPhoneNo["h-captcha-response"]&&(LoginRadiusDefaults.LRPhoneNo["h-captcha-response"]=t.success,window.hcaptcha)&&P.options.hCaptchaSiteKey&&window.hcaptcha.reset(window[r+"lr_recaptcha_widgets_idprefix"]),E.forgotPasswordbyPhoneController(LoginRadiusDefaults.LRPhoneNo,n,i,a,s,o,function(){}))}P.options.disableResendOTPButton&&P.util.disableResendOTPButton(e);e=P.options.optionalRecaptchaConfiguration;e&&e.IsEnabled&&e.Apis&&L("forgotpassword",e.Apis)?(window.onCaptchaSubmit=t,P.$hooks.call("addFormCaptchaExecute",r,!0,t)):E.forgotPasswordbyPhoneController(LoginRadiusDefaults.LRPhoneNo,n,i,a,s,o,function(){})},e=Object.assign({},P.btnOTPSchema,{name:"resendotp",display:"Resend via SMS",eventCallback:function(e){t(e,!1)}}),p.push(e),P.options.isVoiceOtp&&(c=Object.assign({},P.btnOTPSchema,{name:"resendvoiceotp",display:"Resend via Voice call",eventCallback:function(e){t(e,!0)}}),p.push(c))))):(b.setPasswordRule(P.util.findInSchema(p,"name","password")),b.setPasswordRule(P.util.findInSchema(p,"name","confirmpassword")),(e=P.util.getHashParam("vtoken"))?P.options.verifyEmailByOTP?(c=P.util.getQueryParameterByName("email"),u="&otp="+e,u+="&email="+encodeURIComponent(c.replace(/ /g,"+")),p.splice(2,1)):P.resetPasswordFormSchema[2].value=e:a([{Message:"Verification Token not found in query string."}])),b.createForm(p,"resetpassword",n,function(e){var t;-1===e.indexOf("otp")||o?(u&&(e+=u),E.resetPasswordController(e,i,a,n,s)):(t=P.util.parseQueryString(l),E.resetPasswordByPhoneController(e+"&phone="+t.phone,i,a,n,s))},function(e){a(e)},s,"forgotpassword")},b.resetPIN=function(t,o,n,i,a){var s,e,r,l,c=P.resetPINFormSchema.slice();null==P.util.getHashParam("vtype")?(c=P.resetPINByPhoneSchema.slice(),b.setPINRule(P.util.findInSchema(c,"name","pin")),a?(a.email?(e="email",r=a.email):a.username&&(e="username",r=a.username),c.push({type:"hidden",name:e,value:r})):P.options.phoneLogin&&(s="&"+LoginRadiusDefaults.LRPhoneNo,P.util.findInSchema(c,"name","resendotp")||(e=Object.assign({},P.btnOTPSchema,{name:"resendotp",display:"Resend via SMS",eventCallback:function(e){P.options.disableResendOTPButton&&P.util.disableResendOTPButton(e),E.forgotPINbyPhoneController(LoginRadiusDefaults.LRPhoneNo,t,o,n,i,!1,function(){})}}),c.push(e),P.options.isVoiceOtp&&(r=Object.assign({},P.btnOTPSchema,{name:"resendvoiceotp",display:"Resend via Voice call",eventCallback:function(e){P.options.disableResendOTPButton&&P.util.disableResendOTPButton(e),E.forgotPINbyPhoneController(LoginRadiusDefaults.LRPhoneNo,t,o,n,i,!0,function(){})}}),c.push(r))))):(b.setPINRule(P.util.findInSchema(c,"name","pin")),b.setPINRule(P.util.findInSchema(c,"name","confirmpin")),(e=P.util.getHashParam("vtoken"))?P.options.verifyEmailByOTP?(r=P.util.getQueryParameterByName("email"),l="&otp="+e,l+="&email="+encodeURIComponent(r.replace(/ /g,"+")),c.splice(2,1)):P.resetPINFormSchema[2].value=e:n([{Message:"Verification Token not found in query string."}])),b.createForm(c,"resetpin",t,function(e){-1===e.indexOf("otp")||a?(l&&(e+=l),E.resetPINController(e,o,n,t,i)):E.resetPINByPhoneController(e+s,o,n,t,i)},function(e){n(e)},i)},b.setPasswordRule=function(e,t){P.options.passwordLength=P.options.passwordlength||P.options.passwordLength;var o,n=P.util.findInSchema(P.options.RegistrationFormSchema,"name","password").rules;e&&e.rules&&((o=new RegExp(/matches\[\w*\]/).exec(e.rules))?(o=o[0],e.rules=[n,o].join("|")):e.rules=n,P.options.passwordLength)&&P.options.passwordLength.min&&P.options.passwordLength.max&&(e.rules=e.rules||"",e.rules=e.rules.replace("min_length[6]","min_length["+P.options.passwordLength.min+"]").replace("max_length[32]","max_length["+P.options.passwordLength.max+"]")),(t=t||!1)&&e&&(e.rules="required")},b.setPINRule=function(e){var t,o;P.pinSchema&&P.pinSchema.length&&(t=P.pinSchema[0].rules,e)&&e.rules&&((o=new RegExp(/matches\[\w*\]/).exec(e.rules))?(o=o[0],e.rules=[t,o].join("|")):e.rules=t,P.options.PINConfiguration.IsRequired)&&-1===e.rules.indexOf("required")&&(e.rules=e.rules?[e.rules,"required"].join("|"):"required")},b.changeNumberForm=function(t,e,o,n,i,a,s,r){var l=P.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),c=P.util.getButtonAttribute("changenumber",i),u=P.util.getButtonAttribute("disableotpauthenticator",i),p=P.storage.getBrowserStorage(LoginRadiusDefaults.storedGAAuth),d=P.storage.getBrowserStorage(LoginRadiusDefaults.storedSQAuth),p="false"!==P.storage.getBrowserStorage(LoginRadiusDefaults.storedEmailOTPAuth)||"false"!==p||"false"!==d;e?(e.appendChild(c),l&&!P.LRCheckLogin&&(P.options.optionalTwoFactorAuthentication||p&&P.options.twoFactorAuthentication)&&e.appendChild(u)):(P.util.addHTMLContent(t,c,a),l&&!P.LRCheckLogin&&(P.options.optionalTwoFactorAuthentication||p&&P.options.twoFactorAuthentication)&&P.util.addHTMLContent(t,u,!0)),P.util.addEvent("click",u,function(e){b.disableMFAOptions("otpauthenticator",o,n)}),P.util.addEvent("click",c,function(e){document.getElementsByName(i+"changePhone")[0]||(LoginRadiusDefaults.innerHTML=!1,b.updatePhoneNumber(t,o,n,i,"changePhone",s,r))})},b.validateAndCall=function(e){LoginRadiusDefaults.isSSOInitFired?P.options.appName?e():P.log("LoginRadius site name (app name) required to do SSO"):P.log("Init method should be called first then login.")},b.logout=function(n){b.validateAndCall(function(){var e=P.options.tokenExpire?"?tokenExpire=1":"",t=P.options.tokenExpire?"tokenExpire":"logout",o=P.options.customDomain||P.options.appName+"."+LoginRadiusDefaults.hubDomain;P.util.ajaxCall("get","https://"+o+"/ssologin/"+t+e,"",function(e){LRNameSpace.cookies.removeItem(LoginRadiusDefaults.tokenCookie,P.options.appPath),P.clearSession(),n&&n()})})},b.otpEmailVerification=function(o,n,i,a,s){var e=P.otpSchema;b.createForm(e,"otp",o,function(e){var t="";"string"!=typeof(t="string"!=typeof s?(e=P.util.parseQueryString(e),P.util.mergeOptions(s,e)):s+"&"+e)&&t.onetouchlogin?E.oneTouchLoginEmailVerification(t.otp,n,i,t.email):E.emailVerificationController(t,n,i,o,a,!0)},function(e){i(e)},a)},b.passwordlessLoginVerification=function(e,t,o,n,i){var a,s,r;e&&(a="get",s="",r=LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/email/verify?apiKey="+P.options.apiKey+"&verificationtoken="+e+"&welcomeEmailTemplate="+P.options.welcomeEmailTemplate,i&&((s="string"==typeof e?P.util.parseQueryString(e):{email:(i=P.util.getQueryParameterByName("email"))?i.replace(/ /g,"+"):"",otp:e}).welcomeemailtemplate=P.options.welcomeEmailTemplate,a="post",i=s.username?"username":"email",r=LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/"+i+"/verifyotp?apiKey="+P.options.apiKey),P.util.ajaxCall(a,r,s,function(e){e.ErrorCode?o(b.loginRadiusErrorTojsError(e)):b.loginHandleToken(e,"",t,o,n)},"passwordlessLogin##otp"))},b.loginHandleToken=function(e,t,o,n,i,a){var s,r,l,c,u,p,d,m,g,f;LoginRadiusDefaults.lrResponseCounter=0,LoginRadiusDefaults.lrCounterJwtResponse="",LoginRadiusDefaults.lrCounterTokenResponse="",e&&(e.ErrorCode?n(b.loginRadiusErrorTojsError(e)):(e.Data&&e.Data.hasOwnProperty("Profile")&&(delete(e=e.Data).Data,delete e.IsPosted),P.options.privacyPolicyConfiguration.IsEnabled&&e.Profile&&(p=!1,e.Profile.PrivacyPolicy&&e.Profile.PrivacyPolicy.Version&&(p=b.checkForLatestPrivacyPolicy(e.Profile)),e.Profile=Object.assign({},e.Profile,{IsLatestPrivacyPolicy:p})),s=function(){P.LoginRadiusHostedPage&&e.access_token&&LRNameSpace.cookies.setItem("lr-session-token",e.access_token),LoginRadiusDefaults.lrResponseCounter++,LoginRadiusDefaults.lrCounterTokenResponse=e,P.options.tokenType&&"jwt"===P.options.tokenType.toLowerCase()?2===LoginRadiusDefaults.lrResponseCounter&&LoginRadiusDefaults.lrCounterJwtResponse&&LoginRadiusDefaults.lrCounterJwtResponse.signature&&(e.jwttoken=LoginRadiusDefaults.lrCounterJwtResponse.signature,null!=t&&""!==t?o(e,P.util.parseQueryString(t)):o(e)):null!=t&&""!==t?o(e,P.util.parseQueryString(t)):o(e)},p=P.storage.getBrowserStorage("LRSetSafariToken"),P.storage.removeBrowserStorage("LRSetSafariToken"),P.setHostedToken||p?o(e):(p=P.registrationFormSchema&&0<P.registrationFormSchema.length?P.registrationFormSchema:P.options.RegistrationFormSchema,p=(p=P.util.findInSchema(p,"name","phoneid"))&&-1!==p.rules.indexOf("required")&&P.options.phoneLogin,r=e.Profile||e.Data,c=!(P.options.disabledEmailVerification||P.options.optionalEmailVerification),r&&!r.EmailVerified&&c&&!a?n([b.setMappedMessage(h.emailNotVerified)]):p&&r&&!r.PhoneIdVerified&&!a?r.PhoneId?(c={phone:r.PhoneId},l=P.currentLRContainer,E.resendOTPController(c,function(){b.verifyOTP("phone="+r.PhoneId,l,o,n,i),b.resendOTP("phone="+r.PhoneId+"&noPhoneVerified=false",l,o,n,i),P.options.isVoiceOtp&&b.resendOTP("phone="+r.PhoneId+"&noPhoneVerified=false",l,o,n,i,!0)},n,i)):P.log("Phone ID is required field."):(r&&r.Uid&&P.storage.setBrowserStorage(LoginRadiusDefaults.storedUidName,r.Uid),P.storage.setBrowserStorage(LoginRadiusDefaults.storedTokenName,e.access_token),P.options.isPINAuthentication&&P.options.PINConfiguration.PINLogin&&e&&e.session_token&&P.setSessionToken(e),LoginRadiusDefaults.isSSOInitFired&&e.access_token?(b.setToken(e.access_token),a=!!(-1===(p=navigator.userAgent.toLowerCase()).indexOf("crios")&&-1===p.indexOf("chrome")&&0<=p.indexOf("safari")),c=/ipad|iphone|ipod/.test(p)&&!window.MSStream,u=0<=p.indexOf("ucbrowser"),p=/crios/i.test(p),d=P.options.customDomain||P.options.appName+"."+LoginRadiusDefaults.hubDomain,g=P.util.getQueryParameterByName("vtype"),f=P.util.getQueryParameterByName("vtoken"),m=window.location.href,g&&(m=m.replace("?vtype="+g,"").replace("&vtype="+g,"")),f&&(m=m.replace("&vtoken="+f,"").replace("?vtoken="+f,"")),m=encodeURIComponent(m),a||c&&u||c&&p?(P.options.askRequiredFieldForTraditionalLogin||P.storage.setBrowserStorage("LRTraditionalLogin",!0),P.$hooks.call("setCurrentAction"),P.options.stayLogin?(g=P.storage.getBrowserStorage("lr-rememberme"),P.storage.removeBrowserStorage("lr-rememberme"),window.location="https://"+d+"/ssologin/setCustomSafariToken?token="+e.access_token+"&apiKey="+P.options.apiKey+"&isrememberMe="+g+"&callback="+m):window.location="https://"+d+"/ssologin/setSafariToken?token="+e.access_token+"&apiKey="+P.options.apiKey+"&callback="+m):(f="",a="setToken",P.options.stayLogin&&(f="&isrememberMe="+P.storage.getBrowserStorage("lr-rememberme"),P.storage.removeBrowserStorage("lr-rememberme"),a="setCustomToken"),P.util.ajaxCall("get","https://"+d+"/ssologin/"+a+"?access_token="+e.access_token+"&apiKey="+P.options.apiKey+f,"",function(){s()},"setToken"))):s(),P.options.tokenType&&"jwt"===P.options.tokenType.toLowerCase()&&b.getJwtToken(e.access_token,o,n)))))},b.getJwtToken=function(e,t,o){P.util.ajaxCall("get",LoginRadiusDefaults.cloudApiDomain+"sso/jwt/api/token?apikey="+P.options.apiKey+"&jwtapp="+P.options.integrationName+"&access_token="+e,"",function(e){LoginRadiusDefaults.lrResponseCounter++,LoginRadiusDefaults.lrCounterJwtResponse=e,2===LoginRadiusDefaults.lrResponseCounter&&(e.ErrorCode?o(e):(LoginRadiusDefaults.lrCounterTokenResponse.jwttoken=e.signature,t(LoginRadiusDefaults.lrCounterTokenResponse)))},"JWTToken")},b.mapSchema=function(t,e,o,n){e=P.util.keysToLowerCase(e);var i=[];Object.keys(t).forEach(function(e){i.push(t[e])});for(var a,s,r=0;r<t.length;r++)null!=t[r]&&("emailid"===t[r].name.toLowerCase()&&e.email&&e.email[0]&&e.email[0].value&&""!==e.email[0].value?e.emailverified||(P.options.disabledEmailVerification||P.options.optionalEmailVerification)&&!P.options.askEmailForUnverifiedProfileAlways?(i[r].value=e.email[0].value,t[r]=null):P.options.askEmailForUnverifiedProfileAlways&&!P.setHostedToken||(i[r]=t[r]=null):"country"===t[r].name.toLowerCase()&&""===t[r].Parent&&e.country&&null!=e.country.name&&""!==e.country.name&&"unknown"!==e.country.name.toLowerCase()?(i[r].value=e.country.name,e.country.code&&(i[r].value=e.country.code+"|"+i[r].value),t[r]=null):"emailsubscription"===t[r].name.toLowerCase()&&e.isemailsubscribed&&""!==e.isemailsubscribed?(i[r].value=e.isemailsubscribed,t[r]=null):"phoneid"===t[r].name.toLowerCase()&&e.phoneid&&""!==e.phoneid?(i[r].value=e.phoneid.replace("+",""),t[r]=null):"birthdate"===t[r].name.toLowerCase()&&e.birthdate&&""!==e.birthdate?(a=e.birthdate.replace("-","/").replace("-","/").split("/"))[2]&&""!==a[2]&&(i[r].value=e.birthdate,t[r]=null):"password"===t[r].name.toLowerCase()||"confirmpassword"===t[r].name.toLowerCase()?null==e.password&&(P.options.promptPasswordOnSocialLogin||P.options.promptPasswordOnFirstLoginForSocial)||(i[r]=t[r]=null):"pin"===t[r].name.toLowerCase()||"confirmpin"===t[r].name.toLowerCase()?(e.pin&&e.pin.pin||!P.options.isPINAuthentication)&&(i[r]=t[r]=null):""!==t[r].Parent&&void 0!==t[r].Parent&&null!==t[r].Parent?t[r].Parent&&e[t[r].Parent.toLowerCase()]&&void 0!==e[t[r].Parent.toLowerCase()]&&(a=-1!==t[r].name.indexOf("_")?t[r].name.split("_")[1]:t[r].name,s=Object.keys(e[t[r].Parent.toLowerCase()]).length-1,"object"==typeof e[t[r].Parent.toLowerCase()]&&e[t[r].Parent.toLowerCase()][s]&&e[t[r].Parent.toLowerCase()][s][a.toLowerCase()]?null!=e[t[r].Parent.toLowerCase()][s][a.toLowerCase()]&&void 0!==e[t[r].Parent.toLowerCase()][s][a.toLowerCase()]&&"unknown"!==e[t[r].Parent.toLowerCase()][s][a.toLowerCase()]&&(i[r].value=e[t[r].Parent.toLowerCase()][s][a.toLowerCase()],t[r]=null):(i[r].value=e[t[r].Parent.toLowerCase()][t[r].name.toLowerCase()],t[r]=null)):0===t[r].name.indexOf("cf_")&&e.customfields&&e.customfields[t[r].name.replace("cf_","").toLowerCase()]?(i[r].value=e.customfields[t[r].name.replace("cf_","").toLowerCase()],t[r]=null):t[r].name&&"object"!=typeof e[t[r].name.toLowerCase()]&&null!=e[t[r].name.toLowerCase()]&&""!==e[t[r].name.toLowerCase()]&&void 0!==e[t[r].name.toLowerCase()]&&"unknown"!==e[t[r].name.toLowerCase()]&&(i[r].value=e[t[r].name.toLowerCase()],t[r]=null));if(t=t.filter(function(e){return e}),o&&"profileeditor"===o&&!e.ErrorCode)return i=i.filter(function(e){return e});for(var l=0;l<t.length;l++)if(null!=t[l].rules&&""!==t[l].rules&&-1<t[l].rules.indexOf("required")||P.options.askOptionalFieldsOnRegistration&&!0===e.firstlogin&&"email"!==e.registrationprovider.toLowerCase()||P.options.askOptionalFieldsOnProgressiveSteps&&n||P.askPinOnLogin)return o&&!e.ErrorCode?i=i.filter(function(e){return e}):t;return[]},b.loginRadiusErrorTojsError=function(e){var t=[];return t.push(b.setMappedMessage(e)),t},b.setMappedMessage=function(e){for(var t=0;t<P.errorMessages.length;t++)P.errorMessages[t].code==e.ErrorCode&&(e.Message=P.errorMessages[t].message||e.Message,e.Description=P.errorMessages[t].description||e.Description);return e},b.setCustomLabel=function(e){for(var t=0;t<e.length;t++)e[t]&&P.formCustomLabel[e[t].name]&&(e[t].display=P.formCustomLabel[e[t].name])},b.setCustomTitle=function(e){for(var t=0;t<e.length;t++)e[t]&&P.formElementsTitle[e[t].name]&&(e[t].title=P.formElementsTitle[e[t].name])},b.setPlaceholder=function(e){for(var t=0;t<e.length;t++)e[t]&&P.formPlaceholder[e[t].name]&&(e[t].placeholder=P.formPlaceholder[e[t].name])},b.setValidation=function(e){P.formValidations[e.name]&&(e.rules=P.formValidations[e.name])},b.setAttribute=function(e,t){if(P.formElementAttributes[e.name])for(var o=P.formElementAttributes[e.name].split("&"),n=0;n<o.length;n++){var i=o[n].split("="),a=i.splice(0,1),i=i.join("=");t.setAttribute(a,i)}},b.verifyOTP=function(o,e,n,i,t,a,s){var r,l=!1,c="otp",u="",p=(P.LRCheck2FA&&(P.options.twoFactorAuthentication||P.options.optionalTwoFactorAuthentication)&&!P.LRCheckRegistration&&(l=!0,c="twofaotp"),P.otpSchema);o.mfaEmailToken&&o.EmailId?(u=o.EmailId,c="twofaemailotp",LoginRadiusDefaults.innerHTML=!1,(r=P.util.findInSchema(p,"name","emailid"))?r.value=o.EmailId:p.push({type:"hidden",name:"emailid",value:o.EmailId})):((r=o)&&"string"==typeof o&&(r=JSON.parse(JSON.stringify(o)),r=P.util.parseQueryString(r)),u=r.phone||r.phoneid||r.phoneId||r.phoneNo2FA||""),u&&p&&p[0]&&"otp"===p[0].name&&P.$hooks.register("afterFormRender",function(e,t,o,n){n&&n.name==="loginradius-"+c&&n[0].name===p[0].name&&n[0].labels&&n[0].labels[0].innerText&&-1!==n[0].labels[0].innerText.indexOf("%value")&&(n[0].labels[0].innerText=n[0].labels[0].innerText.replace("%value",u))}),b.createForm(p,c,e,function(e){var t;l?(o.mfaEmailToken&&"string"==typeof e&&(e+="&mfaEmailToken=true"),E.verify2FAOTPController(e,n,i,a,s)):(("string"==typeof o||o instanceof String)&&(o=P.util.parseQueryString(o)),e=P.util.parseQueryString(e),o.phone?t={phone:o.phone}:(o.phoneid||o.phoneId)&&(t={phone:o.phoneid||o.phoneId}),o.onetouchloginflag&&(e.onetouchloginflag=!0),o.haveToken&&(e.haveToken=!0),E.verifyOTPController(e,t,n,i,a,s))},function(e){i(e)},t)},b.resendOTP=function(e,t,n,i,o,a,s,r,l){function c(t,o){if(u.isVoice=o,window.onCaptchaSubmit=v,P.options.disableResendOTPButton&&P.util.disableResendOTPButton(t),P.options.isCaptchaEnabled&&!m)P.$hooks.call("addFormCaptchaExecute",p,!0,v);else if(l){t=P.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);if(t&&b.isValidToken(t,i)){let e=LoginRadiusDefaults.apiDomain+"/auth/phone?apiKey="+P.options.apiKey+"&access_token="+t+"&smsTemplate="+P.options.smsTemplateUpdatePhone;o&&(e+="&isvoiceotp=true"),P.util.ajaxCall("put",e,u,function(e){e.ErrorCode&&i(b.loginRadiusErrorTojsError(e))},"updatePhone")}}else m&&b.resendOTPManually(u,n,i,y,o)}var u={},p=LoginRadiusDefaults.idPrefix+"recaptcha_widget_otp",d=!0,m=!0,g=((e="string"==typeof e||e instanceof String?P.util.parseQueryString(e):e).noPhoneVerified&&(d=!1),!0),f=(e.phoneid||e.phoneId?(g=!1,u={phone:e.phoneid||e.phoneId}):e.phone?(P.socialLoginFlag||(g=!1),u=e):e.phoneNo2FA||e.phoneno2fa?u={phoneno2fa:e.phoneNo2FA||e.phoneno2fa}:e.SecondFactorAuthentication&&e.SecondFactorAuthentication.OTPPhoneNo&&(u={phoneno2fa:e.SecondFactorAuthentication.OTPPhoneNo}),null),h=P.util.getButtonAttribute("resendotp",o),y=(a&&(f=P.util.getButtonAttribute("resendvoiceotp",o)),o||LoginRadiusDefaults.classPrefix),o=g?"twofaotp":"otp",C=document.getElementsByName(y+o)[0],v=((C=C||document.getElementsByName(y+("twofaotp"==o?"otp":"twofaotp"))[0])&&((o=P.util.findInSchema(C,"type","submit"))?(a&&o.parentNode.insertBefore(f,o.nextSibling),o.parentNode.insertBefore(h,o.nextSibling)):(a&&C.appendChild(f),C.appendChild(h))),!P.LRCheckLogin||!g||d&&"false"!==P.storage.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth)||b.changeNumberForm(t,C,n,i,y,"",s,r),function(){});e.onetouchloginflag&&(m=!1,u.onetouchloginflag=!0,v=function(e){var t={};"string"==typeof e?t.success=e:t=e,t.error?i(t.error):(window.grecaptcha&&(u["g-recaptcha-response"]=t.success,grecaptcha.reset(window[p+"lr_recaptcha_widgets_idprefix"])),window.hcaptcha&&P.options.hCaptchaSiteKey&&(u["h-captcha-response"]=t.success,window.hcaptcha.reset(window[p+"lr_recaptcha_widgets_idprefix"])),b.resendOTPManually(u,n,i,y,u.isVoice))},P.$hooks.call("addFormCaptcha",P.currentLRContainer,"","",p)),e.updatePhone&&(u.updatePhone=!0);f&&P.util.addEvent("click",f,function(e){c(e,!0)}),P.util.addEvent("click",h,function(e){c(e,!1)})},b.sendInstantSignInLink=function(e,t,o,n,i){var a,e=P.util.parseQueryString(e),e=e.emailid||e.email;LoginRadiusDefaults.regexExpression.emailRegex.test(e)||P.options.usernameLogin||P.options.duplicateEmailWithUniqueUsername?(LoginRadiusDefaults.regexExpression.emailRegex.test(e)?a="email="+e:(P.options.usernameLogin||P.options.duplicateEmailWithUniqueUsername)&&(a="username="+e),a+="&oneClickSignIn=true",e=P.options.instantLinkLoginEmailTemplate||P.options.passwordlessLoginEmailTemplate,P.util.ajaxCall("GET",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/email?apiKey="+P.options.apiKey+"&verificationUrl="+P.options.verificationUrl+"&passwordlesslogintemplate="+e+"&"+a,"",function(e){window.lrpasswordlessloginotp=!1,window.lrpasswordlesslogin=!1,e.ErrorCode?o(b.loginRadiusErrorTojsError(e)):t(e,a)},"passwordlessLogin")):o([b.setMappedMessage(h.invalidEmail)])},b.sendInstantSignInOtp=function(e,n,i,o,a){var s,r,e=P.util.parseQueryString(e),e=e.emailid||e.email;LoginRadiusDefaults.regexExpression.phoneRegex.test(e)?(r=P.options.smsTemplateInstantOTPLogin||P.options.passwordlessLoginSMSTemplate,P.util.ajaxCall("GET",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/otp?apiKey="+P.options.apiKey+"&"+(s="phone="+e)+"&smsTemplate="+r,"",function(e){window.lrpasswordlessloginotp=!1,window.lrpasswordlesslogin=!1,e.ErrorCode?i(b.loginRadiusErrorTojsError(e)):(n(e),e.Data&&e.Data.Sid&&(P.$hooks.register("beforeFormRender",function(e,t){var o;P.util.findInSchema(t,"name","resendotp")||(o=Object.assign({},P.btnOTPSchema,{name:"resendotp",display:"Resend via SMS",eventCallback:function(e){P.options.disableResendOTPButton&&P.util.disableResendOTPButton(e),b.resendOTPHandler({data:s,onsuccess:n,onerror:i,smstemplate:r,action:"sendInstantSignInResendOtp"})}}),t.push(o),P.options.isVoiceOtp&&(o=Object.assign({},P.btnOTPSchema,{name:"resendvoiceotp",display:"Resend via Voice call",eventCallback:function(e){P.options.disableResendOTPButton&&P.util.disableResendOTPButton(e),b.resendOTPHandler({data:s,onsuccess:n,onerror:i,smstemplate:r,voiceotp:!0,action:"sendInstantSignInResendOtp"})}}),t.push(o)))}),e=P.otpSchema,b.createForm(e,"otp",o,function(e){var t=a+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp";E.verifyInstantOTP(e,P.util.parseQueryString(s),n,i,t,o,a)},function(e){i(b.setMappedMessage(e))},a)))},"passwordlessLogin")):i([b.setMappedMessage(h.invalidPhone)])},b.resendOTPManually=function(e,t,o,n,i){var a;P.LRCheck2FA&&(P.options.twoFactorAuthentication||P.options.optionalTwoFactorAuthentication)&&!P.LRCheckRegistration?"false"===P.storage.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth)?(a={data:e,onsuccess:t,onerror:o,smstemplate:P.options.smsTemplate2FA,voiceotp:i,action:"update2FANumberResendOTP"},b.resendOTPHandler(a)):E.resendOTP2FAController(e,t,o,n,i):E.resendOTPController(e,t,o,n,i)},b.updatePhoneNumber=function(t,o,n,i,e,a,s){P.LRCheck2FA&&(P.options.twoFactorAuthentication||P.options.optionalTwoFactorAuthentication)&&(P.checkPhoneNumberSchema[0].name="phoneNo2FA"),i=i||LoginRadiusDefaults.classPrefix,document.getElementsByName(i+"showQRcode")[0]&&(LoginRadiusDefaults.innerHTML=!0),b.createForm(P.checkPhoneNumberSchema,e||"updatePhone",t,function(e){-1===e.indexOf("phone=")&&(P.options.twoFactorAuthentication||P.options.optionalTwoFactorAuthentication)?E.update2FAPhoneNumberController(e,t,o,n,i,a,s):E.updatePhoneNumberController(e,t,o,n,i,a,s)},function(e){n(e)},i)},b.pingForSmartLogin=function(t,o,n){var i=P.options.autoLoginPingInterval||P.options.smartLoginPingInterval,a=P.options.autoLoginPingCount||P.options.smartLoginPingCount;P.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/smartlogin/ping?apiKey="+P.options.apiKey+"&clientGuid="+t,"",function(e){1139===e.ErrorCode||1140===e.ErrorCode?setTimeout(function(){LoginRadiusDefaults.pingCount<a&&(b.pingForSmartLogin(t,o,n),LoginRadiusDefaults.pingCount++)},1e3*i):e.ErrorCode&&1139!==e.ErrorCode?(n(e),LoginRadiusDefaults.pingCount=0):(LoginRadiusDefaults.pingCount=0,o(e))},"pingSmartLogin")},b.pingForSocialLogin=function(t,o,n){var i=P.options.autoLoginPingInterval||P.options.smartLoginPingInterval,a=P.options.autoLoginPingCount||P.options.smartLoginPingCount;P.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/ping?apiKey="+P.options.apiKey+"&clientGuid="+t+"&verificationUrl="+P.options.verificationUrl+"&emailTemplate="+P.options.verificationEmailTemplate+"&welcomeEmailTemplate="+P.options.welcomeEmailTemplate,"",function(e){1139===e.ErrorCode||1140===e.ErrorCode?setTimeout(function(){LoginRadiusDefaults.pingCount<a&&(b.pingForSocialLogin(t,o,n),LoginRadiusDefaults.pingCount++)},1e3*i):e.ErrorCode&&1139!==e.ErrorCode?(n(e),LoginRadiusDefaults.pingCount=0):(LoginRadiusDefaults.pingCount=0,o(e))},"socialLogin")},b.pingForSocialIdentity=function(t,o,n,i){var a=P.options.autoLoginPingInterval||P.options.smartLoginPingInterval,s=P.options.autoLoginPingCount||P.options.smartLoginPingCount;P.util.ajaxCall("POST",LoginRadiusDefaults.apiDomain+"/auth/socialidentity/ping?apiKey="+P.options.apiKey+"&access_token="+t,{clientGuid:o},function(e){1139===e.ErrorCode||1140===e.ErrorCode?setTimeout(function(){LoginRadiusDefaults.pingCount<s&&(b.pingForSocialIdentity(t,o,n,i),LoginRadiusDefaults.pingCount++)},1e3*a):e.ErrorCode&&1139!==e.ErrorCode?(LoginRadiusDefaults.pingCount=0,i(b.loginRadiusErrorTojsError(e))):(LoginRadiusDefaults.pingCount=0,n(e))},"linkAccount")},b.pingForCrossDeviceSSO=function(t,o,n,i){var a=P.options.crossDeviceSSOPingInterval,s=P.options.crossDeviceSSOPingCount,r=1;P.util.ajaxCall("get",LoginRadiusDefaults.cloudApiDomain+"sso/mobile/token?apiKey="+P.options.apiKey+"&code="+t,"",function(e){e&&null===e.access_token?P.CDSSOPingApiTimeout=setTimeout(function(){r<s&&(b.pingForCrossDeviceSSO(t,o,n,i),r++)},1e3*a):(r=0,i(),o(e))},"pingForCrossDeviceSSO")},b.generateCrossDeviceSSOCode=function(a,e,s,r,l,c){e=e||"60";60<+e?P.log("QR code expiry time should not be more than 60 seconds."):P.util.ajaxCall("get",LoginRadiusDefaults.cloudApiDomain+"sso/mobile/generate?apikey="+P.options.apiKey+"&expiry="+e,"",function(e){var o,t,n,i;e.ErrorCode?r(b.loginRadiusErrorTojsError(e)):e&&e.code&&(o=[],QRCode.toDataURL(e.code,function(e,t){o.push({type:"image",name:"qrcode",display:"QR Code",rules:"",permission:"r",value:t})}),t=l||LoginRadiusDefaults.idPrefix,n=l||LoginRadiusDefaults.classPrefix,(i=document.createElement("div")).setAttribute("name",t+"crossDeviceSSO"),b.createFormFields(o,i,"crossDeviceSSO",[],n,t,r),P.util.addHTMLContent(a,i,LoginRadiusDefaults.innerHTML),b.pingForCrossDeviceSSO(e.code,function(e){b.loginHandleToken(e,"",s,r,"",!0)},r,c))},"crossDeviceSSO")},b.addChangeEventHandler=function(l,e,t,c){P.util.addEvent("change",document.getElementById(c+"registration-"+e.name),function(e){P.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/"+t.DataSource+"?apiKey="+P.options.apiKey+"&parentId="+this.value,"",function(e,t){var o=document.getElementById(c+"registration-"+e.name);if(t.ErrorCode)for(var n=1;n<o.options.length;n++)o.options[n]=null;else for(var i=0;i<t.length;i++)if(0===i&&1<o.options.length){for(var a=1;a<o.options.length;a++)o.options[a]=null;var s=document.createElement("option");s.setAttribute("value",t[i].Id),s.appendChild(document.createTextNode(t[i].Key)),o.appendChild(s)}else{s=document.createElement("option");s.setAttribute("value",t[i].Id),s.appendChild(document.createTextNode(t[i].Key)),o.appendChild(s)}for(var r=0;r<e.children.length;r++)b.addChangeEventHandler(l,e,e.children[r],c)},"registration",t)})},b.createFormFields=function(e,t,l,o,n,i,a){function s(e){var t=Math.random(),o=this.value,n=P.util.elementById(l+"-password-strength-meter"),i=P.util.elementById(l+"-password-strength-text"),a=(i.innerHTML="",0),s=(0<o.length&&(a++,o.match(/[a-z]/)&&o.match(/[A-Z]/)&&a++,o.match(/\d+/)&&a++,o.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)&&a++,12<o.length)&&a++,n.value=a,document.getElementsByClassName(l+"-password"));if(0<s.length)for(var r=0;r<s.length;r++)s[r].parentNode.removeChild(s[r]);(n=P.util.elementById(t)?P.util.elementById(t):document.createElement("style")).type="text/css",n.id=t,n.setAttribute("class",l+"-password"),t=-1!==navigator.userAgent.indexOf("Firefox"),n.innerHTML=t?"#"+l+"-password-strength-meter::-moz-meter-bar { background: "+c[a].color+" !important; }":"#"+l+"-password-strength-meter::-webkit-meter-optimum-value { background: "+c[a].color+" !important; }",document.body.appendChild(n),""!==o&&0<a?(i.innerHTML="Strength: "+c[a].Message,i.style.color=""):""!==o&&(i.innerHTML=c[a].Message,i.style.color=c[a].color)}a=a||function(){};for(var c,r=0;r<e.length;r++)if(e[r]){switch(b.setValidation(e[r]),e[r].rules&&""!==e[r].rules&&-1<e[r].rules.indexOf("custom_validation")&&-1===e[r].rules.indexOf("callback_custom_validation")&&(e[r].rules=e[r].rules.replace(/custom_validation\b/g,"callback_custom_validation")),o[r]={},o[r].name=e[r].name,o[r].display=e[r].display,o[r].rules=e[r].rules,e[r].type){case"text":u=document.createElement("textarea");break;case"html":case"captcha":u=document.createElement("div");break;case"password":(u=document.createElement("input")).type="password";break;case"hidden":(u=document.createElement("input")).type="hidden",u.value=e[r].value||"";break;case"option":var u=document.createElement("select"),p=document.createElement("option");if(p.appendChild(document.createTextNode("-- select --")),p.setAttribute("value",""),u.appendChild(p),null==e[r].DataSource&&null!=e[r].options){for(var d=0;d<e[r].options.length;d++){var m=document.createElement("option");m.setAttribute("value",e[r].options[d].value),"country"===e[r].name&&m.setAttribute("value",e[r].options[d].value+"|"+e[r].options[d].text),m.appendChild(document.createTextNode(e[r].options[d].text)),u.appendChild(m)}P.defaultOptionField[e[r].name]&&(u.value=P.defaultOptionField[e[r].name])}break;case"multi":(u=document.createElement("input")).type="checkbox";break;case"email":(u=document.createElement("input")).type="email";break;case"button":(u=document.createElement("input")).type="button",u.value=e[r].display;break;case"image":(u=document.createElement("img")).src=e[r].value,u.type="image";break;default:(u=document.createElement("input")).type="text"}if(e[r].title&&(u.title=e[r].title),e[r].disabled&&(u.disabled=e[r].disabled),b.setAttribute(e[r],u),e[r].placeholder&&(u.placeholder=e[r].placeholder),e[r].value&&("multi"===e[r].type?u.checked=!0:u.value=e[r].value),"html"===e[r].type){var g=document.createElement("div");if(g.setAttribute("class",n+"-form-element-content content-"+i+e[r].name),g.innerHTML=e[r].html,e[r].event&&P.util.addEvent(e[r].event,g,e[r].eventCallback),"consent"===e[r].name)for(var f=g.getElementsByTagName("input"),h=0;h<f.length;h++)f[h].setAttribute("id",i+l+"-"+f[h].name);t.appendChild(g)}else if("captcha"===e[r].type){g=document.createElement("div");g.setAttribute("class",n+"-form-element-content content-"+i+e[r].name),g.innerHTML=e[r].html,P.options.formValidationMessage&&((v=document.createElement("div")).setAttribute("id","validation-"+i+l+"-"+e[r].name),v.setAttribute("class",n+"validation-message validation-"+i+e[r].name),g.appendChild(v)),t.appendChild(g)}else{if(u.setAttribute("name",e[r].name),"registration"===l&&(e[r].name&&("phoneid"===e[r].name.toLowerCase()||"phone"===e[r].name.toLowerCase())&&P.options.existPhoneNumber&&P.util.addEvent("blur",u,function(e){var t,o;o=a,""!==(t=e).target.value.trim()&&E.checkPhoneNumberAvailabilityController("phone="+t.target.value,function(e){e.IsExist?-1!==t.target.parentNode.getAttribute("class").indexOf("phoneid")&&(t.target.parentNode.childNodes[2].innerHTML="phone already exists, enter unique phone number"):-1!==t.target.parentNode.getAttribute("class").indexOf("phoneid")&&(t.target.parentNode.childNodes[2].innerHTML="")},o)}),e[r].name)&&"username"===e[r].name.toLowerCase()&&P.options.existUsername&&P.util.addEvent("blur",u,function(e){var t,o;o=a,""!==(t=e).target.value.trim()&&E.checkUserNameAvailabilityController("username="+t.target.value,function(e){e.IsExist?-1!==t.target.parentNode.getAttribute("class").indexOf("username")&&(t.target.parentNode.childNodes[2].innerHTML="username already exists, enter unique username"):-1!==t.target.parentNode.getAttribute("class").indexOf("username")&&(t.target.parentNode.childNodes[2].innerHTML="")},o)}),"emailid"===e[r].name&&P.util.addEvent("keyup",u,function(e){32===e.keyCode&&(this.value=this.value.trim())}),u.setAttribute("id",i+l+"-"+e[r].name),e[r].event&&P.util.addEvent(e[r].event,u,e[r].eventCallback),P.eventsName[u.id]){var y=P.eventsName[u.id];if(P.util.isArray(y))for(var C=0;C<y.length;C++)y[C].event&&y[C].eventCallback&&P.util.addEvent(y[C].event,u,y[C].eventCallback);else P.util.addEvent(y.event,u,y.eventCallback)}if("hidden"===e[r].type)t.appendChild(u);else if("button"===e[r].type){var v=document.createElement("div");v.setAttribute("class",n+"-form-element-content content-"+i+e[r].name),v.appendChild(u),t.appendChild(v)}else{var T=document.createElement("label"),w=(T.setAttribute("for",i+l+"-"+e[r].name),T.innerHTML=e[r].display,u.setAttribute("class",n+e[r].type+" "+i+e[r].name),e[r].rules&&-1!==e[r].rules.indexOf("required")&&(u.className+=" lr-required"),document.createElement("div"));if(w.setAttribute("class",n+"-form-element-content content-"+i+e[r].name),"multi"===e[r].type?(w.appendChild(u),w.appendChild(T)):(w.appendChild(T),w.appendChild(u)),e[r].style&&0<e[r].style.length)for(var S=0;S<e[r].style.length;S++)w.style[e[r].style[S].key]=e[r].style[S].value;if(P.options.formValidationMessage&&((T=document.createElement("div")).setAttribute("id","validation-"+i+l+"-"+e[r].name),T.setAttribute("class",n+"validation-message validation-"+i+e[r].name),w.appendChild(T)),P.options.displayPasswordStrength&&("password"===u.name||"newpassword"===u.name)&&("registration"===l||"resetpassword"===l||"setpassword"===l||"changepassword"===l||"socialRegistration"===l||"loginRequiredFieldsUpdate"===l)){P.options.passwordLength&&P.options.passwordLength.min,P.options.passwordLength&&P.options.passwordLength.max;if(e[r].rules)for(var L=e[r].rules.split("|"),k=0;k<L.length;k++)-1<L[k].indexOf("min_length")?L[k].substring(11,L[k].length-1):-1<L[k].indexOf("max_length")&&L[k].substring(11,L[k].length-1);var T=document.createElement("meter"),R=(T.setAttribute("max","4"),T.setAttribute("id",l+"-password-strength-meter"),document.createElement("div"));R.setAttribute("id",l+"-password-strength-text"),u.parentNode.appendChild(T),u.parentNode.appendChild(R),c=function(){var e,t={0:"worst",1:"bad",2:"weak",3:"good",4:"strong",5:"secure"},o={0:"#dd514c",1:"orange",2:"yellow",3:"#5eb95e",4:"blue",5:"violet"},n={0:"Worst",1:"Bad",2:"Weak",3:"Good",4:"Strong",5:"Secure"},i=[],a=P.passwordMeterConfiguration;for(e in t)a[e]&&a[e].case?a[e].case.toLowerCase()===t[e]&&i.push({color:a[e].color||o[e],Message:a[e].message||n[e]}):i.push({color:o[e],Message:n[e]});return i}(),P.util.addEvent("keyup",u,s)}t.appendChild(w)}}}},b.setToken=function(e){LRNameSpace.cookies.setItem(LoginRadiusDefaults.tokenCookie,e,"",P.options.appPath)},b.resetGoogleCaptcha=function(e,t){P.options.optionalRecaptchaConfiguration&&P.options.optionalRecaptchaConfiguration.IsEnabled&&"registration"!==e&&(e=P.util.elementById(t,!0))&&""!==e.innerHTML&&(window.hcaptcha&&P.options.hCaptchaSiteKey?window.hcaptcha.reset(window[t+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&grecaptcha.reset(window[t+"lr_recaptcha_widgets_idprefix"]))},b.createForm=function(e,u,t,p,d,m,o){var n,i,g=m||LoginRadiusDefaults.idPrefix,f=m||LoginRadiusDefaults.classPrefix,o=o||u;if(P.LRPrefix=m+"##"+LoginRadiusDefaults.idPrefix,"registration"!==u&&"oneTouchLogin"!==u&&("Captcha"===P.options.loginLockedType||P.options.optionalRecaptchaConfiguration&&P.options.optionalRecaptchaConfiguration.IsEnabled)&&(i=P.options.optionalRecaptchaConfiguration.Apis,"Captcha"===P.options.loginLockedType&&LoginRadiusDefaults.captchaActions.includes(u.toLowerCase())||i&&L(o,i))&&(n=m+LoginRadiusDefaults.idPrefix+"recaptcha_widget_"+u.toLowerCase(),P.util.addRecaptchaJS(),P.util.captchaSchema(n,e)),P.$hooks.call("beforeFormRender",u,e),LoginRadiusDefaults.isRegFormSchemaLock=!1,LoginRadiusDefaults.isSecurityFormSchemaLock=!1,P.options.apiKey){if(b.setCustomLabel(e),b.setPlaceholder(e),b.setCustomTitle(e),0<e.length){var a,s,r=[],h=document.createElement("form"),l=(h.setAttribute("name",g+u),h.setAttribute("method","POST"),b.createFormFields(e,h,u,r,f,g,d),document.createElement("input")),c=P.buttonsName[u.toLowerCase()]||T[u.toLowerCase()],y=T[u.toLowerCase()].toLowerCase().replace(/ /g,"-"),C=(l.type="submit",P.options.isPINAuthentication&&"loginRequiredFieldsUpdate"===u&&P.util.findInSchema(e,"name","pin")?l.value="Continue":l.value=c,l.id=g+"submit-"+y,l.setAttribute("class",f+"submit submit-"+g+y),P.options.disableButtonOnsubmit&&(P.$hooks.register("eventCalls",function(e){window.lrpasswordlessloginotp||window.lrpasswordlesslogin||(a=e)}),P.$hooks.register("startProcess",function(e){a===u&&(l.disabled=!0)}),P.$hooks.register("xhrEndWithError",function(e){a===u&&(l.disabled=!1)}),P.$hooks.register("xhrEndWithSuccess",function(e){a===u&&P.options.enableSubmitOnSuccess&&(l.disabled=!1)})),h.appendChild(l),P.options.passwordlessLogin&&"login"===u&&S("passwordlessloginbuttonlabel",h,l,g,f),P.options.passwordlessLoginOTP&&"login"===u&&S("passwordlessLoginOTPButtonLabel",h,l,g,f),P.util.addHTMLContent(t,h,LoginRadiusDefaults.innerHTML),P.$hooks.call("afterFormRender",u,t,f,h),LoginRadiusDefaults.innerHTML=!1,new FormValidator(g+u,r,function(e,t){var o=document.getElementsByTagName("form"),n="";if(o[g+u])n=o[g+u];else if("object"==typeof o)for(var i=0;i<o.length;i++)if(o[i].name===g+u){n=o[i];break}P.currentLRContainer=n.parentElement.id,P.$hooks.call("eventCalls",u,f),P.mergeFormErrors&&0<P.mergeFormErrors.length&&(e=P.util.mergeObjects(e,P.mergeFormErrors));for(var a=P.util.elementsByClass(f+"validation-message"),s=0;s<a.length;s++)a[s].innerHTML="";var r=m+g+"recaptcha_widget",l=(r+="_"+u.toLowerCase(),P.util.elementById(r+"_tencent"));if(P.options.invisibleRecaptcha&&(window.onCaptchaSubmit=function(e){var t=P.util.serialize(h);window.grecaptcha&&-1===t.indexOf("g-recaptcha-response")&&(t+="&g-recaptcha-response="+e),window.hcaptcha&&P.options.hCaptchaSiteKey&&-1===t.indexOf("h-captcha-response")&&(t+="&h-captcha-response="+e),p(t),window.hcaptcha&&P.options.hCaptchaSiteKey?window.hcaptcha.reset(window[r+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&grecaptcha.reset(window[r+"lr_recaptcha_widgets_idprefix"])}),l&&"none"!==l.style.display&&(P.options.tencentCaptcha||P.options.tencentCaptchaAsFallback&&!window.grecaptcha)&&0==e.length&&l.click(),0<e.length){P.$hooks.call("afterValidation",u);for(var c=0;c<e.length;c++)if("login"===u&&(P.options.passwordlessLogin&&window.lrpasswordlesslogin||P.options.passwordlessLoginOTP&&window.lrpasswordlessloginotp)){if(1===e.length||P.options.v2Recaptcha||P.options.hCaptchaSiteKey&&!P.options.invisibleRecaptcha){if(e[c].Id===g+""+u+"-password")return w(h,p,r,u),!0;if("g-recaptcha-response"===e[c].Id)return w(h,p,r,u),!0}}else P.options.formValidationMessage&&"resettoken"!==e[c].Name&&(P.util.elementById("validation-"+g+u+"-"+e[c].Name).innerHTML=e[c].Message);P.options.formValidationMessage||(d(e),b.resetGoogleCaptcha(u,r))}else w(h,p,r,u);t&&t.preventDefault?t.preventDefault():event&&(event.returnValue=!1)}));if(P.validationMessages&&0<P.validationMessages.length)for(var v=0;v<P.validationMessages.length;v++)C.setMessage(P.validationMessages[v].rule,P.validationMessages[v].message),"valid_date"!==P.validationMessages[v].rule&&"callback_valid_date"!==P.validationMessages[v].rule||(s=P.validationMessages[v].message);C.registerCallback("valid_date",function(e){return o=(e=e).split("/"),-1!==e.indexOf("-")&&(o=e.split("-")),e=parseInt(o[1],10),n=parseInt(o[0],10),!((o=parseInt(o[2],10))<1e3||3e3<o||0===n||12<n)&&(t=[31,28,31,30,31,30,31,31,30,31,30,31],(o%400==0||o%100!=0&&o%4==0)&&(t[1]=29),0<e)&&e<=t[n-1];var t,o,n}).setMessage("valid_date",s||"The %s field must contain a valid date."),C.registerCallback("custom_validation",function(e,t){t=(t=t.split("###")[0]).split("or").join("|");try{return new RegExp(t,"g").test(e)?!0:!1}catch(e){return P.log("Invalid custom validation regex expression"),!1}}).setMessage("custom_validation","The %s field is not valid."),P.Validator=C}}else P.log("API key must be set.");P.options.optionalRecaptchaConfiguration&&P.options.optionalRecaptchaConfiguration.IsEnabled&&i&&L(o,i)&&"registration"!==u&&P.util.renderV2Recaptcha(n,!0)},b.createConsentInterface=function(e,t){var o="";if(e){for(var n=0;n<e.ConsentForm.length;n++)if("Group"===e.ConsentForm[n].Type){if(e.ConsentForm[n].Consents.length){var i={consentGroupTitle:e.ConsentForm[n].Title,consentGroupDescription:e.ConsentForm[n].Description};o+=P.util.hashTmpl(LoginRadiusDefaults.templates.consentGroupTemplate,i);for(var a=0;a<e.ConsentForm[n].Consents.length;a++){var s={consentTitle:e.ConsentForm[n].Consents[a].Title,consentDescription:e.ConsentForm[n].Consents[a].Description,consentId:"consent_"+e.ConsentForm[n].Consents[a].ConsentId};o+=P.util.hashTmpl(LoginRadiusDefaults.templates.consentOptionTemplate,s)}}}else if("Consent"===e.ConsentForm[n].Type)for(var r=0;r<e.ConsentForm[n].Consents.length;r++){var l={consentTitle:e.ConsentForm[n].Consents[r].Title,consentDescription:e.ConsentForm[n].Consents[r].Description,consentId:"consent_"+e.ConsentForm[n].Consents[r].ConsentId};o+=P.util.hashTmpl(LoginRadiusDefaults.templates.consentOptionTemplate,l)}if(o+=P.util.hashTmpl(LoginRadiusDefaults.templates.consentMainTemplate,e),t){var c=document.createElement("div");c.innerHTML=o.trim();for(var u=0;u<t.length;u++){var p=c.querySelector('input[name="consent_'+t[u].ConsentOptionId+'"]');p&&p.setAttribute("checked","checked")}o=c.innerHTML||""}}return o},b.createConsentOptionInterface=function(e,t){var o="";if(e){for(var n in e){n={consentTitle:e[n].Title,consentDescription:e[n].Description,consentId:"consent_"+e[n].ConsentId,checked:!!e[n].checked};o+=P.util.hashTmpl(LoginRadiusDefaults.templates.consentOptionTemplate,n)}if(t){var i=document.createElement("div");i.innerHTML=o.trim();for(var a=0;a<t.length;a++)e[t[a].ConsentOptionId]&&i.querySelector('input[name="consent_'+t[a].ConsentOptionId+'"]').setAttribute("checked","checked");o=i.innerHTML||""}}return o},b.setConsentTemplate=function(){var e,t,o,n,i=document.getElementById(LoginRadiusDefaults.templates.consentMainTemplate);i&&((e=document.createElement("div")).innerHTML=i.innerHTML,i.append(e),(t=document.createElement("script")).type="text/html",t.id=LoginRadiusDefaults.templates.consentOptionTemplate,t.innerHTML=this.decodeHtml(document.getElementById(LoginRadiusDefaults.templates.consentOptionTemplate).innerHTML),(o=document.getElementById(LoginRadiusDefaults.templates.consentGroupTemplate))&&(n=o.querySelectorAll("#"+LoginRadiusDefaults.templates.consentOptionTemplate)[0])&&n.remove(),(n=document.createElement("script")).type="text/html",n.id=LoginRadiusDefaults.templates.consentGroupTemplate,n.innerHTML=this.decodeHtml(o.innerHTML),o.remove(),i.innerHTML=this.decodeHtml(e.innerHTML),e.remove(),document.body.append(n),document.body.append(t))},b.consentValidation=function(e,t){var o=P.util.parseQueryString(e),n=[];if(t){if(P.consentOptions[t]&&P.consentOptions[t].ConsentForm)for(var i=P.consentOptions[t].ConsentForm,a=0;a<i.length;a++)var s=i[a],n="Group"===s.Type?b.setConsentValidation(s,o,n,!0):b.setConsentValidation(s,o,n)}else{var r,l={Type:"Consent",Consents:[]};for(r in P.consentsList)l.Consents.push(P.consentsList[r]);n=b.setConsentValidation(l,o,n)}return n},b.setConsentValidation=function(e,t,o,n){var i=!1;if(n&&e.IsRequiredAtleastOne&&0===e.Consents.length)o.push({Id:e.GroupId,Name:e.Title,Message:"In "+e.Title+" group should have at least one consent"});else{for(var a=0;a<e.Consents.length;a++)n&&e.IsRequiredAtleastOne&&"true"===t["consent_"+e.Consents[a].ConsentId]&&(i=!0),e.Consents[a].IsRequired&&"true"!==t["consent_"+e.Consents[a].ConsentId]&&o.push({Id:e.Consents[a].ConsentId,Name:e.Consents[a].Title,Message:e.Consents[a].Title+" consent is required"});e.IsRequiredAtleastOne&&!i&&o.push({Id:e.GroupId,Name:e.Title,Message:"In "+e.Title+" group at least one consent is required"})}return o},b.isValidToken=function(e,t){return!!e||(t([b.setMappedMessage(h.tokenValid)]),!1)},b.decodeHtml=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},b.checkForLatestPrivacyPolicy=function(e){for(var t=P.options.privacyPolicyConfiguration.PrivacyPolicies,o=(new Date).getTime(),n={},i=0;i<t.length;i++)new Date(t[i].StartDateTime).getTime()<o&&(P.util.isEmpty(n)||!P.util.isEmpty(n)&&new Date(n.StartDateTime).getTime()<new Date(t[i].StartDateTime).getTime())&&(n=t[i]);return n.Version===e.PrivacyPolicy.Version},b.sanitizePinData=function(e){var e=Object.assign({},e),t={PIN:"",Skipped:null};return e.hasOwnProperty("pin")&&e.pin?t.PIN=e.pin:t.Skipped=!0,delete e.pin,e.PINInfo=t,e},b.sanitizeSecurityQuesData=function(e){var t,o=P.util.parseQueryString(e),n={},i=["email","username","phone","password","pin","phoneApi"];for(t in o)-1===i.indexOf(t)&&(n[t]=o[t],delete o[t]);return o.securityanswer=n,o},b.loadQRCodeScript=function(e){var t;P.options.isCrossDeviceSSOEnabled&&((t=document.createElement("script")).src=LoginRadiusDefaults.externalLibrary+"qrcode.js",t.type="text/javascript",t.onload=function(){e()},document.getElementsByTagName("head")[0].appendChild(t))},b.resendOTPHandler=function(t){let e="";var o,n;t.voiceotp&&(e="&isvoiceotp=true"),"update2FANumberResendOTP"===t.action?(o=P.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),(n=P.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName))&&!P.LRCheckLogin?P.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apiKey="+P.options.apiKey+"&access_token="+n+"&smsTemplate="+t.smstemplate+e,t.data,function(e){e.ErrorCode?t.onerror(b.loginRadiusErrorTojsError(e)):t.onsuccess(e,t.data)},"updatePhone"):o?(t.data.phone&&(t.data.phoneno2fa=t.data.phone),P.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/?apiKey="+P.options.apiKey+"&SecondFactorAuthenticationToken="+o+"&smsTemplate2FA="+t.smstemplate+e,t.data,function(e){e.ErrorCode?t.onerror(b.loginRadiusErrorTojsError(e)):t.onsuccess(e,t.data)},"login")):t.onerror([b.setMappedMessage(h.twofaTokenValid)])):"smartLoginResendOTP"===t.action?P.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/otp?apiKey="+P.options.apiKey+"&phone="+t.data+"&smsTemplate="+t.smstemplate+e,"",function(e){e.ErrorCode?t.onerror(b.loginRadiusErrorTojsError(e)):t.onsuccess(e)},"loginOTP"):"sendInstantSignInResendOtp"===t.action&&P.util.ajaxCall("GET",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/otp?apiKey="+P.options.apiKey+"&"+t.data+"&smsTemplate="+t.smstemplate+e,"",function(e){e.ErrorCode?t.onerror(b.loginRadiusErrorTojsError(e)):t.onsuccess(e)},"passwordlessLogin")},b.addResendOTPBtn=function(s,r,l){P.$hooks.register("afterFormRender",function(e,t,o,n){var i,a;s&&n&&"loginradius-twofaemailotp"===n.name&&(P.util.findInSchema(n,"id","loginradius-button-resendotp")||(i=P.util.getButtonAttribute("resendotp",o,function(e){P.options.disableResendOTPButton&&P.util.disableResendOTPButton(e),E.sendMFAEmailOTPController({EmailId:n[1].value},r,l,t,o,"resend")}),(a=P.util.findInSchema(n,"type","submit"))?a.parentNode.insertBefore(i,a.nextSibling):n.appendChild(i)))})}}function LoginRadiusControllers(k,R){var h=LoginRadiusDefaults.messages,P=this;function i(e,t,o,n,i){t?k.util.ajaxCall(e,LoginRadiusDefaults.apiDomain+"/auth/customobject/"+o+"?apiKey="+k.options.apiKey+"&access_token="+t+"&objectname="+k.options.customObjectName,"",function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):n(e)},"CustomObject"):i([R.setMappedMessage(h.twofaTokenValid)])}P.handleFeatures=function(e,t,o,n,i,a,s){var r,l,c,u,p=e.Profile;"string"!=typeof t&&(t=k.util.jsonToQueryString(t)),n&&k.options.periodicPasswordReset&&p.PasswordExpirationDate&&new Date(p.PasswordExpirationDate)<=new Date?(R.setPasswordRule(k.changePasswordFormSchema[1]),R.setPasswordRule(k.changePasswordFormSchema[2]),n(p,e)):o&&(k.options.askRequiredFieldForTraditionalLogin||LoginRadiusDefaults.autoFilledFieldforPasswordLesLogin||k.askPinOnLogin)?(n=p,p=e,r=t,o=o,l=i,c=a,k.storage.setBrowserStorage(LoginRadiusDefaults.storedTokenName,p.access_token),k.options.isPINAuthentication&&k.options.PINConfiguration.PINLogin&&p&&p.session_token&&k.setSessionToken(p),u=k.options,u=JSON.parse(JSON.stringify(u)).RegistrationFormSchema,n.IsDeleted?c(R.loginRadiusErrorTojsError(n)):(k.options.autoFilledFieldForTraditional&&k.$hooks.register("beforeFormRender",function(e,t){"loginRequiredFieldsUpdate"===e&&((e=k.util.findInSchema(t,"name","emailid"))&&e.value&&(e.disabled=!0),e=k.util.findInSchema(t,"name","phoneid"))&&e.value&&(e.disabled=!0)}),k.registrationFormSchema=R.mapSchema(u,n,k.options.autoFilledFieldForTraditional),0<k.registrationFormSchema.length?(R.setPasswordRule(k.util.findInSchema(u,"name","password")),R.setPasswordRule(k.util.findInSchema(u,"name","confirmpassword")),k.$hooks.call("registrationSchemaFilter",u,n),o(n,p,p.access_token,r,l,c)):R.loginHandleToken(p,r,l,c))):R.loginHandleToken(e,t,i,a,s)},P.verifyOTPController=function(t,e,o,n,i,a){var s=LoginRadiusDefaults.apiDomain+"/auth/phone/otp?apiKey="+k.options.apiKey+"&otp="+t.otp+"&smsTemplate="+k.options.smsTemplateWelcome;t.haveToken&&(s+="&access_token="+k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName)),t.onetouchloginflag&&(s=LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/phone/verify?apiKey="+k.options.apiKey+"&otp="+t.otp+"&smsTemplate="+k.options.smsTemplateOneTouchLoginWelcome),e={...e,...t},k.util.ajaxCall("put",s,e,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):t.onetouchloginflag&&!k.options.askRequiredFieldsOnPasswordLessLogin?R.loginHandleToken(e,"",o,n,"",!0):e.access_token?(LoginRadiusDefaults.autoFilledFieldforPasswordLesLogin=!0,P.handleFeatures(e,t,a,i,o,n)):o(e,t)},"verifyOTP")},P.updateSecurityQuestionController=function(e,t,o){for(var n=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),i=k.util.parseQueryString(e),a=0;a<k.options.securityQuestionsCount;a++)i[i["securityQuestion"+a]]=i["securityAnswer"+a],delete i["securityQuestion"+a],delete i["securityAnswer"+a];e={SecurityQuestionAnswer:i};R.isValidToken(n,o)&&k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account?apikey="+k.options.apiKey+"&access_token="+n,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"updateSecurityQuestion")},P.resetTwoFactorAuthenticationController=function(t,o,n){var e,i=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),a={};a[t]=!0,R.isValidToken(i,n)&&(e="/auth/account/2FA/authenticator","emailotpauthenticator"===t?(e="/auth/account/2fa/authenticator/otp/email",a={}):"sqauthenticator"===t&&(e="/auth/account/2fa/authenticator/securityquestionanswer",a={}),k.util.ajaxCall("delete",LoginRadiusDefaults.apiDomain+e+"?apikey="+k.options.apiKey+"&access_token="+i,a,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,t)},"resetTwoFactorAuthentication"))},P.forgotPasswordController=function(o,n,i,a,s){var e=k.options.forgotPasswordUrl||k.options.resetPasswordUrl;k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/password?apiKey="+k.options.apiKey+"&resetPasswordUrl="+e+"&emailTemplate="+k.options.resetPasswordEmailTemplate,o,function(e){var t;e.ErrorCode?a(R.loginRadiusErrorTojsError(e)):(t=k.util.parseQueryString(o),i(e,t),R.showOTPTemplateForm("ForgotPassword")&&R.resetPassword(n,i,a,s,t))},"forgotPassword")},P.forgotPINController=function(o,n,i,a,s){var e=k.util.parseQueryString(o).hasOwnProperty("username")?"username":"email",t=k.options.forgotPINUrl||k.options.resetPINUrl;k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/pin/forgot/"+e+"?apiKey="+k.options.apiKey+"&resetPINUrl="+t+"&emailTemplate="+k.options.resetPINEmailTemplate,o,function(e){var t;e.ErrorCode?a(R.loginRadiusErrorTojsError(e)):(t=k.util.parseQueryString(o),i(e,t),R.showOTPTemplateForm("ForgotPIN")&&R.resetPIN(n,i,a,s,t))},"forgotPIN")},P.loginController=function(o,n,i,a,s,r,l,c,u){k.options.verificationEmailTemplate=k.options.emailTemplate||k.options.verificationEmailTemplate;var e="emailTemplate="+k.options.verificationEmailTemplate+"&verificationUrl="+k.options.verificationUrl,e=(k.options.phoneLogin&&(e+="&smsTemplate="+k.options.smsTemplatePhoneVerification),k.options.riskBasedAuthentication&&(e=(e+="&RbaOneclickEmailTemplate="+k.options.rbaOneclickEmailTemplate+"&RbaOTPSmsTemplate="+k.options.rbaOTPSmsTemplate+"&RbaCityEmailTemplate="+k.options.rbaCityEmailTemplate+"&RbaCountryEmailTemplate="+k.options.rbaCountryEmailTemplate+"&RbaBrowserEmailTemplate="+k.options.rbaBrowserEmailTemplate+"&RbaIpEmailTemplate="+k.options.rbaIpEmailTemplate+"&RbaDeviceEmailTemplate="+k.options.rbaDeviceEmailTemplate+"&RbaCitySmsTemplate="+k.options.rbaCitySmsTemplate+"&RbaCountrySmsTemplate="+k.options.rbaCountrySmsTemplate)+"&RbaBrowserSmsTemplate="+k.options.rbaBrowserSmsTemplate+"&RbaIpSmsTemplate="+k.options.rbaIpSmsTemplate+"&RbaDeviceSmsTemplate="+k.options.rbaDeviceSmsTemplate),("string"==typeof(o=k.util.checkPhoneOrEmailLogin(o))||o instanceof String)&&(o=k.util.parseQueryString(o)),k.options.duplicateEmailWithUniqueUsername&&(delete o.email,delete o.phoneid),k.options.isB2BEnabled&&k.options.organizationObj&&k.options.organizationObj.Id&&(e+="&org_id="+k.options.organizationObj.Id),LoginRadiusDefaults.apiDomain+"/auth/login?apiKey="+k.options.apiKey+"&loginUrl="+k.options.loginUrl+"&"+e);o["g-recaptcha-response"]&&(e+="&g-recaptcha-response="+o["g-recaptcha-response"],delete o["g-recaptcha-response"]),o["h-captcha-response"]&&(e+="&h-captcha-response="+o["h-captcha-response"],delete o["h-captcha-response"]),o.qq_captcha_randstr&&(e+="&qq_captcha_randstr="+o.qq_captcha_randstr,delete o.qq_captcha_randstr),o.qq_captcha_ticket&&(e+="&qq_captcha_ticket="+o.qq_captcha_ticket,delete o.qq_captcha_ticket),k.util.ajaxCall("post",e,o,function(e){var t;k.options.stayLogin&&k.storage.setBrowserStorage("lr-rememberme",o.stayLogin),e.ErrorCode?("970"!=e.ErrorCode||k.options.verifyEmailByOTP?"1167"==e.ErrorCode&&(e.PhoneId||o.phone)?(delete o.email,o.phone=e.PhoneId||o.phone,P.loginOTPController(o,n,i,a,l,"no")):k.options.phoneLogin&&"1066"==e.ErrorCode&&(R.verifyOTP=c||R.verifyOTP,R.resendOTP=u||R.resendOTP,R.verifyOTP(o,n,i,a,l,s,r),R.resendOTP(o,n,i,a,l,k.options.isVoiceOtp,s,r)):R.otpEmailVerification(n,i,a,l,o),a(R.loginRadiusErrorTojsError(e))):(k.askPinOnLogin=!1,t=e.Profile,k.options.isPINAuthentication&&t&&(k.options.PINConfiguration.AskOnlyOnFirstLogin&&t.FirstLogin||k.options.PINConfiguration.AskOnLogin)&&(null!==t.PIN&&t.PIN.PIN||(k.askPinOnLogin=!0)),P.handleFeatures(e,o,r,s,i,a,l))},"login")},P.loginOTPController=function(e,o,n,i,a,t){var s,r,l=e=k.util.checkPhoneOrEmailLogin(e);(l="string"==typeof e||e instanceof String?k.util.parseQueryString(e):l).email||l.username?R.sendInstantSignInLink(e,n,i,o,a):(s=k.options.smsTemplateInstantOTPLogin||k.options.passwordlessLoginSMSTemplate,k.$hooks.register("beforeFormRender",function(e,t){k.util.findInSchema(t,"name","resendotp")||(t.push({type:"button",name:"resendotp",display:"Resend via SMS",rules:"",permission:"r",event:"click",eventCallback:function(e){k.options.disableResendOTPButton&&k.util.disableResendOTPButton(e);e={data:l.phone,onsuccess:n,onerror:i,smstemplate:s,action:"smartLoginResendOTP"};R.resendOTPHandler(e)}}),k.options.isVoiceOtp&&t.push({type:"button",name:"resendvoiceotp",display:"Resend via Voice call",rules:"",permission:"r",event:"click",eventCallback:function(e){k.options.disableResendOTPButton&&k.util.disableResendOTPButton(e);e={data:l.phone,onsuccess:n,onerror:i,smstemplate:s,voiceotp:!0,action:"smartLoginResendOTP"};R.resendOTPHandler(e)}}))}),r=function(){var e=k.otpSchema;R.createForm(e,"otp",o,function(e){var t=a+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp";P.verifyInstantOTP(e,l,n,i,t,o,a)},function(e){i(R.setMappedMessage(e))},a)},t?r():k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/otp?apiKey="+k.options.apiKey+"&phone="+l.phone+"&smsTemplate="+s,"",function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):(n(e),r())},"loginOTP"))},P.loginPINController=function(t,e,o,n,i,a,s,r){k.options.verificationEmailTemplate=k.options.emailTemplate||k.options.verificationEmailTemplate,("string"==typeof t||t instanceof String)&&(t=k.util.parseQueryString(t));r=LoginRadiusDefaults.apiDomain+"/auth/login/pin?apiKey="+k.options.apiKey+"&session_token="+r;k.util.ajaxCall("post",r,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):P.handleFeatures(e,t,s,a,o,n,i)},"login")},P.login2FAController=function(o,d,m,g,f,h,y,C,v,T){k.LRCheck2FA=!0,o=k.util.checkPhoneOrEmailLogin(o);var w=!1,S=!1,L=function(r,e){var t,o,n,i=e.IsOTPAuthenticatorVerified||"",l=e.IsGoogleAuthenticatorVerified||"",c=e.IsEmailOtpAuthenticatorVerified||"",u=e.IsSecurityQuestionAuthenticatorVerified||"",a=(null!==e.EmailOTPStatus||i||l||u||(S=!0),k.$hooks.register("afterFormRender",function(e,t,o,n){n&&k.LRCheck2FA&&(k.util.findInSchema(n,"id","loginradius-button-backupcodebackbutton")||(o=k.util.getButtonAttribute("backupcodebackbutton",o,function(){S=!0,L(r,r.SecondFactorAuthentication)}),n.appendChild(o)))}),k.util.getButtonAttribute("otpauthenticator",f)),p=!1,s=k.options.authenticatorOptionsOrder;for(t in s)s[t]&&("emailotp"===s[t]?function(){var a,s,e;k.options.emailOTPAuthentication&&(!l&&!i&&!u&&k.options.twoFactorAuthentication||c)&&r.SecondFactorAuthentication&&r.SecondFactorAuthentication.Email&&r.SecondFactorAuthentication.Email.length&&(w=!0,a=r.SecondFactorAuthentication.Email)&&(s=function(e){R.addResendOTPBtn(w,m,g),S||u||l||i?P.sendMFAEmailOTPController({EmailId:e},m,g,d,f):R.verifyOTP({mfaEmailToken:!0,EmailId:e},d,m,g,f)},LoginRadiusDefaults.innerHTML=!0,e=k.util.getButtonAttribute("emailotp",f,function(e){if(1<a.length){LoginRadiusDefaults.innerHTML=!1;for(var t,o=[],n=0;n<a.length;n++)a[n]&&((t={}).text=a[n],t.value=a[n],o.push(t));var i={type:"option"};i.options=o,i.name="sendemailotp",i.rules="required",i.display="Select email to send verification code",R.createForm([i],"mfaselectemails",d,function(e){e=k.util.parseQueryString(e),s(e.sendemailotp)})}else r.SecondFactorAuthentication.Email&&r.SecondFactorAuthentication.Email[0]&&s(r.SecondFactorAuthentication.Email[0])}),k.util.addHTMLContent(d,e,p),p=!0)}():"sms"===s[t]?(n=void 0,k.options.smsOTPAuthentication&&(!u&&!c&&!l&&k.options.twoFactorAuthentication||i)?r.SecondFactorAuthentication.OTPPhoneNo?(k.util.addHTMLContent(d,a,p),p=!0):k.options.googleAuthentication||k.options.emailOTPAuthentication||k.options.securityQuestionAuthentication?(n=k.util.getButtonAttribute("otpauthenticator",f,function(){LoginRadiusDefaults.innerHTML=!1,R.updatePhoneNumber=C||R.updatePhoneNumber,R.updatePhoneNumber(d,m,g,f,"",h,y)}),k.util.addHTMLContent(d,n,p),p=!0):(R.updatePhoneNumber=C||R.updatePhoneNumber,R.updatePhoneNumber(d,m,g,f,"",h,y)):(u||l||c||!k.options.twoFactorAuthentication)&&(!k.options.optionalTwoFactorAuthentication||i||u||l||c||""===r.SecondFactorAuthentication.OTPPhoneNo||null==r.SecondFactorAuthentication.OTPPhoneNo)&&!i||(f=f||LoginRadiusDefaults.classPrefix,n=document.getElementsByName(f+"showQRcode")[0],k.options.googleAuthentication&&n&&n.appendChild(a))):"securityquestion"===s[t]?(n=void 0,k.options.securityQuestionAuthentication&&(!c&&!l&&!i&&k.options.twoFactorAuthentication||u)&&(n=k.util.getButtonAttribute("securityquestionsauthenticator",f,function(){LoginRadiusDefaults.innerHTML=!1,R.showMFASecurityQuestions(r.SecondFactorAuthentication,d,m,g,f,h,y)}),k.util.addHTMLContent(d,n,p),p=!0)):"googleauth"===s[t]&&(o=void 0,k.options.googleAuthentication)&&(!c&&!i&&!u&&k.options.twoFactorAuthentication||l)&&(o=k.util.getButtonAttribute("googleauthenticator",f,function(){LoginRadiusDefaults.innerHTML=!1,R.showQRCode(r,d,m,g,f,h,y)}),k.util.addHTMLContent(d,o,p),p=!0));(u||c||i||l)&&(e=k.util.getButtonAttribute("backupcodebutton",f),k.util.addHTMLContent(d,e,p),k.util.addEvent("click",e,function(e){var t,o,n,i,a;LoginRadiusDefaults.innerHTML=!1,t=m,o=g,n=f,i=h,a=y,R.createForm(k.backupCodeFormSchema,"backupcode",d,function(e){P.backupCodeController(e,t,o,i,a)},function(e){o(e)},n)})),k.util.addEvent("click",a,function(e){var t="phoneNo2FA="+r.SecondFactorAuthentication.OTPPhoneNo;LoginRadiusDefaults.innerHTML=!1,w=!1,(u||l||c||S)&&R.resendOTPManually(t,m,g,f,k.options.isVoiceOtp),r.phone=r.SecondFactorAuthentication.OTPPhoneNo,R.verifyOTP=v||R.verifyOTP,R.resendOTP=T||R.resendOTP,R.verifyOTP(r,d,m,g,f,h,y),R.resendOTP(r,d,m,g,f,k.options.isVoiceOtp,h,y)})},e=LoginRadiusDefaults.apiDomain+"/auth/login/2FA/",t=(k.options.verificationEmailTemplate=k.options.emailTemplate||k.options.verificationEmailTemplate,"post"),n=window.lrbackupcode?(e=e+"backupcode?apiKey="+k.options.apiKey+"&"+o,t="get",""):(e=e+"?apiKey="+k.options.apiKey+"&loginUrl="+k.options.loginUrl+"&emailTemplate="+k.options.verificationEmailTemplate+"&verificationUrl="+k.options.verificationUrl+"&smsTemplate="+k.options.smsTemplateWelcome+"&smsTemplate2FA="+k.options.smsTemplate2FA+"&EmailTemplate2FA="+k.options.EmailTemplate2FA,k.util.parseQueryString(o));k.util.ajaxCall(t,e,n,function(e){var t;k.options.stayLogin&&k.storage.setBrowserStorage("lr-rememberme",k.util.getQueryParameterByName("stayLogin",o)),e.ErrorCode?(k.options.phoneLogin&&"1066"==e.ErrorCode&&(t="phone="+k.util.getQueryParameterByName("phone",o),t+="&noPhoneVerified=false",k.options.optionalTwoFactorAuthentication=!1,k.options.twoFactorAuthentication=!1,R.verifyOTP=v||R.verifyOTP,R.resendOTP=T||R.resendOTP,R.verifyOTP(t,d,m,g,f,h,y),R.resendOTP(t,d,m,g,f,k.options.isVoiceOtp,h,y)),g(R.loginRadiusErrorTojsError(e))):(e.SecondFactorAuthentication?(k.storage.setBrowserStorage(LoginRadiusDefaults.storedTwoFAToken,e.SecondFactorAuthentication.SecondFactorAuthenticationToken),k.storage.setBrowserStorage(LoginRadiusDefaults.storedOTPAuth,e.SecondFactorAuthentication.IsOTPAuthenticatorVerified),"00000000-0000-0000-0000-000000000000"===e.access_token&&(L(e,e.SecondFactorAuthentication),delete e.access_token,m(e,o))):P.handleFeatures(e,o,y,h,m,g,f),k.lrApiFramework&&m(e))},"login")},P.resendOTPController=function(e,t,o,n,i){let a="";i&&(a="&isvoiceotp=true");var s=e.updatePhone?k.options.smsTemplateUpdatePhone:k.options.smsTemplatePhoneVerification,s=LoginRadiusDefaults.apiDomain+"/auth/phone/otp?apiKey="+k.options.apiKey+"&smsTemplate="+s+a;e.onetouchloginflag&&("string"!=typeof e&&(e=k.util.jsonToQueryString(e)),s=LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/phone?apikey="+k.options.apiKey+"&"+e+"&smstemplate="+k.options.smsTemplatePhoneVerification+a),k.util.ajaxCall("post",s,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):(k.log(h.otpSent),t(e))},i?"resendvoiceotp":"resendOTP")},P.resendOTP2FAController=function(e,t,o,n,i){var a=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),s=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);let r=i?"&isvoiceotp=true":"";s&&!k.LRCheckLogin?k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apiKey="+k.options.apiKey+"&access_token="+s+"&smsTemplate="+k.options.smsTemplate2FA+r,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):(k.log(h.otpSent),t(e))},i?"resendvoiceotp":"resendOTP"):a?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/resend?apiKey="+k.options.apiKey+"&SecondFactorAuthenticationToken="+a+"&smsTemplate2FA="+k.options.smsTemplate2FA+r,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):k.log(h.otpSent)},i?"resendvoiceotp":"resendOTP"):o([R.setMappedMessage(h.twofaTokenValid)])},P.verify2FAOTPController=function(t,o,n,i,a){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),s=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),r=!1,l=(t&&"string"==typeof t&&(r=-1!==t.indexOf("mfaEmailToken=true")),k.util.parseQueryString(t)),c=r?"twofaemailotp":"twofaotp",u="otp";r?(u="otp/email",l.emailid=l.email,delete l.email):"googleAuthenticatorCode"in l&&(u="googleauthenticatorcode"),e&&!k.LRCheckLogin?k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2fa/verification/"+u+"?apiKey="+k.options.apiKey+"&access_token="+e,l,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,t)},"verifyOTP##"+c):s?(r="",k.options.riskBasedAuthentication&&(r=(r+="&RbaOneclickEmailTemplate="+k.options.rbaOneclickEmailTemplate+"&RbaOTPSmsTemplate="+k.options.rbaOTPSmsTemplate+"&RbaCityEmailTemplate="+k.options.rbaCityEmailTemplate+"&RbaCountryEmailTemplate="+k.options.rbaCountryEmailTemplate+"&RbaBrowserEmailTemplate="+k.options.rbaBrowserEmailTemplate+"&RbaIpEmailTemplate="+k.options.rbaIpEmailTemplate+"&RbaDeviceEmailTemplate="+k.options.rbaDeviceEmailTemplate+"&RbaCitySmsTemplate="+k.options.rbaCitySmsTemplate+"&RbaCountrySmsTemplate="+k.options.rbaCountrySmsTemplate)+"&RbaBrowserSmsTemplate="+k.options.rbaBrowserSmsTemplate+"&RbaIpSmsTemplate="+k.options.rbaIpSmsTemplate+"&RbaDeviceSmsTemplate="+k.options.rbaDeviceSmsTemplate),"otp"===u&&(r+="&smsTemplate2FA="+k.options.smsTemplate2FAWelcome),k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/2fa/verification/"+u+"?apiKey="+k.options.apiKey+"&SecondFactorAuthenticationToken="+s+r,l,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):P.handleFeatures(e,t,a,i,o,n)},"verifyOTP##"+(c="googleauthenticatorcode"===u?"showqrcode":c))):n([R.setMappedMessage(h.twofaTokenValid)])},P.backupCodeController=function(t,o,n,i,a){var e,s,r=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken);r?(e=k.util.parseQueryString(t),s="",k.options.riskBasedAuthentication&&(s=(s+="&RbaOneclickEmailTemplate="+k.options.rbaOneclickEmailTemplate+"&RbaOTPSmsTemplate="+k.options.rbaOTPSmsTemplate+"&RbaCityEmailTemplate="+k.options.rbaCityEmailTemplate+"&RbaCountryEmailTemplate="+k.options.rbaCountryEmailTemplate+"&RbaBrowserEmailTemplate="+k.options.rbaBrowserEmailTemplate+"&RbaIpEmailTemplate="+k.options.rbaIpEmailTemplate+"&RbaDeviceEmailTemplate="+k.options.rbaDeviceEmailTemplate+"&RbaCitySmsTemplate="+k.options.rbaCitySmsTemplate+"&RbaCountrySmsTemplate="+k.options.rbaCountrySmsTemplate)+"&RbaBrowserSmsTemplate="+k.options.rbaBrowserSmsTemplate+"&RbaIpSmsTemplate="+k.options.rbaIpSmsTemplate+"&RbaDeviceSmsTemplate="+k.options.rbaDeviceSmsTemplate),k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/verification/backupcode?apiKey="+k.options.apiKey+"&SecondFactorAuthenticationToken="+r+"&smsTemplate2FA="+k.options.smsTemplate2FAWelcome+s,e,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):P.handleFeatures(e,t,a,i,o,n)},"login")):n([R.setMappedMessage(h.twofaTokenValid)])},P.checkPhoneNumberAvailabilityController=function(e,t,o){k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/phone?apiKey="+k.options.apiKey+"&"+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"checkPhone")},P.update2FAPhoneNumberController=function(t,o,n,i,a,s,r,l,c){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),u=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);u&&!k.LRCheckLogin?k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apiKey="+k.options.apiKey+"&access_token="+u+"&smsTemplate="+k.options.smsTemplate2FA,t,function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):(R.verifyOTP=l||R.verifyOTP,R.resendOTP=c||R.resendOTP,R.verifyOTP(t,o,n,i,a,s,r),R.resendOTP(t,o,n,i,a,k.options.isVoiceOtp,s,r),n(e,t))},"updatePhone"):e?k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/?apiKey="+k.options.apiKey+"&SecondFactorAuthenticationToken="+e+"&smsTemplate2FA="+k.options.smsTemplate2FA,t,function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):(n(e,t),R.verifyOTP=l||R.verifyOTP,R.resendOTP=c||R.resendOTP,R.verifyOTP(t,o,n,i,a,s,r),R.resendOTP(t,o,n,i,a,k.options.isVoiceOtp,s,r))},"login"):i([R.setMappedMessage(h.twofaTokenValid)])},P.updatePhoneNumberController=function(t,o,n,i,a,s,r,l,c){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);R.isValidToken(e,i)&&k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/phone?apiKey="+k.options.apiKey+"&access_token="+e+"&smsTemplate="+k.options.smsTemplateUpdatePhone,t,function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):(R.verifyOTP=l||R.verifyOTP,R.resendOTP=c||R.resendOTP,R.verifyOTP(t+"&haveToken=true",o,n,i,a,s,r),R.resendOTP(t+"&updatePhone=true",o,n,i,a,k.options.isVoiceOtp,s,r,!0),n(e,t))},"updatePhone")},P.resetPasswordByPhoneController=function(t,o,n,e,i){k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/otp?apiKey="+k.options.apiKey+"&smsTemplate="+k.options.smsTemplateWelcome,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):k.options.loginOnPasswordReset&&e.Data&&e.Data.access_token?R.loginHandleToken(e.Data,"",o,n):o(e,t)},"resetPassword")},P.resetPINByPhoneController=function(t,o,n,e,i){k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/pin/reset/otp/phone?apiKey="+k.options.apiKey+"&smsTemplate="+k.options.smsTemplateWelcome,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,t)},"resetPIN")},P.forgotPasswordbyPhoneController=function(t,o,n,i,a,e,s){let r=e?"&isvoiceotp=true":"";k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/password/otp?apiKey="+k.options.apiKey+"&smsTemplate="+k.options.smsTemplateForgot+r,t,function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):(n(e,t),(s||R.resetPassword)(o,n,i,a))},"forgotPassword")},P.forgotPINbyPhoneController=function(t,o,n,i,a,e,s){let r=e?"&isvoiceotp=true":"";k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/pin/forgot/otp?apiKey="+k.options.apiKey+"&smsTemplate="+k.options.smsTemplateForgot+r,t,function(e){e.ErrorCode?i(R.loginRadiusErrorTojsError(e)):(n(e,t),(s||R.resetPIN)(o,n,i,a))},"forgotPIN")},P.registrationController=function(n,i,a,s,r,e,l,c){k.LRCheckRegistration=!0;var t=n,e=(k.lrApiFramework||(t=R.mapRegistrationSchema(e,n)),k.options.welcomeEmailTemplate),o=k.util.getHashParam("welcomeemailtemplate"),o="emailTemplate="+k.options.verificationEmailTemplate+"&verificationUrl="+k.options.verificationUrl+"&welcomeEmailTemplate="+(e=o?o:e),e=(k.options.phoneLogin&&(o+="&smsTemplate="+k.options.smsTemplatePhoneVerification),k.options.preventVerificationEmail&&(o+="&options=PreventVerificationEmail"),k.util.getHashParam("invitation")),u="",e=((u=e&&k.options.isB2BEnabled?e.trim():u)&&(o+="&invitation="+u),"");k.options.isCaptchaEnabled||k.options.v2Recaptcha||k.options.invisibleRecaptcha||k.options.tencentCaptcha?e=LoginRadiusDefaults.apiDomain+"/auth/register/captcha?apiKey="+k.options.apiKey+"&"+o:k.options.sott?(e=LoginRadiusDefaults.apiDomain+"/auth/register?apiKey="+k.options.apiKey+"&"+o,k.options.enableHeaderSott?(k.options.sott=decodeURIComponent(k.options.sott),t.sottcheck=!0):e+="&sott="+k.util.encodedString(k.options.sott)):k.options.vNextUX?k.log("SOTT commonOption is missing in configuration. You can use a static SOTT generated from Admin Console or create it at run-time using the API. For more details on SOTT generation, please refer to https://www.loginradius.com/docs/api/v2/customer-identity-api/sott-usage/."):k.log("url is not set as sott option is not defined"),""!==e&&k.util.ajaxCall("post",e,t,function(t){var o,e;(t=t&&k.util.isObject(t)?k.util.keyslowerToUpperCamelCase(t):t).ErrorCode?1049===t.ErrorCode?(k.options.vNextUX&&(h.invalidSott="An error occurred, please refresh the page to proceed with registration."),s([R.setMappedMessage(h.invalidSott)]),k.log(t.Description)):s(R.loginRadiusErrorTojsError(t)):(o=function(e){e.push({type:"button",name:"skip",display:"Skip",rules:"",permission:"r",event:"click",eventCallback:function(e){R.loginHandleToken(t,n,a,s)}})},k.options.phoneLogin&&("string"==typeof n||n instanceof String)&&-1!==n.indexOf("phoneid")?(-1===k.util.findInSchema(k.registrationFormSchema,"name","phoneid").rules.indexOf("required")&&k.$hooks.register("beforeFormRender",function(e,t){"otp"!==e||k.util.findInSchema(t,"name","skip")||o(t)}),R.verifyOTP=l||R.verifyOTP,R.resendOTP=c||R.resendOTP,R.verifyOTP(n,i,a,s,r),R.resendOTP(n,i,a,s,r,k.options.isVoiceOtp)):(e=k.util.parseQueryString(n),k.options.disabledEmailVerification||k.options.optionalEmailVerification||u?(t.Data&&(delete(t=t.Data).Data,delete t.IsPosted),k.options.askRequiredFieldForTraditionalLogin=!1,!k.options.disabledEmailVerification&&R.showOTPTemplateForm("Registration")?(k.$hooks.register("beforeFormRender",function(e,t){"otp"!==e||k.util.findInSchema(t,"name","skip")||o(t)}),R.otpEmailVerification(i,function(e){e.access_token||R.loginHandleToken(t,n,a,s)},s,r,e)):R.loginHandleToken(t,n,a,s)):(a(t,e),R.showOTPTemplateForm("Registration")&&R.otpEmailVerification(i,a,s,r,e))))},"registration")},P.periodicalPasswordRestController=function(e,t,o,n,i,a){k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/change?apiKey="+k.options.apiKey+"&access_token="+i.access_token,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):R.loginHandleToken(i,a,t,o)},"periodicPassword")},P.changePasswordController=function(t,o,n){k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/change?apiKey="+k.options.apiKey+"&access_token="+k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,k.util.parseQueryString(t))},"changePassword")},P.changePINController=function(t,o,n){k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/pin/change?apiKey="+k.options.apiKey+"&access_token="+k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,k.util.parseQueryString(t))},"changePIN")},P.resendEmailVerificationController=function(t,o,n){k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/register?apiKey="+k.options.apiKey+"&verificationUrl="+k.options.verificationUrl+"&emailTemplate="+k.options.verificationEmailTemplate,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(o(e,k.util.parseQueryString(t)),R.showOTPTemplateForm("Registration")&&k.currentLRContainer&&R.otpEmailVerification(k.currentLRContainer,o,n,"",t))},"resendVerificationEmail")},P.addEmailController=function(t,o,n){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);R.isValidToken(e,n)&&k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+k.options.apiKey+"&access_token="+e+"&verificationUrl="+k.options.verificationUrl+"&emailTemplate="+k.options.addEmailTemplate,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(o(e,k.util.parseQueryString(t)),R.showOTPTemplateForm("AddEmail")&&R.otpEmailVerification(k.currentLRContainer,o,n,"",t))},"addEmail")},P.removeEmailController=function(t,o,n){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);R.isValidToken(e,n)&&k.util.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+k.options.apiKey+"&access_token="+e,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,k.util.parseQueryString(t))},"removeEmail")},P.changeUsernameController=function(t,o,n){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);R.isValidToken(e,n)&&k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/username?apiKey="+k.options.apiKey+"&access_token="+e,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,k.util.parseQueryString(t))},"changeUsername")},P.resetPasswordController=function(t,o,n,e,i){t+="&welcomeEmailTemplate="+k.options.welcomeEmailTemplate+"&ResetPasswordEmailTemplate="+k.options.resetPasswordConfirmationEmailTemplate,k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/reset?apiKey="+k.options.apiKey,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):k.options.loginOnPasswordReset&&e.Data&&e.Data.access_token?R.loginHandleToken(e.Data,"",o,n):o(e,k.util.parseQueryString(t))},"resetPassword")},P.resetPINController=function(t,o,n,e,i){var a=k.util.parseQueryString(t),s="";s=a.hasOwnProperty("resettoken")?LoginRadiusDefaults.apiDomain+"/auth/pin/reset/token?apiKey="+k.options.apiKey:(a=a.hasOwnProperty("username")?"username":"email",LoginRadiusDefaults.apiDomain+"/auth/pin/reset/otp/"+a+"?apiKey="+k.options.apiKey),t+="&welcomeEmailTemplate="+k.options.welcomeEmailTemplate+"&ResetPINEmailTemplate="+k.options.resetPINConfirmationEmailTemplate,k.util.ajaxCall("put",s,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,k.util.parseQueryString(t))},"resetPIN")},P.emailVerificationController=function(e,t,o,n,i,a){var s,r,l,c="get";e?(s=LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+k.options.apiKey+"&welcomeEmailTemplate="+k.options.welcomeEmailTemplate,r="",a?(c="put",r=e):s+="&verificationtoken="+e+"&url="+k.options.verificationUrl,(l="##otp")===(l=k.options.verifyEmailByOTP?"":l)&&(k.currentActionOptions||(k.currentActionOptions={}),k.currentActionOptions.otp={},k.currentActionOptions.otp.onSuccess=t||function(){},k.currentActionOptions.otp.onError=o||function(){},k.currentActionOptions.otp.classPrefix=i||""),("string"!=typeof e&&e.oneClickSignIn||"string"==typeof e&&-1!==e.indexOf("oneClickSignIn=true"))&&k.options.templateVerificationTypes&&"OTP"===k.options.templateVerificationTypes.OneClickSignin?R.passwordlessLoginVerification(e,t,o,i,!0):k.util.ajaxCall(c,s,r,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):k.options.loginOnEmailVerification?null==e.Data?t(e):e.Data&&e.Data.access_token?R.loginHandleToken(e.Data,"",t,o):e.Data&&t(e):k.options.logoutOnVerifyEmail?R.logout(t(e)):t(e)},"verifyEmail"+l)):o(a?[h.notFound]:[h.vTokenError])},P.deleteUserConfirmController=function(e,t,o){e?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/delete?apiKey="+k.options.apiKey+"&deletetoken="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"deleteUserConfirm"):o([h.vTokenError])},P.checkEmailAvailabilityController=function(e,t,o){k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+k.options.apiKey+"&"+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"checkEmail")},P.checkUserNameAvailabilityController=function(e,t,o){k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/username?apiKey="+k.options.apiKey+"&"+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"checkUsername")},P.resetPasswordBySecurityQuestionController=function(t,o,n){var e=R.sanitizeSecurityQuesData(t);k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/securityanswer/?apikey="+k.options.apiKey,e,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):k.options.loginOnPasswordReset&&e.Data&&e.Data.access_token?R.loginHandleToken(e.Data,"",o,n):o(e,t)},"resetPasswordBySecurityQuestion")},P.resetPINBySecurityQuestionController=function(t,o,n){var e=R.sanitizeSecurityQuesData(t),i=e.hasOwnProperty("email")?"email":e.hasOwnProperty("phone")?"phone":"username";k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/pin/reset/securityanswer/"+i+"?apikey="+k.options.apiKey,e,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,t)},"resetPINBySecurityQuestion")},P.getSecurityQuestionsController=function(e,t,o){var n="/auth/securityquestion/";-1!==e.indexOf("username")?n+="username?apiKey=":-1!==e.indexOf("phone")?n+="phone?apiKey=":n+="email?apiKey=",k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+n+k.options.apiKey+"&"+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(function(e){for(var t=[],o=0;o<e.length;o++){var n={};k.options.maskSensitiveInput?n.type="password":n.type="string",n.name=e[o].QuestionId,n.display=e[o].Question,n.rules="required",n.permission="r",t.push(n)}return t}(e))},"securityQuestion")},P.getBackupCodeController=function(e,t,o){e?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA/backupcode?apikey="+k.options.apiKey+"&access_token="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"backupCode"):o([R.setMappedMessage(h.twofaTokenValid)])},P.resetBackupCodeController=function(e,t,o){e?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA/backupcode/reset?apikey="+k.options.apiKey+"&access_token="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"backupCode"):o([R.setMappedMessage(h.twofaTokenValid)])},P.getSocialDataController=function(e,t,o,n,i){e?(n+="?access_token="+e,k.util.ajaxCall("get",LoginRadiusDefaults.socialApiDomain+(n=i?n+"&"+i:n),"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"socialAPI")):o([R.setMappedMessage(h.twofaTokenValid)])},P.postSocialDataController=function(e,t,o,n,i,a){e?(n+="?access_token="+e,k.util.ajaxCall("post",LoginRadiusDefaults.socialApiDomain+(n=i?n+"&"+i:n),a,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"socialAPI")):o([R.setMappedMessage(h.twofaTokenValid)])},P.createCustomObjectController=function(e,t,o,n){e?k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/customobject?apiKey="+k.options.apiKey+"&access_token="+e+"&objectname="+k.options.customObjectName,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e)},"createCustomObject"):n([R.setMappedMessage(h.twofaTokenValid)])},P.getCustomObjectByIdController=function(e,t,o,n){i("get",e,t,o,n)},P.getCustomObjectsController=function(e,t,o){e?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/customobject?apiKey="+k.options.apiKey+"&access_token="+e+"&objectname="+k.options.customObjectName,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"getCustomObject"):o([R.setMappedMessage(h.twofaTokenValid)])},P.updateCustomObjectController=function(e,t,o,n,i,a){e?k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/customobject/"+t+"?apiKey="+k.options.apiKey+"&access_token="+e+"&objectname="+k.options.customObjectName+(n?"&updatetype="+n:""),o,function(e){e.ErrorCode?a(R.loginRadiusErrorTojsError(e)):i(e)},"updateCustomObject"):a([R.setMappedMessage(h.twofaTokenValid)])},P.deleteCustomObjectController=function(e,t,o,n){i("delete",e,t,o,n)},P.updateData=function(e,r,l,c,u,p,d,t,o){var m=e.Profile||e.Data,g=l,f=(k.lrApiFramework||(g=R.mapRegistrationSchema(d,l,m)),k.options.isPINAuthentication&&!k.options.PINConfiguration.AskOnRegistration&&(g=R.sanitizePinData(g)),e.access_token);o=o||k.setHostedToken,t=t||"updateData",k.options.verificationEmailTemplate=k.options.emailTemplate||k.options.verificationEmailTemplate,0<Object.keys(g).length?k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+k.options.apiKey+"&access_token="+f+"&verificationUrl="+k.options.verificationUrl+"&emailTemplate="+k.options.verificationEmailTemplate,g,function(s){s.ErrorCode?u(R.loginRadiusErrorTojsError(s)):function(e){var t=g.emailid||g.email,o=g.phone||g.phoneid,n=k.util.findInSchema(d,"name","phoneid"),n=n&&-1!==n.rules.indexOf("required"),i=k.util.findInSchema(d,"name","emailid"),i=i&&-1!==i.rules.indexOf("required"),a=(k.storage.setBrowserStorage(LoginRadiusDefaults.storedUidName,m.Uid),k.util.parseQueryString(window.location.search.replace("?","")));(void 0===o||o)&&m.PhoneIdVerified&&void 0===t||(void 0===t||t)&&m.EmailVerified&&void 0===o||(o&&!n||void 0===o)&&(k.options.disabledEmailVerification||k.options.optionalEmailVerification)?t&&!m.EmailVerified&&a.return_url&&-1!==a.return_url.toLowerCase().indexOf("/saml/")?u([R.setMappedMessage(h.emailNotVerified)]):(delete s.IsPosted,s.access_token=f,e(),LoginRadiusDefaults.isSSOInitFired&&R.setToken(f)):o&&m&&!m.PhoneIdVerified?((n=new SetLoginRadiusCommonFunctions(k)).verifyOTP(l,r,c,u,p),n.resendOTP(l+"&noPhoneVerified=false",r,c,u,p),k.options.isVoiceOtp&&n.resendOTP(l+"&noPhoneVerified=false",r,c,u,p,!0)):!t||!i||m.EmailVerified||k.options.disabledEmailVerification||k.options.optionalEmailVerification?e():u([R.setMappedMessage(h.emailNotVerified)])}(o?function(){e.Data=e.Profile,delete e.Profile,s.Data&&(e.Data=s.Data),R.loginHandleToken(e,l,c,u)}:function(){s.Data&&(s.Profile=s.Data,delete s.Data,delete s.IsPosted),s.access_token?R.loginHandleToken(s,l,c,u):c(s,k.util.parseQueryString(l))})},t):R.loginHandleToken(e,l,c,u)},P.oneTouchLoginController=function(t,s,o,n,r,e,i,a){function l(o,e,n,t,i,a){R.createForm(k.registrationFormSchema,"loginRequiredFieldsUpdate",s,function(e){var t={};t.Profile=o,t.access_token=n,P.updateData(t,s,e,i,a,r,k.registrationFormSchema,"login",!0)},function(e){a(R.setMappedMessage(e))})}var c,u,p=k.util.checkPhoneOrEmailLogin(t),d=p&&"string"!=typeof p?p:k.util.parseQueryString(p),e=(e||k.log("Captcha should be enabled for one touch login"),"");d.phone?(u=LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/phone?apikey="+k.options.apiKey+"&smstemplate="+k.options.smsTemplateOneTouchLogin,e=Object.assign({},d),k.util.ajaxCall("POST",u,e,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(o(e,t),R.verifyOTP=i||R.verifyOTP,R.resendOTP=a||R.resendOTP,R.verifyOTP(p+"&onetouchloginflag=true",s,o,n,r,"",l),R.resendOTP(p+"&onetouchloginflag=true",s,o,n,r,k.options.isVoiceOtp,"",l))},"oneTouchLogin")):(c=k.util.randomString(16),u=k.options.noRegistrationEmailTemplate||k.options.onetouchLoginEmailTemplate,u=LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/email?apikey="+k.options.apiKey+"&onetouchloginemailtemplate="+u+"&welcomeemailtemplate="+k.options.welcomeEmailTemplate+"&redirectUrl="+k.options.onetouchLoginRedirectUrl,e=Object.assign({},d,{clientGuid:c}),k.util.ajaxCall("POST",u,e,function(e){var t;e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):e.IsPosted&&(o(e),t=function(e){k.options.askRequiredFieldsOnPasswordLessLogin?(LoginRadiusDefaults.autoFilledFieldforPasswordLesLogin=!0,P.handleFeatures(e,p,l,"",o,n)):R.loginHandleToken(e,"",o,n,"",!0)},R.showOTPTemplateForm("NoRegistrationPasswordlessLogin")?(d.onetouchlogin=!0,R.otpEmailVerification(s,function(){R.pingForSmartLogin(c,t,n)},n,r,d)):R.pingForSmartLogin(c,t,n))},"oneTouchLogin"))},P.smartLoginController=function(e,t,o){var n=k.util.randomString(16),i=k.options.autoLoginRedirectUrl||k.options.smartLoginRedirectUrl,a=k.options.autoLoginEmailTemplate||k.options.smartLoginEmailTemplate;k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/smartlogin?apikey="+k.options.apiKey+"&"+e+"&clientGuid="+n+"&smartloginemailtemplate="+a+"&welcomeemailtemplate="+k.options.welcomeEmailTemplate+"&redirectUrl="+i,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):e.IsPosted&&(t(e),R.pingForSmartLogin(n,function(e){R.loginHandleToken(e,"",t,o)},o))},"smartLogin")},P.verifyInstantOTP=function(t,e,o,n,i,a,s){e="phone="+e.phone+"&"+t;k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/otp/verify?apiKey="+k.options.apiKey+"&smsTemplate="+k.options.smsTemplateWelcome,e,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):R.loginHandleToken(e,t,o,n)},"login##otp")},P.socialLoginReceiveToken=function(s,r,l,c,u,p,e,t){k.currentLRContainer=r,k.options.verificationEmailTemplate=k.options.emailTemplate||k.options.verificationEmailTemplate,k.storage.setBrowserStorage(LoginRadiusDefaults.storedTokenName,s);var d,m;function o(e){var t,o,n,i,a;k.LRCheckLogin=!0,e.IsDeleted?c([R.setMappedMessage(h.blockedUser)]):((t={}).Profile=e,t.access_token=s,R.setPasswordRule(k.util.findInSchema(m,"name","password")),R.setPasswordRule(k.util.findInSchema(m,"name","confirmpassword")),o=!1,k.options.autoFilledFieldForSocial&&(o=!0,k.$hooks.register("beforeFormRender",function(e,t){"socialRegistration"===e&&((e=k.util.findInSchema(t,"name","emailid"))&&e.value&&(e.disabled=!0),e=k.util.findInSchema(t,"name","phoneid"))&&e.value&&(e.disabled=!0)})),k.registrationFormSchema=R.mapSchema(m,e,o),k.$hooks.call("registrationSchemaFilter",m,e),o=k.storage.getBrowserStorage("LRTraditionalLogin"),k.storage.removeBrowserStorage("LRTraditionalLogin"),0<k.registrationFormSchema.length&&!o?r?(k.$hooks.call("socialLoginFormRender"),R.createForm(k.registrationFormSchema,"socialRegistration",r,function(e){P.updateData(t,r,e,l,c,u,k.registrationFormSchema,"socialLogin")},function(e){c(e)},u)):p(s,k.registrationFormSchema,e):(n=(o=(o=k.util.findInSchema(d,"name","phoneid"))&&-1!==o.rules.indexOf("required"))?!!e.PhoneIdVerified:e.PhoneIdVerified,a=(i=(i=k.util.findInSchema(d,"name","emailid"))&&-1!==i.rules.indexOf("required"))?!!e.EmailVerified:e.EmailVerified,(!n&&o||!a&&i)&&(!n&&o||!k.options.disabledEmailVerification&&!k.options.optionalEmailVerification)?null==e.Email||e.EmailVerified?(a={phone:e.PhoneId},c([R.setMappedMessage(h.phoneNotVerified)],a),P.resendOTPController(a,function(){k.socialLoginFlag=!0,R.verifyOTP("phone="+e.PhoneId,r,l,c,u),R.resendOTP("phone="+e.PhoneId+"&noPhoneVerified=false",r,l,c,u,k.options.isVoiceOtp)},c,u)):c([R.setMappedMessage(h.emailNotVerified)]):(k.storage.setBrowserStorage(LoginRadiusDefaults.storedUidName,e.Uid),LoginRadiusDefaults.isSSOInitFired&&R.setToken(s),R.loginHandleToken(t,"",l,c))))}e=e&&0<e.length?e:k.options.RegistrationFormSchema,d=e,m=JSON.parse(JSON.stringify(d)),t?o(t):k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+k.options.apiKey+"&access_token="+s+"&verificationUrl="+k.options.verificationUrl+"&emailTemplate="+k.options.verificationEmailTemplate+"&welcomeEmailTemplate="+k.options.welcomeEmailTemplate,"",function(e){e.ErrorCode?(k.storage.removeBrowserStorage(LoginRadiusDefaults.storedOrganization),k.storage.removeBrowserStorage(LoginRadiusDefaults.storedTokenName),c(R.loginRadiusErrorTojsError(e))):o(e)},"socialLogin")},P.accountLinkingReceiveToken=function(e,t,o){k.options.noCallbackForSocialLogin||k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/socialidentity?apiKey="+k.options.apiKey+"&access_token="+k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"candidatetoken="+e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"linkAccount")},P.validateToken=function(e,t,o){e?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/access_token/Validate?apikey="+k.options.apiKey+"&access_token="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"validateToken"):o([R.setMappedMessage(h.twofaTokenValid)])},P.invalidateToken=function(e,t,o){e?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/access_token/InValidate?apikey="+k.options.apiKey+"&access_token="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"invalidateToken"):o([R.setMappedMessage(h.twofaTokenValid)])},P.updatePrivacyPolicy=function(o,n,i,a,s,r,l){k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/privacypolicy/accept?apikey="+k.options.apiKey+"&access_token="+o,"",function(e){var t;e.ErrorCode?a(R.loginRadiusErrorTojsError(e)):(s?t=e:((t=n.Data||{}).access_token=o,t.Profile=e,t.Profile=Object.assign({},t.Profile,{IsLatestPrivacyPolicy:!0})),t.Profile&&("email"===t.Profile.RegistrationProvider.toLowerCase()?R.loginHandleToken(t,"",i,a):P.socialLoginReceiveToken(o,r,i,a,l)))},"updatePrivacyPolicy")},P.configurePINController=function(e,t,o,n,i,a){k.util.ajaxCall("POST",LoginRadiusDefaults.apiDomain+"/auth/pin/set/pinauthtoken?apikey="+k.options.apiKey+"&pinauthtoken="+e,t,function(e){e&&e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):e&&e.Profile&&("email"===e.Profile.RegistrationProvider.toLowerCase()?R.loginHandleToken(e,"",o,n):P.socialLoginReceiveToken(e.access_token,i,o,n,a))},"pinSetup")},P.pinReauthController=function(e,t,o,n){var i=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);i&&k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/reauth/pin?apiKey="+k.options.apiKey+"&access_token="+i,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"pinreauthentication")},P.customEventConsentController=function(e,t,o,n){var i=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);i&&k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/consent/profile?apiKey="+k.options.apiKey+"&access_token="+i,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"customeventconsent")},P.submitConsentController=function(e,t,o,n,s,r,i){e&&k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/consent/?apiKey="+k.options.apiKey+"&consenttoken="+e,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):e&&e.Profile&&("email"===e.Profile.RegistrationProvider.toLowerCase()?P.handleFeatures(e,"",function(o,e,n,t,i,a){R.createForm(k.registrationFormSchema,"loginRequiredFieldsUpdate",s,function(e){var t={};t.Profile=o,t.access_token=n,P.updateData(t,s,e,i,a,r,k.registrationFormSchema,"login",!0)},function(e){a(R.setMappedMessage(e))})},"",o,n,r):P.socialLoginReceiveToken(e.access_token,s,o,n,r,"","",e.Profile))},i=i||"submitconsent")},P.verifyConsentController=function(e,t,o){var n=e.isCustom||!1,i=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);i&&k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/consent/verify?apiKey="+k.options.apiKey+"&access_token="+i+"&event="+e.event+"&isCustom="+n,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"verifyconsent")},P.consentLogsController=function(t,o){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);e&&k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/consent/logs?apiKey="+k.options.apiKey+"&access_token="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"cosentlogs")},P.updateConsentController=function(e,t,o){var n=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);n&&k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/consent/?apiKey="+k.options.apiKey+"&access_token="+n,e,function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"updateconsent")},P.sendMFAEmailOTPController=function(t,o,n,i,a,s){var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),r=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);r&&!k.LRCheckLogin?k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2fa/otp/email?apiKey="+k.options.apiKey+"&access_token="+r+"&EmailId="+t.EmailId+"&EmailTemplate2FA="+k.options.EmailTemplate2FA,"",function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(s||(t.mfaEmailToken=!0,R.verifyOTP(t,i,o,n,a)),o(e,t))},"sendMFAEmailOTP"):e?k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/login/2fa/otp/email?apiKey="+k.options.apiKey+"&secondfactorauthenticationtoken="+e+"&EmailTemplate2FA="+k.options.EmailTemplate2FA,t,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(s||(t.mfaEmailToken=!0,R.verifyOTP(t,i,o,n,a)),o(e,t))},"sendMFAEmailOTP"):n([R.setMappedMessage(h.twofaTokenValid)])},P.submitMFASecurityQuestionsController=function(t,o,n,i,a){for(var e=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),s=k.util.parseQueryString(t),r=[],l=0;l<k.options.securityQuestionsCount;l++)r.push({QuestionId:s["securityQuestion"+l],Answer:s["securityAnswer"+l]});k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/2fa/securityquestionanswer?apiKey="+k.options.apiKey+"&secondfactorauthenticationtoken="+e,{SecurityQuestionAnswer:r},function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(k.LRCheck2FA=!1,P.handleFeatures(e,t,a,i,o,n))},"submitMFASecurityQuestionsController")},P.verifyMFASecurityQuestionsController=function(t,o,n,i,a){var e,s=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),r=[];for(e in l=k.util.parseQueryString(t))"setsecurityquestions"!==e&&r.push({QuestionId:e,Answer:l[e]});var l={SecurityQuestionAnswer:r},c="";k.options.riskBasedAuthentication&&(c=(c+="&RbaOneclickEmailTemplate="+k.options.rbaOneclickEmailTemplate+"&RbaOTPSmsTemplate="+k.options.rbaOTPSmsTemplate+"&RbaCityEmailTemplate="+k.options.rbaCityEmailTemplate+"&RbaCountryEmailTemplate="+k.options.rbaCountryEmailTemplate+"&RbaBrowserEmailTemplate="+k.options.rbaBrowserEmailTemplate+"&RbaIpEmailTemplate="+k.options.rbaIpEmailTemplate+"&RbaDeviceEmailTemplate="+k.options.rbaDeviceEmailTemplate+"&RbaCitySmsTemplate="+k.options.rbaCitySmsTemplate+"&RbaCountrySmsTemplate="+k.options.rbaCountrySmsTemplate)+"&RbaBrowserSmsTemplate="+k.options.rbaBrowserSmsTemplate+"&RbaIpSmsTemplate="+k.options.rbaIpSmsTemplate+"&RbaDeviceSmsTemplate="+k.options.rbaDeviceSmsTemplate),k.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/login/2fa/verification/securityquestionanswer?apiKey="+k.options.apiKey+"&secondfactorauthenticationtoken="+s+c,l,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):(k.LRCheck2FA=!1,P.handleFeatures(e,t,a,i,o,n))},"verifyMFASecurityQuestionsController")},P.verifyMFASecurityQuestionsByAccessTokenController=function(t,o,n,e,i){var a=k.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),s={};if(t){var s=k.util.parseQueryString(t),r=[];if(i)for(var l in s)r.push({QuestionId:l,Answer:s[l]});else for(var c=0;c<k.options.securityQuestionsCount;c++)r.push({QuestionId:s["securityQuestion"+c],Answer:s["securityAnswer"+c]});s={SecurityQuestionAnswer:r}}s.ReplaceSecurityQuestionAnswer=!e,k.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2fa/securityquestionanswer?apiKey="+k.options.apiKey+"&access_token="+a,s,function(e){e.ErrorCode?n(R.loginRadiusErrorTojsError(e)):o(e,t)},"verifyMFASecurityQuestionsController")},P.oneTouchLoginVerify=function(e,t,o){var n=LoginRadiusDefaults.apiDomain+"/auth/email/smartlogin?apiKey="+k.options.apiKey+"&welcomeEmailTemplate="+k.options.welcomeEmailTemplate;k.util.ajaxCall("get",n+="&verificationtoken="+e,"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):t(e)},"oneTouchLoginVerify")},P.oneTouchLoginEmailVerification=function(e,t,o,n){e&&k.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/email/"+(n?"onetouchlogin":"smartlogin")+"?apiKey="+k.options.apiKey+"&verificationtoken="+e+"&welcomeEmailTemplate="+k.options.welcomeEmailTemplate+(n?"&email="+n:""),"",function(e){e.ErrorCode?o(R.loginRadiusErrorTojsError(e)):n?t(e):R.loginHandleToken(e,"",t,o)},"smartlogin")}}var LoginRadiusV2=function(o){this.global=window;var h=this,y=new SetLoginRadiusCommonFunctions(h),C=new LoginRadiusControllers(h,y),a=LoginRadiusDefaults.buttonNames,v=LoginRadiusDefaults.messages,T=LoginRadiusDefaults._uuidFormat,e=hash.get("lr-token");try{e&&window.opener&&window.opener.html5passToken&&(window.opener.html5passToken(e),document.write("<style type='text/css'>body { display: none !important; } </style>"),hash.remove("lr-token"),window.close())}catch(e){}var e=new LRNameSpace.Utilities,w=(h.util=new LoginRadiusUtility(h,o),h.storage=new LRNameSpace.Storage(h,LoginRadiusDefaults),h.util=Object.assign(e,h.util,h.storage));function i(s,i,a,r){function t(e,o){y.createForm(e,o,s,function(n){var e,t;h.LRCheckLogin=!0,window.lrpasswordlesslogin?y.sendInstantSignInLink(n,(e,t)=>{y.showOTPTemplateForm("OneClickSignin")&&y.otpEmailVerification(s,i,a,r,t),i(e)},a,s,r):window.lrpasswordlessloginotp?y.sendInstantSignInOtp(n,i,a,s,r):(e=function(o,e,n,t,i,a){y.createForm(h.registrationFormSchema,"loginRequiredFieldsUpdate",s,function(e){var t={};t.Profile=o,t.access_token=n,C.updateData(t,s,e,i,a,r,h.registrationFormSchema,"login",!0)},function(e){a(y.setMappedMessage(e))})},t=function(t,o){y.createForm(h.changePasswordFormSchema,"changepassword",s,function(e){C.periodicalPasswordRestController(e,i,a,t,o,n)},function(e){a(e)})},h.options.twoFactorAuthentication||h.options.optionalTwoFactorAuthentication?C.login2FAController(n,s,i,a,r,t,e):"pinLogin"===o?C.loginPINController(n,s,i,a,r,t,e,l):C.loginController(n,s,i,a,t,e,r))},function(e){a(y.setMappedMessage(e))},r)}var o,e=w.getHashParam("vtoken"),n=w.getHashParam("vtype"),l=h.getSessionToken();h.currentLRContainer=s,"oneclicksignin"!==n&&"passwordlesslogin"!==n||h.passwordlessLoginFlag||(h.passwordlessLoginFlag=!0,y.passwordlessLoginVerification(e,i,a,r)),o=h.loginFormSchema,h.loginAction=!0,k(o),o=JSON.parse(JSON.stringify(function(e){if(h.options.stayLogin){for(var t=!0,o=0;o<e.length;o++)"stayLogin"===e[o].name&&(t=!1);t&&e.push({type:"multi",name:"stayLogin",display:"Remember me",rules:null,permission:"w"})}return e}(o))),y.setPasswordRule(o[1],h.loginAction),!h.passwordlessLoginFlag&&!h.options.twoFactorAuthentication&&!h.options.optionalTwoFactorAuthentication&&h.options.isPINAuthentication&&h.options.PINConfiguration&&h.options.PINConfiguration.PINLogin&&l?(n=h.pinLoginFormSchema.slice(),e=Object.assign({},h.defaultBtnSchema,{name:"backtologinform",display:LoginRadiusDefaults.buttonNames.pinloginbackbtn,eventCallback:function(e){t(o,"login")}}),n.push(e),h.loginAction=!0,o.rules="required",t(n,"pinLogin")):t(o,"login")}function S(t,o,n,i,a){h.$hooks.call("registrationSchemaFilter",a);var e,s=i+LoginRadiusDefaults.idPrefix+"recaptcha_widget_registration";if(h.options.isConsentManagementEnabled||w.captchaSchema(s,a),h.options.privacyPolicyConfiguration.IsEnabled&&((e=h.privacyPolicySchema.slice())[0].rules="Strict"===h.options.privacyPolicyConfiguration.Mode?"required":"",a.push(e[0])),h.options.isPINAuthentication&&h.options.PINConfiguration.AskOnRegistration)y.setPINRule(w.findInSchema(a,"name","pin")),y.setPINRule(w.findInSchema(a,"name","confirmpin"));else{for(var r=[],l=0;l<a.length;l++)"pin"!==a[l].name&&"confirmpin"!==a[l].name&&r.push(a[l]);a=r}a.push({type:"html",name:"termsandcondition",html:h.options.termsAndConditionHtml||""}),y.setPasswordRule(w.findInSchema(a,"name","password")),y.setPasswordRule(w.findInSchema(a,"name","confirmpassword")),h.registrationFormSchema=a,h.options.isConsentManagementEnabled?h.getConsentConfiguration(function(e){e=y.createConsentInterface(e.Register);""!==e&&a.push({html:e,name:"consent",type:"html"}),w.captchaSchema(s,a),c(a,t,o,n,s,i,!0),w.renderV2Recaptcha(s,!0)}):(c(a,t,o,n,s,i,!1),w.renderV2Recaptcha(s,!0))}function c(o,n,i,a,s,r,l){var e=h.util.getHashParam("invitation"),t=h.util.getHashParam("email");e&&h.options.isB2BEnabled&&(e=h.util.findInSchema(o,"name","emailid"))&&t&&(e.value=t.trim(),e.disabled=!0),y.createForm(o,"registration",n,function(e){var t=[];0<(t=l?y.consentValidation(e,"Register"):t).length?a(t):C.registrationController(e,n,function(e,t){window.hcaptcha&&h.options.hCaptchaSiteKey&&!h.options.invisibleRecaptcha?window.hcaptcha.reset(window[s+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&h.options.v2Recaptcha&&grecaptcha.reset(window[s+"lr_recaptcha_widgets_idprefix"]),i(e,t)},function(e){window.hcaptcha&&h.options.hCaptchaSiteKey&&!h.options.invisibleRecaptcha?window.hcaptcha.reset(window[s+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&h.options.v2Recaptcha&&grecaptcha.reset(window[s+"lr_recaptcha_widgets_idprefix"]),a(e)},r,o)},function(e){window.hcaptcha&&h.options.hCaptchaSiteKey&&!h.options.invisibleRecaptcha?window.hcaptcha.reset(window[s+"lr_recaptcha_widgets_idprefix"]):window.grecaptcha&&h.options.v2Recaptcha&&grecaptcha.reset(window[s+"lr_recaptcha_widgets_idprefix"]),a(e)},r)}function s(n,i,a,s){function t(e){var t=w.getHashParam("vtoken");if(h.options.verifyEmailByOTP){var o={};(o=e?w.mergeOptions(o,w.parseQueryString(e)):o).otp=t;try{o.email=w.getQueryParameterByName("email").replace(/ /g,"+"),C.emailVerificationController(o,n,i,a,s,!0)}catch(e){h.log(e)}}else C.emailVerificationController(t,n,i,a,s)}a&&"Captcha"===h.options.loginLockedType&&(h.$hooks.register("afterFormRender",function(e,t,o,n){n&&"loginradius-verifyemail"===n.name&&"loginradius-submit-verify"===n[0].id&&(n[0].style.display="none")}),y.createForm([],"verifyemail",a,function(e){t(e)},function(e){i(e)},s)),t()}function l(e,t,o){o=o||w.getHashParam("vtoken");C.deleteUserConfirmController(o,e,t)}function L(p,d,m,e){function g(){h.options.optionalTwoFactorAuthentication||h.options.twoFactorAuthentication?w.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apikey="+h.options.apiKey+"&access_token="+h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"",function(r){h.$hooks.register("afterFormRender",function(e,t,o,n){n&&h.LRCheck2FA&&(h.util.findInSchema(n,"id","loginradius-button-backupcodebackbutton")||(o=h.util.getButtonAttribute("backupcodebackbutton",o,function(){g()}),n.appendChild(o)))}),h.LRCheck2FA=!0;var e,t,o=h.LRCheckLogin=!1;if(r.ErrorCode)m(y.loginRadiusErrorTojsError(r));else{h.storage.setBrowserStorage(LoginRadiusDefaults.storedOTPAuth,r.IsOTPAuthenticatorVerified),h.storage.setBrowserStorage(LoginRadiusDefaults.storedGAAuth,r.IsGoogleAuthenticatorVerified),h.storage.setBrowserStorage(LoginRadiusDefaults.storedEmailOTPAuth,r.IsEmailOtpAuthenticatorVerified),h.storage.setBrowserStorage(LoginRadiusDefaults.storedSQAuth,r.IsSecurityQuestionAuthenticatorVerified);var n,i=h.storage.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth),l=h.storage.getBrowserStorage(LoginRadiusDefaults.storedGAAuth),c=h.storage.getBrowserStorage(LoginRadiusDefaults.storedSQAuth),a=h.storage.getBrowserStorage(LoginRadiusDefaults.storedEmailOTPAuth),s=r.IsOTPAuthenticatorVerified,u=h.options.authenticatorOptionsOrder;for(n in u)u[n]&&("emailotp"===u[n]?function(){var a,s,e;h.options.emailOTPAuthentication&&r.Email&&r.Email.length&&(r.IsEmailOtpAuthenticatorVerified?(("false"!==i||"false"!==l||"false"!==c)&&h.options.twoFactorAuthentication||h.options.optionalTwoFactorAuthentication)&&(e=h.util.getButtonAttribute("disableemailotpauthenticator",f),h.util.addHTMLContent(p,e,o),o=!0,h.util.addEvent("click",e,function(e){y.disableMFAOptions("emailotpauthenticator",d,m)})):(a=r.Email)&&(s=function(e){y.addResendOTPBtn(!h.LRCheckLogin,d,m),C.sendMFAEmailOTPController({EmailId:e},d,m,p,f)},LoginRadiusDefaults.innerHTML=!0,e=h.util.getButtonAttribute("emailotp",f,function(e){if(1<a.length){LoginRadiusDefaults.innerHTML=!1;for(var t,o=[],n=0;n<a.length;n++)a[n]&&((t={}).text=a[n],t.value=a[n],o.push(t));var i={type:"option"};i.options=o,i.name="sendemailotp",i.rules="required",i.display="Select email to send verification code",y.createForm([i],"mfaselectemails",p,function(e){e=h.util.parseQueryString(e),s(e.sendemailotp)})}else r.Email&&r.Email[0]&&s(r.Email[0])}),h.util.addHTMLContent(p,e,o),o=!0))}():"sms"===u[n]?(t=void 0,h.options.smsOTPAuthentication&&(s?(LoginRadiusDefaults.innerHTML=!0,y.changeNumberForm(p,"",d,m,f,LoginRadiusDefaults.innerHTML)):(t=h.util.getButtonAttribute("otpauthenticator",f,function(){LoginRadiusDefaults.innerHTML=!1,y.updatePhoneNumber(p,d,m,f,"updatePhone2FA")}),h.util.addHTMLContent(p,t,o),o=!0))):"securityquestion"===u[n]?(t=void 0,h.options.securityQuestionAuthentication&&(r.IsSecurityQuestionAuthenticatorVerified?(("false"!==i||"false"!==a||"false"!==l)&&h.options.twoFactorAuthentication||h.options.optionalTwoFactorAuthentication)&&(t=h.util.getButtonAttribute("disablesqauthenticator",f),h.util.addHTMLContent(p,t,o),o=!0,h.util.addEvent("click",t,function(){y.disableMFAOptions("sqauthenticator",d,m)})):(t=h.util.getButtonAttribute("securityquestionsauthenticator",f,function(){LoginRadiusDefaults.innerHTML=!1,y.showMFASecurityQuestions(r,p,d,m,f)}),h.util.addHTMLContent(p,t,o),o=!0))):"googleauth"===u[n]&&(e=void 0,h.options.googleAuthentication)&&(r.IsGoogleAuthenticatorVerified?(("false"!==i||"false"!==a||"false"!==c)&&h.options.twoFactorAuthentication||h.options.optionalTwoFactorAuthentication)&&(e=h.util.getButtonAttribute("disablegoogleauthenticator",f),h.util.addHTMLContent(p,e,o),o=!0,h.util.addEvent("click",e,function(e){y.disableMFAOptions("googleauthenticator",d,m)})):(e=h.util.getButtonAttribute("googleauthenticator",f,function(){LoginRadiusDefaults.innerHTML=!1,y.showQRCode(r,p,d,m,f)}),h.util.addHTMLContent(p,e,o),o=!0)))}},"createTwoFactorAuthentication"):h.log("Two Factor Authentication will not work, please set in commonOpitons either twoFactorAuthentication or optionalTwoFactorAuthentication")}var t=document.createElement("input"),o=(t.setAttribute("type","button"),h.buttonsName["createTwoFactorAuthentication".toLowerCase()]||a.createtwofactorauthentication),f=(t.setAttribute("value",o),e||LoginRadiusDefaults.classPrefix);document.getElementsByName(f+"profileeditor")[0]?h.options.showTwoFactorOnProfile&&document.getElementsByName(f+"profileeditor")[0].appendChild(t):(h.options.twoFactorAuthentication||h.options.optionalTwoFactorAuthentication)&&w.addHTMLContent(p,t);w.addEvent("click",t,function(e){g(),e.target.parentNode&&e.target.parentNode.removeChild(e.target)})}function k(e){var t,o;h.options.duplicateEmailWithUniqueUsername?((t=w.findInSchema(e,"name","emailid")).display="Username",t.rules="required"):(h.options.usernameLogin&&-1===(o=w.findInSchema(e,"name","emailid")).display.indexOf("/Username")&&(o.display=o.display+"/Username",o.rules="required"),(h.options.phoneLogin||h.options.passwordlessLoginOTP)&&(o||((o=w.findInSchema(e,"name","emailid")).rules="required"),-1===o.display.indexOf("/Phone"))&&(o.display=o.display+"/Phone"))}function R(e,t,o,n){var i,a;h.options.securityQuestionEnabled&&(h.registrationFormSchema=h.registrationFormSchema&&0<h.registrationFormSchema.length?h.registrationFormSchema:h.options.RegistrationFormSchema,i=h.registrationFormSchema,a=!0,i=y.getSecurityQuestionSchema(i),(a=i&&0<i.length?!1:a)?o([y.setMappedMessage(v.noSecurityQuestions)]):y.createForm(i,"updatesecurityquestion",e,function(e){C.updateSecurityQuestionController(e,t,o)},function(e){o(e)},n))}function P(a,s,r,l){var e=h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName);e?w.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+h.options.apiKey+"&access_token="+e,"",function(i){h.getConsentConfiguration(function(e){var t,o,n;o=[],n="",(t=i)&&t.ConsentProfile&&t.ConsentProfile.Consents&&(t=t.ConsentProfile.Consents,n=y.createConsentOptionInterface(h.consentsList,t)),o.push({html:n,name:"consent",type:"html"}),y.createForm(o,"consenteditor",a,function(e){var t=y.consentValidation(e);if(0<t.length)r(t);else{var o,n=h.util.parseQueryString(e),i=[];for(o in n){var a=o.replace("consent_","");i.push({ConsentOptionId:a,IsAccepted:n[o]})}(n={}).Consents=i,C.updateConsentController(n,s,r)}},function(e){r(e)},l)})}):r([y.setMappedMessage(v.tokenValid)])}function n(p,r){var d=(r=r||{}).onSuccess||function(){},m=r.onError||function(){},g=r.container||"",f=r.classPrefix||"",u=r.templateName||"";h.$hooks.register("getCurrentActionOptions",function(e){p==e&&(window.LRSafarionSuccess=d||function(){},window.LRSafarionError=m||function(){}),h.currentActionOptions||(h.currentActionOptions={}),h.currentActionOptions[p]={},h.currentActionOptions[p].onSuccess=d||function(){},h.currentActionOptions[p].onError=m||function(){},h.currentActionOptions[p].container=g,h.currentActionOptions[p].classPrefix=f||"",h.currentActionOptions[p].templateName=u||""}),h.getAppConfiguration(function(e){var t,o,n;e&&e.ErrorCode||("registration"!==p&&"updateSecurityQuestion"!==p&&h.$hooks.call("beforeInit",p),(e={}).privacyPolicyUpdate=function(){var t,o,n,i,a,e;t=g,o=d,n=m,i=f,h.options.privacyPolicyConfiguration.IsEnabled&&((a=h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName))?((e=h.privacyPolicySchema.slice())[0].rules="Strict"===h.options.privacyPolicyConfiguration.Mode?"required":"",y.createForm(e,"privacyPolicyUpdate",t,function(e){C.updatePrivacyPolicy(a,"",o,n,!0,t,i)},function(e){n(y.setMappedMessage(e))})):n([y.setMappedMessage(v.tokenValid)]))},e.login=function(){i(g,d,m,f)},e.registration=function(){var u=setInterval(function(){if(!LoginRadiusDefaults.isRegFormSchemaLock){LoginRadiusDefaults.isRegFormSchemaLock=!0,h.$hooks.call("beforeInit",p);var t=g,o=d,n=m,i=f;w.addRecaptchaJS(),h.registrationFormSchema=h.registrationFormSchema&&0<h.registrationFormSchema.length?h.registrationFormSchema:h.options.RegistrationFormSchema;for(var e,a,s=h.registrationFormSchema,r=JSON.parse(JSON.stringify(s)),l=[],c=0;c<r.length;c++)r[c]&&h.options.showSplitForm&&r[c].DataSource&&null!==r[c].DataSource&&(e=JSON.parse(JSON.stringify(r[c])),a=JSON.parse(JSON.stringify(w.findInSchema(r,"name","cf_"+r[c].DataSource+"Code"))),e.name="recordid",a.name="code",l.push(e),l.push(a));0<l.length&&h.options.showSplitForm?y.createForm(l,"validatecode",t,function(e){w.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/validatecode?apiKey="+h.options.apiKey,e,function(e){1==e.IsValid?S(t,o,n,i,r):n(e)},"registration")}):(h.options.securityQuestionEnabled&&h.options.SecurityQuestions&&y.getSecurityQuestionSchema(r,!0),S(t,o,n,i,r)),clearInterval(u)}},1e3)},e.resetPassword=function(){y.resetPassword(g,d,m,f)},e.resetPIN=function(){y.resetPIN(g,d,m,f)},e.forgotPassword=function(){var t,o,n,i,e;t=g,o=d,n=m,i=f,k(e=h.forgotPasswordFormSchema),y.createForm(e,"forgotpassword",t,function(e){-1!==(e=w.checkPhoneOrEmailLogin(e)).indexOf("phoneApi=1")?(LoginRadiusDefaults.LRPhoneNo=e,C.forgotPasswordbyPhoneController(e,t,o,n,i)):C.forgotPasswordController(e,t,o,n,i)},function(e){n(e)},i)},e.forgotPIN=function(){var t,o,n,i,e;t=g,o=d,n=m,i=f,k(e=h.forgotPINFormSchema),y.createForm(e,"forgotPIN",t,function(e){-1!==(e=w.checkPhoneOrEmailLogin(e)).indexOf("phoneApi=1")?(LoginRadiusDefaults.LRPhoneNo=e,C.forgotPINbyPhoneController(e,t,o,n,i)):C.forgotPINController(e,t,o,n,i)},function(e){n(e)},i)},e.verifyEmail=function(){s(d,m,g,f)},e.changePassword=function(){var e,t,o,n,i;e=g,t=d,o=m,n=f,i=h.changePasswordFormSchema,y.setPasswordRule(w.findInSchema(i,"name","newpassword")),y.setPasswordRule(w.findInSchema(i,"name","confirmnewpassword")),y.createForm(i,"changepassword",e,function(e){C.changePasswordController(e,t,o)},function(e){o(e)},n)},e.changePIN=function(){var e,t,o,n,i;e=g,t=d,o=m,n=f,i=h.changePINFormSchema.slice(),y.setPINRule(w.findInSchema(i,"name","newpin")),y.setPINRule(w.findInSchema(i,"name","confirmnewpin")),y.createForm(i,"changepin",e,function(e){C.changePINController(e,t,o)},function(e){o(e)},n)},e.crossDeviceSSO=function(){y.loadQRCodeScript(function(){var e,t,o,n,i,a;e=g,t=r.expirytime,o=d,n=m,i=f,h.options.isCrossDeviceSSOEnabled&&(a=setInterval(function(){h.CDSSOPingApiTimeout&&clearTimeout(h.CDSSOPingApiTimeout),y.generateCrossDeviceSSOCode(e,t,o,n,i,function(){clearInterval(a)})},1e3*t),y.generateCrossDeviceSSOCode(e,t,o,n,i,function(){clearInterval(a)}))})},e.socialLogin=function(){var e=w.elementById(g);e&&w.addEvent("click",e,function(){LoginRadiusDefaults.socialRegFormId=this.id}),LoginRadiusDefaults.socialRegFormId=g,y.socialLogin(g,d,m,f)},e.linkAccount=function(){var i,a,s,r,l,c;i=g,a=d,s=m,r=u,h.options.disableAccountLinking?h.log(v.disabledAccountLinking):(l=i.split(","),(c=h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName))?w.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+h.options.apiKey+"&access_token="+c,"",function(e){if(e.ErrorCode)s(y.loginRadiusErrorTojsError(e));else if(e.EmailVerified||e.PhoneIdVerified){var t={};if(e.Identities)for(var o=0,n=e.Identities.length;o<n;o++)t[e.Identities[o].Provider]=e.Identities[o].ID;1===l.length?y.renderCustomInterface(i,t,r,"",!0):y.renderCustomInterface(i,t,h.options.linkedAccountsTemplate+","+h.options.notLinkedAccountsTemplate,!0,!0),window.html5passToken=function(e){C.accountLinkingReceiveToken(e,a,s)},h.options.isMobile||h.options.noCallbackForSocialLogin?h.$hooks.register("socialCalls",function(e,t){h.options.noCallbackForSocialLogin&&y.pingForSocialIdentity(c,t,a,s)}):w.addEvent("message",window,function(e){-1===e.origin.indexOf(h.options.customDomain)&&-1===e.origin.indexOf(LoginRadiusDefaults.hubDomain)||"string"==typeof e.data&&(T.test(e.data)||w.isJWT(e.data))&&C.accountLinkingReceiveToken(e.data,a,s)})}else s([y.setMappedMessage(v.unverifiedUser)])},"linkAccount"):s([y.setMappedMessage(v.tokenValid)]))},e.unLinkAccount=function(){var o=w.unLinkAccount;w.unLinkAccount=function(e,t){o(e,t,d,m)}},e.profileEditor=function(){var r,l,c,u,a,p;r=g,l=d,c=m,u=f,(p=h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName))?(a=function(s){w.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+h.options.apiKey+"&access_token="+p,"",function(e){var t=JSON.parse(JSON.stringify(s)),t=y.mapSchema(t,e,"profileeditor"),o=[],n=[],i={};i.Profile=e,i.access_token=p;for(var a=0;a<t.length;a++)t[a].name&&-1===t[a].name.indexOf("emailid")&&-1===t[a].name.indexOf("phoneid")&&o.push(t[a]),t[a].permission&&"h"!==t[a].permission&&n.push(t[a]);y.createForm(o,"profileeditor",r,function(e){C.updateData(i,r,e,l,c,u,o,"profileEditor")},function(e){c(e)},u),(h.options.optionalTwoFactorAuthentication||h.options.twoFactorAuthentication)&&L(r,l,c,u),h.$hooks.call("renderProfileEditorHook",e,n)},"profileEditor")},h.registrationFormSchema=h.registrationFormSchema&&0<h.registrationFormSchema.length?h.registrationFormSchema:h.options.RegistrationFormSchema,h.progressiveProfiling.showInEditor?h.progressiveProfiling.fetchSchema(function(e){var t=h.registrationFormSchema.slice();if(e&&e.ProfilingSteps)for(var o=0;o<e.ProfilingSteps.length;o++)for(var n=e.ProfilingSteps[o].Schema,i=0;i<n.length;i++)h.util.containsObject(t,n[i],"name")||t.push(n[i]);a(t)}):a(h.registrationFormSchema)):c([y.setMappedMessage(v.tokenValid)])},e.deleteUser=function(){var t,o,n,e;t=d,o=m,n=g,(e=h.sessionData.getToken())?w.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+h.options.apiKey+"&access_token="+e+"&deleteUrl="+h.options.deleteUrl+"&emailTemplate="+h.options.deleteUserEmailTemplate,{},function(e){e.ErrorCode?o(y.loginRadiusErrorTojsError(e)):(t(e),y.showOTPTemplateForm("DeleteAccount")&&n&&y.createForm(h.otpSchema,"otp",n,function(e){e=h.util.parseQueryString(e);l(t,o,e.otp)},function(e){o(e)}))},"deleteUser"):o([v.vTokenError])},e.deleteUserConfirm=function(){l(d,m)},e.updatePhone=function(){h.LRCheck2FA=!1,y.updatePhoneNumber(g,d,m,f)},e.changeUsername=function(){var t,o;t=d,o=m,y.createForm(h.changeUsernameFormSchema,"changeUsername",g,function(e){C.changeUsernameController(e,t,o)},function(e){o(e)},f)},e.resendVerificationEmail=function(){var t,o;t=d,o=m,y.createForm(h.emailSchema,"resendEmailVerification",g,function(e){C.resendEmailVerificationController(e,t,o)},function(e){o(e)},f)},e.addEmail=function(){var t,o;t=d,o=m,y.createForm(h.addEmailSchema,"addemail",g,function(e){C.addEmailController(e,t,o)},function(e){o(e)},f)},e.removeEmail=function(){var t,o;t=d,o=m,y.createForm(h.emailSchema,"removeemail",g,function(e){C.removeEmailController(e,t,o)},function(e){o(e)},f)},e.createTwoFactorAuthentication=function(){L(g,d,m,f)},e.backupCodeButton=function(){var t,o,n,i;t=g,o=d,n=m,i=f,w.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apikey="+h.options.apiKey+"&access_token="+h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"",function(e){(e.IsSecurityQuestionAuthenticatorVerified||e.IsEmailOtpAuthenticatorVerified||e.IsOTPAuthenticatorVerified||e.IsGoogleAuthenticatorVerified)&&(e=h.util.getButtonAttribute("generatebackupcodebutton",i),w.addHTMLContent(t,e),w.addEvent("click",e,function(e){h.api.getBackupCode(h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),o,n)}))})},e.resetBackupCodeButton=function(){var o,n,i;o=g,n=d,i=m,w.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apikey="+h.options.apiKey+"&access_token="+h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"",function(e){var t;(e.IsSecurityQuestionAuthenticatorVerified||e.IsEmailOtpAuthenticatorVerified||e.IsOTPAuthenticatorVerified||e.IsGoogleAuthenticatorVerified)&&((e=document.createElement("input")).setAttribute("type","button"),t=h.buttonsName["resetBackupCode".toLowerCase()]||a.resetBackupCode,e.setAttribute("value",t),w.addHTMLContent(o,e),w.addEvent("click",e,function(e){h.api.resetBackupCode(h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName),n,i)}))})},e.updateSecurityQuestion=function(){var e=setInterval(function(){LoginRadiusDefaults.isSecurityFormSchemaLock||(LoginRadiusDefaults.isSecurityFormSchemaLock=!0,R(g,d,m,f),clearInterval(e))},1e3)},e.resetPasswordBySecurityQuestion=function(){var o,n,i,a,s,e;o=g,n=d,i=m,a=f,h.options.securityQuestionEnabled&&(s=!0,k(e=h.getSecQSchema),y.createForm(e,"securityquestions",o,function(e){e=w.checkPhoneOrEmailLogin(e),C.getSecurityQuestionsController(e,function(e){0<e.length&&(s=!1);var t=h.loginFormSchema.slice(),t=(y.setPasswordRule(h.util.findInSchema(t,"name","password")),y.setPasswordRule(h.util.findInSchema(t,"name","confirmpassword")),w.mergeObjects(t,e));h.loginAction||k(t),s?i([y.setMappedMessage(v.noSecurityQuestions)]):y.createForm(t,"resetpwdbysecq",o,function(e){e=w.checkPhoneOrEmailLogin(e),C.resetPasswordBySecurityQuestionController(e,n,i)},function(e){i(e)},a)},function(e){i(e)})},function(e){i(e)},a))},e.resetPINBySecurityQuestion=function(){var o,n,i,a,s,e;o=g,n=d,i=m,a=f,h.options.securityQuestionEnabled&&(s=!0,k(e=h.getSecQSchema),y.createForm(e,"securityquestions",o,function(e){e=w.checkPhoneOrEmailLogin(e),C.getSecurityQuestionsController(e,function(e){0<e.length&&(s=!1);var t=h.resetPINFormSchema.slice(0,1),t=(t.push(h.loginFormSchema[0]),y.setPINRule(h.util.findInSchema(t,"name","pin")),w.mergeObjects(t,e));h.loginAction||k(t),s?i([y.setMappedMessage(v.noSecurityQuestions)]):y.createForm(t,"resetpinbysecq",o,function(e){e=w.checkPhoneOrEmailLogin(e),C.resetPINBySecurityQuestionController(e,n,i)},function(e){i(e)},a)},function(e){i(e)})},function(e){i(e)},a))},e.ssoLogin=function(){var o;o=d,y.validateAndCall(function(){var e=h.options.customDomain||h.options.appName+"."+LoginRadiusDefaults.hubDomain;w.ajaxCall("get","https://"+e+"/ssologin/login","",function(t){t.isauthenticated&&(h.loginRadiusHtml5PassToken?h.loginRadiusHtml5PassToken(t.token):(h.storage.setBrowserStorage(LoginRadiusDefaults.storedTokenName,t.token),h.options.tokenType&&"jwt"===h.options.tokenType.toLowerCase()?(LoginRadiusDefaults.lrResponseCounter++,LoginRadiusDefaults.lrCounterTokenResponse={},y.getJwtToken(t.token,function(e){o(t.token,e)})):o(t.token)))})})},e.logout=function(){y.logout(d)},e.ssoNotLoginThenLogout=function(){var o,n;o=m,n=d,y.validateAndCall(function(){var e=h.options.customDomain||h.options.appName+"."+LoginRadiusDefaults.hubDomain;w.ajaxCall("get","https://"+e+"/ssologin/login","",function(t){var e;t.isauthenticated?(void 0!==(e=LRNameSpace.cookies.getItem(LoginRadiusDefaults.tokenCookie))&&null!=e||(y.setToken(t.token),e=LRNameSpace.cookies.getItem(LoginRadiusDefaults.tokenCookie)),e&&e!==t.token?(y.setToken(t.token),n(t.token)):(h.storage.setBrowserStorage(LoginRadiusDefaults.storedTokenName,t.token),h.options.tokenType&&"jwt"===h.options.tokenType.toLowerCase()?(LoginRadiusDefaults.lrResponseCounter++,LoginRadiusDefaults.lrCounterTokenResponse={},y.getJwtToken(t.token,function(e){n(t.token,e)})):n(t.token))):(LRNameSpace.cookies.removeItem(LoginRadiusDefaults.tokenCookie,h.options.appPath),o())})})},e.pinreauthentication=function(){var e,t,o,n,i;e=g,t=d,o=m,n=f,i=[],h.pinLoginFormSchema&&((i=h.pinLoginFormSchema.slice()).rules="required"),i.length?y.createForm(i,"pinreauthentication",e,function(e){C.pinReauthController(e,t,o)},function(e){o(e)},n):h.log("Pin schema is not defined")},e.customeventconsent=function(){var o,n,i,a,s;o=g,n=r.event,i=d,a=m,s=f,h.getConsentConfiguration(function(e){var t=[],e=y.createConsentInterface(e["custom_"+n]);""!==e&&(t.push({html:e,name:"consent",type:"html"}),y.createForm(t,"customeventconsent",o,function(e){var t=y.consentValidation(e,"custom_"+n);0<t.length?a(t):(t=[],e=y.mapRegistrationSchema(null,e).Consents,t.push({Event:n,IsCustom:!0}),e.Events=t,C.customEventConsentController(e,i,a))},function(e){a(e)},s))})},e.consenteditor=function(){P(g,d,m,f)},o=function(){var t,o,n,i,e,a,s,r;t=g,o=d,n=m,i=f,a=w.getHashParam("vtoken"),s=w.getHashParam("vtype"),!(r=h.options.isCaptchaEnabled||h.options.v2Recaptcha||h.options.invisibleRecaptcha||h.options.tencentCaptcha||h.options.tencentCaptchaAsFallback)&&h.options.privacyPolicyConfiguration.IsEnabled&&h.log("Captcha should be enabled for passwordless login if using with privacy policy"),"noregistration"!==s&&"onetouchlogin"!==s||C.oneTouchLoginEmailVerification(a,o,n),s=h.passwordLessLoginSchema,h.options.phoneLogin&&((a=w.findInSchema(s,"name","emailid")).display=a.display+"/Phone"),r&&(w.addRecaptchaJS(),e=i+LoginRadiusDefaults.idPrefix+"recaptcha_widget_onetouchlogin",w.captchaSchema(e,s)),y.createForm(s,"oneTouchLogin",t,function(e){C.oneTouchLoginController(e,t,o,n,i,r)},function(e){n(e)},i),r&&w.renderV2Recaptcha(e,!0)},n=function(){var t,o,n,i,e;t=g,o=d,n=m,i=f,k(e=h.smartLoginSchema),y.createForm(e,"smartlogin",t,function(e){e=w.checkPhoneOrEmailLogin(e);-1!==e.indexOf("phone")?C.loginOTPController(e,t,o,n,i):C.smartLoginController(e,o,n)},function(e){n(e)},i)},e.instantLinkLogin=t=function(){var e,t,o,n,i;e=d,t=m,o=f,n=w.getHashParam("vtoken"),"oneclicksignin"!==(i=w.getHashParam("vtype"))&&"passwordlesslogin"!==i||h.passwordlessLoginFlag||(h.passwordlessLoginFlag=!0,y.passwordlessLoginVerification(n,e,t,o))},e.passwordlessLoginValidate=t,e.autoLogin=n,e.smartLogin=n,e.noRegistrationPasswordLessLogin=o,e.onetouchLogin=o,e.default=function(){h.log("This action is not valid.")},(e[p]||e.default)())})}return this.trackEvent=function(){h.options.debugMode&&console.warn("Anonymous login feature has been deprecated")},w.unLinkAccount=function(e,t,o,n){var i;o=o||function(){},n=n||function(){},e&&t&&(i={provider:e,providerid:t},(e=h.storage.getBrowserStorage(LoginRadiusDefaults.storedTokenName))?w.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/socialIdentity?apiKey="+h.options.apiKey+"&access_token="+e,i,function(e){e.ErrorCode?n(y.loginRadiusErrorTojsError(e)):o(e,i)},"unLinkAccount"):n([y.setMappedMessage(v.tokenValid)]))},LoginRadiusHooksModel(h),setLoginRadiusModuleFunctions(h,o),h.init=function(e,t){h.useraction=e,o.maskSensitiveInput?h.otpSchema=[{type:"password",name:"otp",display:"Verification Code",rules:"required",permission:"r"}]:h.otpSchema=[{type:"string",name:"otp",display:"Verification Code",rules:"required",permission:"r"}],"required"===o.twoFactorAuthentication?(o.twoFactorAuthentication=!0,o.optionalTwoFactorAuthentication=!1):"optional"===o.twoFactorAuthentication&&(o.twoFactorAuthentication=!1,o.optionalTwoFactorAuthentication=!0),"ssoLogin"!==e&&"logout"!==e&&"ssoNotLoginThenLogout"!==e||LoginRadiusDefaults.isSSOInitFired||(LoginRadiusDefaults.isSSOInitFired=!0,h.SSOinitFired=!0),"organization"!==e&&"login"!==e||(h.currentActionOptions||(h.currentActionOptions={}),h.currentActionOptions[e]={},h.currentActionOptions[e].onSuccess=t.onSuccess||function(){},h.currentActionOptions[e].container=t.container||"",h.currentActionOptions[e].onError=t.onError||function(){},h.currentActionOptions[e].classPrefix=t._classPrefix||""),o.appName||h.log("SSO will not work, please set option.appName for SSO"),o.formRenderDelay=o.formRenderDelay||0,o.apiKey?0<o.formRenderDelay?setTimeout(function(){n(e,t)},o.formRenderDelay):n(e,t):h.log("API key must be set.")},setLoginRadiusDefaultSchema(h),h.api=new LoginRadiusApiFramework(h,C),h};